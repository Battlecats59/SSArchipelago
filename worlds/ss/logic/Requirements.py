### --------------------------------------------------- ###
### THIS FILE IS AUTOMATICALLY GENERATED USING LOGIC    ###
### SPECIFIED IN `worlds/ss/logic/requirements/`        ###
### WHEN UPDATING LOGIC, DO NOT EDIT THIS FILE DIRECTLY ###
### RATHER, UPDATE THE REQUIREMENTS AND RUN THE PY      ###
### SCRIPT `worlds/ss/logic/LogicExport.py`             ###
### --------------------------------------------------- ###
### FILE MUST BE MANUALLY CHECKED FOR ERRORS BEFORE     ###
### COMMITTING! FORMAT USING BLACK         THANK YOU!   ###
### --------------------------------------------------- ###

from typing import TYPE_CHECKING

from BaseClasses import MultiWorld
from worlds.generic.Rules import set_rule

if TYPE_CHECKING:
    from .. import SSWorld

from .Macros import BASE_MACROS

from .requirements.Skyloft import SKYLOFT_REQUIREMENTS
from .requirements.Sky import SKY_REQUIREMENTS
from .requirements.Faron import FARON_REQUIREMENTS
from .requirements.Eldin import ELDIN_REQUIREMENTS
from .requirements.Lanayru import LANAYRU_REQUIREMENTS

from .requirements.Skyview import SKYVIEW_REQUIREMENTS
from .requirements.Earth_Temple import EARTH_TEMPLE_REQUIREMENTS
from .requirements.Lanayru_Mining_Facility import LANAYRU_MINING_FACILITY_REQUIREMENTS
from .requirements.Ancient_Cistern import ANCIENT_CISTERN_REQUIREMENTS
from .requirements.Sandship import SANDSHIP_REQUIREMENTS
from .requirements.Fire_Sanctuary import FIRE_SANCTUARY_REQUIREMENTS
from .requirements.Sky_Keep import SKY_KEEP_REQUIREMENTS

ALL_REQUIREMENTS = (
    SKYLOFT_REQUIREMENTS
    | SKY_REQUIREMENTS
    | FARON_REQUIREMENTS
    | ELDIN_REQUIREMENTS
    | LANAYRU_REQUIREMENTS
    | SKYVIEW_REQUIREMENTS
    | EARTH_TEMPLE_REQUIREMENTS
    | LANAYRU_MINING_FACILITY_REQUIREMENTS
    | ANCIENT_CISTERN_REQUIREMENTS
    | SANDSHIP_REQUIREMENTS
    | FIRE_SANCTUARY_REQUIREMENTS
    | SKY_KEEP_REQUIREMENTS
)


def location_requirements(world: "SSWorld", loc):
    if loc == "Upper Skyloft - Owlan's Gift":
        return lambda state, player=world.player: True
    if loc == "Upper Skyloft - Sparring Hall Chest":
        return lambda state, player=world.player: True
    if loc == "Upper Skyloft - Ring Knight Academy Bell":
        return lambda state, player=world.player: (
            (
                (state.has("Progressive Slingshot", player, 1))
                or (state.has("Progressive Beetle", player, 1))
                or (state.has("Progressive Bow", player, 1))
            )
            or state.has("Clawshots", player, 1)
        ) or state.has("Gust Bellows", player, 1)
    if loc == "Upper Skyloft - Chest near Goddess Statue":
        return lambda state, player=world.player: True
    if loc == "Upper Skyloft - First Goddess Sword Item in Goddess Statue":
        return lambda state, player=world.player: True
    if loc == "Upper Skyloft - Second Goddess Sword Item in Goddess Statue":
        return lambda state, player=world.player: True
    if loc == "Upper Skyloft - Pumpkin Archery -- 600 Points":
        return lambda state, player=world.player: (
            state.has("Progressive Bow", player, 1)
        )
    if loc == "Upper Skyloft - Crystal in Sparring Hall":
        return lambda state, player=world.player: (
            state.has("Progressive Beetle", player, 1)
        )
    if loc == "Upper Skyloft - Fledge's Gift":
        return lambda state, player=world.player: True
    if loc == "Upper Skyloft - Owlan's Crystals":
        return lambda state, player=world.player: (
            state.can_reach_region("Faron Woods - In the Woods", player)
            and (state.has("Bomb Bag", player, 1) and state.has("Scrapper", player, 1))
        )
    if loc == "Upper Skyloft - Fledge's Crystals":
        return lambda state, player=world.player: (
            (state.has("Progressive Pouch", player, 1))
            and state.has("Empty Bottle", player, 1)
        ) and (
            (
                state.can_reach_region("Lanayru Desert - North Desert", player)
                and (
                    state._ss_option_lmf_open(player)
                    or (
                        state._ss_option_lmf_main_node(player)
                        and (state.has("Progressive Sword", player, 1))
                    )
                    or (
                        state.can_reach_region("Lanayru Desert - North Desert", player)
                        and (
                            (
                                state.can_reach_region(
                                    "Lanayru Desert - Fire Node", player
                                )
                                and (
                                    state.has("Bomb Bag", player, 1)
                                    and (state.has("Progressive Beetle", player, 2))
                                    and (
                                        (
                                            (state.has("Progressive Sword", player, 1))
                                            or (state.has("Progressive Bow", player, 1))
                                            or state.has("Bomb Bag", player, 1)
                                        )
                                    )
                                    and (state.has("Progressive Sword", player, 1))
                                )
                            )
                            and (
                                state.can_reach_region(
                                    "Lanayru Desert - Lightning Node", player
                                )
                                and (
                                    state.has("Bomb Bag", player, 1)
                                    and (state.has("Progressive Sword", player, 1))
                                )
                            )
                            and (
                                state.can_reach_region(
                                    "Lanayru Desert - North Desert", player
                                )
                                and (
                                    state.has("Bomb Bag", player, 1)
                                    and (state.has("Progressive Sword", player, 1))
                                )
                            )
                        )
                    )
                )
            )
        )
    if loc == "Upper Skyloft - Item from Cawlin":
        return lambda state, player=world.player: state.has("Goddess's Harp", player, 1)
    if loc == "Upper Skyloft - Ghost/Pipit's Crystals":
        return lambda state, player=world.player: state.has(
            "Cawlin's Letter", player, 1
        )
    if loc == "Upper Skyloft - Crystal in Link's Room":
        return lambda state, player=world.player: True
    if loc == "Upper Skyloft - Crystal in Knight Academy Plant":
        return lambda state, player=world.player: True
    if loc == "Upper Skyloft - In Zelda's Closet":
        return lambda state, player=world.player: True
    if loc == "Upper Skyloft - Crystal in Zelda's Room":
        return lambda state, player=world.player: True
    if loc == "Central Skyloft - Potion Lady's Gift":
        return lambda state, player=world.player: True
    if loc == "Central Skyloft - Repair Gondo's Junk":
        return lambda state, player=world.player: (
            (
                state.can_reach_region("Lanayru Mine - Landing", player)
                and (
                    (
                        (
                            (
                                (state.has("Progressive Slingshot", player, 1))
                                or (state.has("Progressive Beetle", player, 1))
                                or (state.has("Progressive Bow", player, 1))
                            )
                            or state.has("Clawshots", player, 1)
                        )
                        or (state.has("Progressive Sword", player, 1))
                        or state.has("Whip", player, 1)
                        or state.has("Bomb Bag", player, 1)
                    )
                )
            )
            or (
                state.can_reach_region("Lanayru Desert - Desert Entry", player)
                and (state.has("Bomb Bag", player, 1))
            )
            or (
                state.can_reach_region("Lanayru Desert - North Desert", player)
                and (
                    state.has("Bomb Bag", player, 1)
                    or (state.has("Progressive Beetle", player, 2))
                )
            )
            or (
                state.can_reach_region("Lanayru Gorge - Gorge", player)
                and (
                    (
                        (
                            (
                                (state.has("Progressive Slingshot", player, 1))
                                or (state.has("Progressive Beetle", player, 1))
                                or (state.has("Progressive Bow", player, 1))
                            )
                            or state.has("Clawshots", player, 1)
                        )
                        or (state.has("Progressive Sword", player, 1))
                        or state.has("Whip", player, 1)
                        or state.has("Bomb Bag", player, 1)
                    )
                    and state.has("Gust Bellows", player, 1)
                )
            )
            or (
                state.can_reach_region("Lanayru Sand Sea - Pirate Stronghold", player)
                and (True)
            )
        )
    if loc == "Central Skyloft - Wryna's Crystals":
        return lambda state, player=world.player: True
    if loc == "Central Skyloft - Waterfall Cave First Chest":
        return lambda state, player=world.player: (
            (state.has("Progressive Sword", player, 1))
            or state.has("Bomb Bag", player, 1)
        )
    if loc == "Central Skyloft - Waterfall Cave Second Chest":
        return lambda state, player=world.player: (
            (state.has("Progressive Sword", player, 1))
            or state.has("Bomb Bag", player, 1)
        )
    if loc == "Central Skyloft - Rupee Waterfall Cave Crawlspace":
        return lambda state, player=world.player: (
            (state.has("Progressive Sword", player, 1))
            or state.has("Bomb Bag", player, 1)
        )
    if loc == "Central Skyloft - Parrow's Gift":
        return lambda state, player=world.player: (
            state.can_reach_region("Sky", player) and (True)
        )
    if loc == "Central Skyloft - Parrow's Crystals":
        return lambda state, player=world.player: (
            state.can_reach_region("Sky", player)
            and (
                (
                    (state.has("Progressive Pouch", player, 1))
                    and state.has("Empty Bottle", player, 1)
                )
            )
        )
    if loc == "Central Skyloft - Peater/Peatrice's Crystals":
        return lambda state, player=world.player: True
    if loc == "Central Skyloft - Item in Bird Nest":
        return lambda state, player=world.player: state.has(
            "Clawshots", player, 1
        ) and state.has("Gust Bellows", player, 1)
    if loc == "Central Skyloft - Shed Chest":
        return lambda state, player=world.player: state.has(
            "Water Dragon's Scale", player, 1
        )
    if loc == "Central Skyloft - West Cliff Goddess Chest":
        return lambda state, player=world.player: (
            state.can_reach_region("Faron Woods - In the Woods", player)
            and (
                (state.has("Progressive Sword", player, 2))
                and state.can_reach_region(
                    "Faron Woods - Outside Top of Great Tree", player
                )
            )
        )
    if loc == "Central Skyloft - Bazaar Goddess Chest":
        return lambda state, player=world.player: (
            state.can_reach_region("Lanayru Sand Sea - Ancient Harbor", player)
            and (
                (state.has("Progressive Sword", player, 2))
                and state.has("Clawshots", player, 1)
            )
        )
    if loc == "Central Skyloft - Shed Goddess Chest":
        return lambda state, player=world.player: (
            state.can_reach_region("Eldin Volcano - Sand Slide", player)
            and ((state.has("Progressive Sword", player, 2)))
        ) and state.has("Water Dragon's Scale", player, 1)
    if loc == "Central Skyloft - Floating Island Goddess Chest":
        return lambda state, player=world.player: (
            state.can_reach_region("Lake Floria - Higher Ledge in Lake", player)
            and ((state.has("Progressive Sword", player, 2)))
        ) and state.has("Clawshots", player, 1)
    if loc == "Central Skyloft - Waterfall Goddess Chest":
        return lambda state, player=world.player: (
            state.can_reach_region("Lanayru Sand Sea - Pirate Stronghold", player)
            and (
                (state.has("Progressive Sword", player, 2))
                and state.has("Clawshots", player, 1)
                and (
                    state.can_reach_region(
                        "Lanayru Sand Sea - Pirate Stronghold", player
                    )
                    and (
                        (
                            (state.has("Progressive Sword", player, 1))
                            or (state.has("Progressive Bow", player, 1))
                        )
                        and (
                            state.has("Gust Bellows", player, 1)
                            and (state.has("Progressive Sword", player, 1))
                        )
                    )
                )
            )
        ) and state.has("Clawshots", player, 1)
    if loc == "Central Skyloft - Crystal in Orielle and Parrow's House":
        return lambda state, player=world.player: True
    if loc == "Central Skyloft - Crystal on West Cliff":
        return lambda state, player=world.player: True
    if loc == "Central Skyloft - Crystal between Wooden Planks":
        return lambda state, player=world.player: True
    if loc == "Central Skyloft - Crystal after Waterfall Cave":
        return lambda state, player=world.player: (
            (state.has("Progressive Sword", player, 1))
            or state.has("Bomb Bag", player, 1)
        ) or (state.has("Progressive Beetle", player, 1))
    if loc == "Central Skyloft - Crystal in Loftwing Prison":
        return lambda state, player=world.player: (
            (state.has("Progressive Sword", player, 1))
            or state.has("Bomb Bag", player, 1)
        ) or (state.has("Progressive Beetle", player, 1))
    if loc == "Central Skyloft - Crystal on Waterfall Island":
        return lambda state, player=world.player: state.has("Clawshots", player, 1) or (
            (
                state.has("Progressive Beetle", player, 3)
                and state._ss_option_gondo_upgrades(player)
            )
            or (
                (
                    (state.has("Progressive Beetle", player, 2))
                    and (
                        (
                            state.can_reach_region(
                                "Faron Woods - Deep Woods Entry", player
                            )
                            and (True)
                        )
                    )
                    and (
                        (
                            state.can_reach_region("Lanayru Mine - Landing", player)
                            and (
                                (
                                    (
                                        (
                                            (
                                                state.has(
                                                    "Progressive Slingshot", player, 1
                                                )
                                            )
                                            or (
                                                state.has(
                                                    "Progressive Beetle", player, 1
                                                )
                                            )
                                            or (state.has("Progressive Bow", player, 1))
                                        )
                                        or state.has("Clawshots", player, 1)
                                    )
                                    or (state.has("Progressive Sword", player, 1))
                                    or state.has("Whip", player, 1)
                                    or state.has("Bomb Bag", player, 1)
                                )
                            )
                        )
                        or (
                            state.can_reach_region(
                                "Lanayru Desert - Desert Entry", player
                            )
                            and (state.has("Bomb Bag", player, 1))
                        )
                        or (
                            state.can_reach_region(
                                "Lanayru Desert - North Desert", player
                            )
                            and (
                                state.has("Bomb Bag", player, 1)
                                or (state.has("Progressive Beetle", player, 2))
                            )
                        )
                        or (
                            state.can_reach_region("Lanayru Gorge - Gorge", player)
                            and (
                                (
                                    (
                                        (
                                            (
                                                state.has(
                                                    "Progressive Slingshot", player, 1
                                                )
                                            )
                                            or (
                                                state.has(
                                                    "Progressive Beetle", player, 1
                                                )
                                            )
                                            or (state.has("Progressive Bow", player, 1))
                                        )
                                        or state.has("Clawshots", player, 1)
                                    )
                                    or (state.has("Progressive Sword", player, 1))
                                    or state.has("Whip", player, 1)
                                    or state.has("Bomb Bag", player, 1)
                                )
                                and state.has("Gust Bellows", player, 1)
                            )
                        )
                        or (
                            state.can_reach_region(
                                "Lanayru Sand Sea - Pirate Stronghold", player
                            )
                            and (True)
                        )
                    )
                    and (
                        state.can_reach_region("Sky", player)
                        and ((state.has("Progressive Sword", player, 1)))
                    )
                )
                and not state._ss_option_gondo_upgrades(player)
            )
        )
    if loc == "Central Skyloft - Crystal on Light Tower":
        return lambda state, player=world.player: True
    if loc == "Skyloft Village - Mallara's Crystals":
        return lambda state, player=world.player: state.has("Gust Bellows", player, 1)
    if loc == "Skyloft Village - Bertie's Crystals":
        return lambda state, player=world.player: state.has("Baby Rattle", player, 1)
    if loc == "Skyloft Village - Sparrot's Crystals":
        return lambda state, player=world.player: (
            state.can_reach_region("Eldin Volcano - Near Temple Entrance", player)
            and (state.has("Clawshots", player, 1) and state.has("Scrapper", player, 1))
        )
    if loc == "Skyloft Village - Crystal near Pumpkin Patch":
        return lambda state, player=world.player: True
    if loc == "Beedle's Shop - 300 Rupee Item":
        return lambda state, player=world.player: (
            (
                (
                    (
                        state.can_reach_region("Sky", player)
                        and ((state.has("Progressive Sword", player, 1)))
                    )
                    and (state.can_reach_region("Skyloft Village", player) and (True))
                )
                or (
                    (
                        state.can_reach_region("Sky", player)
                        and (
                            (
                                state.can_reach_region(
                                    "Lanayru Desert - Desert Entry", player
                                )
                                and (
                                    state.has("Bomb Bag", player, 1)
                                    and state.has("Scrapper", player, 1)
                                )
                            )
                        )
                    )
                    or (
                        state.can_reach_region(
                            "Eldin Volcano - Thrill Digger Cave", player
                        )
                        and ((state.has("Progressive Mitts", player, 1)))
                    )
                )
            )
        ) and (
            (state.has("Progressive Pouch", player, 1))
            or state._ss_option_shopsanity(player)
        )
    if loc == "Beedle's Shop - 600 Rupee Item":
        return lambda state, player=world.player: (
            (
                (
                    state.can_reach_region("Sky", player)
                    and (
                        (
                            state.can_reach_region(
                                "Lanayru Desert - Desert Entry", player
                            )
                            and (
                                state.has("Bomb Bag", player, 1)
                                and state.has("Scrapper", player, 1)
                            )
                        )
                    )
                )
                or (
                    state.can_reach_region("Eldin Volcano - Thrill Digger Cave", player)
                    and ((state.has("Progressive Mitts", player, 1)))
                )
            )
            and (
                (state.has("Progressive Wallet", player, 2))
                or state.has("Extra Wallet", player, 1)
            )
        ) and (
            (state.has("Progressive Pouch", player, 1))
            or state._ss_option_shopsanity(player)
        )
    if loc == "Beedle's Shop - 1200 Rupee Item":
        return lambda state, player=world.player: (
            (
                (
                    state.can_reach_region("Sky", player)
                    and (
                        (
                            state.can_reach_region(
                                "Lanayru Desert - Desert Entry", player
                            )
                            and (
                                state.has("Bomb Bag", player, 1)
                                and state.has("Scrapper", player, 1)
                            )
                        )
                    )
                )
                or (
                    state.can_reach_region("Eldin Volcano - Thrill Digger Cave", player)
                    and ((state.has("Progressive Mitts", player, 1)))
                )
            )
            and (
                (state.has("Progressive Wallet", player, 3))
                or (
                    (state.has("Progressive Wallet", player, 2))
                    and state.has("Extra Wallet", player, 1)
                )
                or state.has("Extra Wallet", player, 3)
            )
        ) and (
            (state.has("Progressive Pouch", player, 1))
            or state._ss_option_shopsanity(player)
        )
    if loc == "Beedle's Shop - 800 Rupee Item":
        return lambda state, player=world.player: (
            (
                (
                    state.can_reach_region("Sky", player)
                    and (
                        (
                            state.can_reach_region(
                                "Lanayru Desert - Desert Entry", player
                            )
                            and (
                                state.has("Bomb Bag", player, 1)
                                and state.has("Scrapper", player, 1)
                            )
                        )
                    )
                )
                or (
                    state.can_reach_region("Eldin Volcano - Thrill Digger Cave", player)
                    and ((state.has("Progressive Mitts", player, 1)))
                )
            )
            and (
                (state.has("Progressive Wallet", player, 2))
                or (
                    (state.has("Progressive Wallet", player, 1))
                    and state.has("Extra Wallet", player, 1)
                )
                or state.has("Extra Wallet", player, 2)
            )
        )
    if loc == "Beedle's Shop - 1600 Rupee Item":
        return lambda state, player=world.player: (
            (
                (
                    state.can_reach_region("Sky", player)
                    and (
                        (
                            state.can_reach_region(
                                "Lanayru Desert - Desert Entry", player
                            )
                            and (
                                state.has("Bomb Bag", player, 1)
                                and state.has("Scrapper", player, 1)
                            )
                        )
                    )
                )
                or (
                    state.can_reach_region("Eldin Volcano - Thrill Digger Cave", player)
                    and ((state.has("Progressive Mitts", player, 1)))
                )
            )
            and (
                (state.has("Progressive Wallet", player, 3))
                or (
                    (state.has("Progressive Wallet", player, 2))
                    and state.has("Extra Wallet", player, 2)
                )
            )
        )
    if loc == "Beedle's Shop - First 100 Rupee Item":
        return lambda state, player=world.player: True
    if loc == "Beedle's Shop - Second 100 Rupee Item":
        return lambda state, player=world.player: True
    if loc == "Beedle's Shop - Third 100 Rupee Item":
        return lambda state, player=world.player: (
            (
                (
                    state.can_reach_region("Sky", player)
                    and ((state.has("Progressive Sword", player, 1)))
                )
                and (state.can_reach_region("Skyloft Village", player) and (True))
            )
            or (
                (
                    state.can_reach_region("Sky", player)
                    and (
                        (
                            state.can_reach_region(
                                "Lanayru Desert - Desert Entry", player
                            )
                            and (
                                state.has("Bomb Bag", player, 1)
                                and state.has("Scrapper", player, 1)
                            )
                        )
                    )
                )
                or (
                    state.can_reach_region("Eldin Volcano - Thrill Digger Cave", player)
                    and ((state.has("Progressive Mitts", player, 1)))
                )
            )
        )
    if loc == "Beedle's Shop - 50 Rupee Item":
        return lambda state, player=world.player: True
    if loc == "Beedle's Shop - 1000 Rupee Item":
        return lambda state, player=world.player: (
            (
                (
                    state.can_reach_region("Sky", player)
                    and (
                        (
                            state.can_reach_region(
                                "Lanayru Desert - Desert Entry", player
                            )
                            and (
                                state.has("Bomb Bag", player, 1)
                                and state.has("Scrapper", player, 1)
                            )
                        )
                    )
                )
                or (
                    state.can_reach_region("Eldin Volcano - Thrill Digger Cave", player)
                    and ((state.has("Progressive Mitts", player, 1)))
                )
            )
            and (
                (state.has("Progressive Wallet", player, 2))
                or (
                    (state.has("Progressive Wallet", player, 1))
                    and state.has("Extra Wallet", player, 2)
                )
                or state.has("Extra Wallet", player, 3)
            )
        )
    if loc == "Skyloft Silent Realm - Trial Reward":
        return lambda state, player=world.player: True
    if loc == "Skyloft Silent Realm - Relic 1":
        return lambda state, player=world.player: True
    if loc == "Skyloft Silent Realm - Relic 2":
        return lambda state, player=world.player: True
    if loc == "Skyloft Silent Realm - Relic 3":
        return lambda state, player=world.player: True
    if loc == "Skyloft Silent Realm - Relic 4":
        return lambda state, player=world.player: True
    if loc == "Skyloft Silent Realm - Relic 5":
        return lambda state, player=world.player: True
    if loc == "Skyloft Silent Realm - Relic 6":
        return lambda state, player=world.player: True
    if loc == "Skyloft Silent Realm - Relic 7":
        return lambda state, player=world.player: True
    if loc == "Skyloft Silent Realm - Relic 8":
        return lambda state, player=world.player: True
    if loc == "Skyloft Silent Realm - Relic 9":
        return lambda state, player=world.player: True
    if loc == "Skyloft Silent Realm - Relic 10":
        return lambda state, player=world.player: True
    if loc == "Sky - Lumpy Pumpkin - Chandelier":
        return lambda state, player=world.player: True
    if loc == "Sky - Lumpy Pumpkin - Harp Minigame":
        return lambda state, player=world.player: state.has(
            "Goddess's Harp", player, 1
        ) and (
            (state.has("Progressive Pouch", player, 1))
            and state.has("Empty Bottle", player, 1)
        )
    if loc == "Sky - Kina's Crystals":
        return lambda state, player=world.player: (
            state.can_reach_region("Mogma Turf - Entry", player)
            and (state.has("Scrapper", player, 1))
        ) and (
            (state.has("Progressive Pouch", player, 1))
            and state.has("Empty Bottle", player, 1)
        )
    if loc == "Sky - Orielle's Crystals":
        return lambda state, player=world.player: (
            state.can_reach_region("Sky", player)
            and (
                (
                    (state.has("Progressive Pouch", player, 1))
                    and state.has("Empty Bottle", player, 1)
                )
            )
        )
    if loc == "Sky - Beedle's Crystals":
        return lambda state, player=world.player: (
            state.can_reach_region("Central Skyloft", player)
            and (
                (
                    (
                        (state.has("Progressive Slingshot", player, 1))
                        or (state.has("Progressive Beetle", player, 1))
                        or (state.has("Progressive Bow", player, 1))
                    )
                    or state.has("Clawshots", player, 1)
                )
            )
        ) and state.has("Horned Colossus Beetle", player, 1)
    if loc == "Sky - Dodoh's Crystals":
        return lambda state, player=world.player: (
            state.can_reach_region("Lanayru Desert - Desert Entry", player)
            and (state.has("Bomb Bag", player, 1) and state.has("Scrapper", player, 1))
        )
    if loc == "Sky - Fun Fun Island Minigame -- 500 Rupees":
        return lambda state, player=world.player: (
            state.can_reach_region("Lanayru Desert - Desert Entry", player)
            and (state.has("Bomb Bag", player, 1) and state.has("Scrapper", player, 1))
        )
    if loc == "Sky - Chest in Breakable Boulder near Fun Fun Island":
        return lambda state, player=world.player: state.has("Spiral Charge", player, 1)
    if loc == "Sky - Chest in Breakable Boulder near Lumpy Pumpkin":
        return lambda state, player=world.player: state.has("Spiral Charge", player, 1)
    if loc == "Sky - Bamboo Island Goddess Chest":
        return lambda state, player=world.player: (
            state.can_reach_region("Eldin Volcano - Near Temple Entrance", player)
            and (
                (state.has("Progressive Sword", player, 2))
                and (state.has("Progressive Mitts", player, 1))
            )
        ) or (
            state.can_reach_region("Bokoblin Base - Top of Volcano", player)
            and (
                (state.has("Progressive Sword", player, 2))
                and (state.has("Progressive Mitts", player, 2))
                and (
                    state.can_reach_region("Bokoblin Base - Volcano", player)
                    and (
                        state.has("Bomb Bag", player, 1)
                        or (state.has("Progressive Slingshot", player, 1))
                        or (state.has("Progressive Bow", player, 1))
                    )
                )
            )
        )
    if loc == "Sky - Goddess Chest on Island next to Bamboo Island":
        return lambda state, player=world.player: (
            state.can_reach_region("Eldin Volcano - Volcano East", player)
            and ((state.has("Progressive Sword", player, 2)))
        ) or (
            state.can_reach_region("Bokoblin Base - Volcano", player)
            and ((state.has("Progressive Sword", player, 2)))
        )
    if loc == "Sky - Goddess Chest in Cave on Island next to Bamboo Island":
        return lambda state, player=world.player: (
            state.can_reach_region("Lanayru Desert - Stone Cache", player)
            and (
                (state.has("Progressive Sword", player, 2))
                and state.has("Clawshots", player, 1)
                and state.has("Bomb Bag", player, 1)
            )
        ) and state.has("Water Dragon's Scale", player, 1)
    if loc == "Sky - Beedle's Island Goddess Chest":
        return lambda state, player=world.player: (
            state.can_reach_region("Lanayru Desert - Temple of Time - Temple", player)
            and (
                (state.has("Progressive Sword", player, 2))
                and (
                    (
                        (state.has("Progressive Slingshot", player, 1))
                        or (state.has("Progressive Beetle", player, 1))
                        or (state.has("Progressive Bow", player, 1))
                    )
                    or state.has("Clawshots", player, 1)
                )
            )
        )
    if loc == "Sky - Beedle's Island Cage Goddess Chest":
        return lambda state, player=world.player: (
            state.can_reach_region("Faron Woods - Deep Woods after Beehive", player)
            and (
                (state.has("Progressive Sword", player, 2))
                and state.has("Clawshots", player, 1)
            )
        ) and (
            state.can_reach_region("Central Skyloft", player)
            and (
                (
                    (
                        (state.has("Progressive Slingshot", player, 1))
                        or (state.has("Progressive Beetle", player, 1))
                        or (state.has("Progressive Bow", player, 1))
                    )
                    or state.has("Clawshots", player, 1)
                )
            )
        )
    if loc == "Sky - Northeast Island Goddess Chest behind Bombable Rocks":
        return lambda state, player=world.player: (
            state.can_reach_region("Lanayru Mine - Landing", player)
            and ((state.has("Progressive Sword", player, 2)))
        ) and state.has("Bomb Bag", player, 1)
    if loc == "Sky - Northeast Island Cage Goddess Chest":
        return lambda state, player=world.player: (
            state.can_reach_region("Eldin Volcano - Near Temple Entrance", player)
            and ((state.has("Progressive Sword", player, 2)))
        ) or (
            state.can_reach_region("Bokoblin Base - Top of Volcano", player)
            and ((state.has("Progressive Sword", player, 2)))
        )
    if loc == "Sky - Lumpy Pumpkin - Goddess Chest on the Roof":
        return lambda state, player=world.player: (
            state.can_reach_region("Skyview - Skyview Spring", player)
            and ((state.has("Progressive Sword", player, 2)))
        )
    if loc == "Sky - Lumpy Pumpkin - Outside Goddess Chest":
        return lambda state, player=world.player: (
            state.can_reach_region("Faron Woods - Deep Woods after Beehive", player)
            and ((state.has("Progressive Sword", player, 2)))
        )
    if loc == "Sky - Goddess Chest on Island Closest to Faron Pillar":
        return lambda state, player=world.player: (
            state.can_reach_region("Faron Woods - Deep Woods after Beehive", player)
            and ((state.has("Progressive Sword", player, 2)))
        )
    if loc == "Sky - Goddess Chest outside Volcanic Island":
        return lambda state, player=world.player: (
            state.can_reach_region("Lanayru Desert - Sand Oasis", player)
            and ((state.has("Progressive Sword", player, 2)))
        )
    if loc == "Sky - Goddess Chest inside Volcanic Island":
        return lambda state, player=world.player: (
            state.can_reach_region("Faron Woods - In the Woods", player)
            and (
                (state.has("Progressive Sword", player, 2))
                and (
                    state.has("Clawshots", player, 1)
                    or state.can_reach_region(
                        "Faron Woods - Outside Top of Great Tree", player
                    )
                )
            )
        ) and state.has("Clawshots", player, 1)
    if loc == "Sky - Goddess Chest under Fun Fun Island":
        return lambda state, player=world.player: (
            state.can_reach_region("Lake Floria - Waterfall", player)
            and (
                (state.has("Progressive Sword", player, 2))
                and state.has("Clawshots", player, 1)
            )
        )
    if loc == "Sky - Southwest Triple Island Upper Goddess Chest":
        return lambda state, player=world.player: (
            state.can_reach_region("Eldin Volcano - Volcano Entry", player)
            and ((state.has("Progressive Sword", player, 2)))
        )
    if loc == "Sky - Southwest Triple Island Lower Goddess Chest":
        return lambda state, player=world.player: (
            state.can_reach_region("Lanayru Desert - Desert Entry", player)
            and (
                (state.has("Progressive Sword", player, 2))
                and (
                    state.has("Clawshots", player, 1)
                    or (
                        (state.has("Progressive Sword", player, 6))
                        or (
                            (state.has("Progressive Sword", player, 2))
                            and state._ss_option_upgraded_skyward_strike(player)
                        )
                    )
                )
            )
        )
    if loc == "Sky - Southwest Triple Island Cage Goddess Chest":
        return lambda state, player=world.player: (
            state.can_reach_region(
                "Lanayru Sand Sea - Skipper's Retreat - After Rock", player
            )
            and (
                (state.has("Progressive Sword", player, 2))
                and state.has("Clawshots", player, 1)
            )
        ) and state.has("Clawshots", player, 1)
    if loc == "Sky - Crystal outside Lumpy Pumpkin":
        return lambda state, player=world.player: True
    if loc == "Sky - Crystal inside Lumpy Pumpkin":
        return lambda state, player=world.player: True
    if loc == "Sky - Crystal on Beedle's Ship":
        return lambda state, player=world.player: (
            state.can_reach_region("Central Skyloft", player)
            and (
                (
                    (
                        (state.has("Progressive Slingshot", player, 1))
                        or (state.has("Progressive Beetle", player, 1))
                        or (state.has("Progressive Bow", player, 1))
                    )
                    or state.has("Clawshots", player, 1)
                )
            )
        ) and (state.has("Progressive Beetle", player, 1))
    if loc == "Thunderhead - Isle of Songs - Strike Crest with Goddess Sword":
        return lambda state, player=world.player: (
            state.has("Progressive Sword", player, 2)
        )
    if loc == "Thunderhead - Isle of Songs - Strike Crest with Longsword":
        return lambda state, player=world.player: (
            state.has("Progressive Sword", player, 3)
        )
    if loc == "Thunderhead - Isle of Songs - Strike Crest with White Sword":
        return lambda state, player=world.player: (
            state.has("Progressive Sword", player, 4)
        )
    if loc == "Thunderhead - Song from Levias":
        return lambda state, player=world.player: (
            state.can_reach_region("Sky", player)
            and (
                state.has("Spiral Charge", player, 1)
                and state.has("Scrapper", player, 1)
            )
        ) and (state.has("Progressive Sword", player, 1))
    if loc == "Thunderhead - Bug Heaven -- 10 Bugs in 3 Minutes":
        return lambda state, player=world.player: (
            state.has("Progressive Bug Net", player, 1)
        )
    if loc == "Thunderhead - East Island Chest":
        return lambda state, player=world.player: (
            state.has("Progressive Mitts", player, 1)
        )
    if loc == "Thunderhead - East Island Goddess Chest":
        return lambda state, player=world.player: (
            state.can_reach_region("Faron Woods - In the Woods", player)
            and (
                (state.has("Progressive Sword", player, 2))
                and state.can_reach_region(
                    "Faron Woods - Outside Top of Great Tree", player
                )
            )
        )
    if loc == "Thunderhead - Goddess Chest on top of Isle of Songs":
        return lambda state, player=world.player: (
            state.can_reach_region("Volcano Summit - After Second Frog", player)
            and (
                (state.has("Progressive Sword", player, 2))
                and state.has("Clawshots", player, 1)
            )
        )
    if loc == "Thunderhead - Goddess Chest outside Isle of Songs":
        return lambda state, player=world.player: (
            state.can_reach_region("Mogma Turf - Entry", player)
            and ((state.has("Progressive Sword", player, 2)))
        )
    if loc == "Thunderhead - First Goddess Chest on Mogma Mitts Island":
        return lambda state, player=world.player: (
            state.has("Progressive Mitts", player, 2)
        ) and (
            (
                state.can_reach_region("Volcano Summit - Summit", player)
                and (
                    (state.has("Progressive Sword", player, 2))
                    and (
                        (state.has("Progressive Sword", player, 6))
                        or (
                            (state.has("Progressive Sword", player, 2))
                            and state._ss_option_upgraded_skyward_strike(player)
                        )
                    )
                )
            )
            or (
                state.can_reach_region("Bokoblin Base - Summit", player)
                and ((state.has("Progressive Sword", player, 2)))
            )
        )
    if loc == "Thunderhead - Second Goddess Chest on Mogma Mitts Island":
        return lambda state, player=world.player: (
            state.can_reach_region("Lanayru Gorge - Gorge", player)
            and (
                (state.has("Progressive Sword", player, 2))
                and (
                    (
                        (
                            (state.has("Progressive Slingshot", player, 1))
                            or (state.has("Progressive Beetle", player, 1))
                            or (state.has("Progressive Bow", player, 1))
                        )
                        or state.has("Clawshots", player, 1)
                    )
                    or (state.has("Progressive Sword", player, 1))
                    or state.has("Whip", player, 1)
                    or state.has("Bomb Bag", player, 1)
                )
            )
        ) and (state.has("Progressive Mitts", player, 2))
    if loc == "Thunderhead - Bug Heaven Goddess Chest":
        return lambda state, player=world.player: (
            state.can_reach_region("Volcano Summit - Waterfall", player)
            and ((state.has("Progressive Sword", player, 2)))
        )
    if loc == "Sealed Grounds - Chest inside Sealed Temple":
        return lambda state, player=world.player: True
    if loc == "Sealed Grounds - Song from Impa":
        return lambda state, player=world.player: state.has("Goddess's Harp", player, 1)
    if loc == "Sealed Grounds - Zelda's Blessing":
        return lambda state, player=world.player: (
            state.can_reach_region("Sealed Grounds - Sealed Temple", player)
            and (
                (
                    state.can_reach_region("Sealed Grounds - Sealed Temple", player)
                    and (state.has("Goddess's Harp", player, 1))
                )
                and state._ss_sword_requirement_met(player)
                and (
                    state._ss_can_beat_required_dungeons(player)
                    or state._ss_option_unrequired_dungeons(player)
                )
            )
        )
    if loc == "Sealed Grounds - Gorko's Goddess Wall Reward":
        return (
            lambda state, player=world.player: state.has("Goddess's Harp", player, 1)
            and state.has("Ballad of the Goddess", player, 1)
            and (state.has("Progressive Sword", player, 2))
        )
    if loc == "Hylia's Realm - Defeat Demise":
        return lambda state, player=world.player: (
            state.has("Progressive Sword", player, 1)
        )
    if loc == "Faron Woods - Item behind Lower Bombable Rock":
        return lambda state, player=world.player: state.has("Bomb Bag", player, 1)
    if loc == "Faron Woods - Item on Tree":
        return lambda state, player=world.player: True
    if loc == "Faron Woods - Kikwi Elder's Reward":
        return (
            lambda state, player=world.player: (
                (
                    (state.has("Progressive Sword", player, 1))
                    or (state.has("Progressive Bow", player, 1))
                    or state.has("Bomb Bag", player, 1)
                )
            )
            and (
                (state.has("Progressive Sword", player, 1))
                or state.has("Bomb Bag", player, 1)
            )
            and (
                (state.has("Progressive Sword", player, 1))
                or (state.has("Progressive Beetle", player, 1))
            )
        )
    if loc == "Faron Woods - Rupee on Hollow Tree Root":
        return lambda state, player=world.player: True
    if loc == "Faron Woods - Rupee on Hollow Tree Branch":
        return lambda state, player=world.player: (
            state.has("Progressive Beetle", player, 1)
        )
    if loc == "Faron Woods - Rupee on Platform near Floria Door":
        return lambda state, player=world.player: (
            state.has("Progressive Beetle", player, 1)
        )
    if loc == "Faron Woods - Chest behind Upper Bombable Rock":
        return lambda state, player=world.player: state.has("Bomb Bag", player, 1)
    if loc == "Faron Woods - Deep Woods Chest":
        return lambda state, player=world.player: True
    if loc == "Faron Woods - Chest inside Great Tree":
        return lambda state, player=world.player: True
    if loc == "Faron Woods - Rupee on Great Tree North Branch":
        return lambda state, player=world.player: (
            state.has("Progressive Beetle", player, 1)
        )
    if loc == "Faron Woods - Rupee on Great Tree West Branch":
        return lambda state, player=world.player: (
            state.has("Progressive Beetle", player, 1)
        )
    if loc == "Lake Floria - Rupee under Central Boulder":
        return lambda state, player=world.player: state.has(
            "Water Dragon's Scale", player, 1
        )
    if loc == "Lake Floria - Rupee behind Southwest Boulder":
        return lambda state, player=world.player: state.has(
            "Water Dragon's Scale", player, 1
        )
    if loc == "Lake Floria - Left Rupee behind Northwest Boulder":
        return lambda state, player=world.player: state.has(
            "Water Dragon's Scale", player, 1
        )
    if loc == "Lake Floria - Right Rupee behind Northwest Boulder":
        return lambda state, player=world.player: state.has(
            "Water Dragon's Scale", player, 1
        )
    if loc == "Lake Floria - Lake Floria Chest":
        return lambda state, player=world.player: True
    if loc == "Lake Floria - Dragon Lair South Chest":
        return lambda state, player=world.player: state.has(
            "Water Dragon's Scale", player, 1
        )
    if loc == "Lake Floria - Dragon Lair East Chest":
        return lambda state, player=world.player: True
    if loc == "Lake Floria - Rupee on High Ledge outside Ancient Cistern Entrance":
        return lambda state, player=world.player: (
            state.has("Progressive Beetle", player, 1)
        )
    if loc == "Flooded Faron Woods - Yellow Tadtone under Lilypad":
        return lambda state, player=world.player: state.has(
            "Water Dragon's Scale", player, 1
        )
    if loc == "Flooded Faron Woods - 8 Light Blue Tadtones near Viewing Platform":
        return lambda state, player=world.player: state.has(
            "Water Dragon's Scale", player, 1
        )
    if loc == "Flooded Faron Woods - 4 Purple Tadtones under Viewing Platform":
        return lambda state, player=world.player: state.has(
            "Water Dragon's Scale", player, 1
        )
    if loc == "Flooded Faron Woods - Red Moving Tadtone near Viewing Platform":
        return lambda state, player=world.player: state.has(
            "Water Dragon's Scale", player, 1
        )
    if loc == "Flooded Faron Woods - Light Blue Tadtone under Great Tree Root":
        return lambda state, player=world.player: state.has(
            "Water Dragon's Scale", player, 1
        )
    if loc == "Flooded Faron Woods - 8 Yellow Tadtones near Kikwi Elder":
        return lambda state, player=world.player: state.has(
            "Water Dragon's Scale", player, 1
        )
    if loc == "Flooded Faron Woods - 4 Light Blue Moving Tadtones under Kikwi Elder":
        return lambda state, player=world.player: state.has(
            "Water Dragon's Scale", player, 1
        )
    if loc == "Flooded Faron Woods - 4 Red Moving Tadtones North West of Great Tree":
        return lambda state, player=world.player: state.has(
            "Water Dragon's Scale", player, 1
        )
    if loc == "Flooded Faron Woods - Green Tadtone behind Upper Bombable Rock":
        return lambda state, player=world.player: state.has(
            "Water Dragon's Scale", player, 1
        )
    if loc == "Flooded Faron Woods - 2 Dark Blue Tadtones in Grass West of Great Tree":
        return lambda state, player=world.player: state.has(
            "Water Dragon's Scale", player, 1
        )
    if loc == "Flooded Faron Woods - 8 Green Tadtones in West Tunnel":
        return lambda state, player=world.player: state.has(
            "Water Dragon's Scale", player, 1
        )
    if loc == "Flooded Faron Woods - 2 Red Tadtones in Grass near Lower Bombable Rock":
        return lambda state, player=world.player: state.has(
            "Water Dragon's Scale", player, 1
        )
    if loc == "Flooded Faron Woods - 16 Dark Blue Tadtones in the South West":
        return lambda state, player=world.player: state.has(
            "Water Dragon's Scale", player, 1
        )
    if loc == "Flooded Faron Woods - 4 Purple Moving Tadtones near Floria Gate":
        return lambda state, player=world.player: state.has(
            "Water Dragon's Scale", player, 1
        )
    if loc == "Flooded Faron Woods - Dark Blue Moving Tadtone inside Small Hollow Tree":
        return lambda state, player=world.player: state.has(
            "Water Dragon's Scale", player, 1
        )
    if loc == "Flooded Faron Woods - 4 Yellow Tadtones under Small Hollow Tree":
        return lambda state, player=world.player: state.has(
            "Water Dragon's Scale", player, 1
        )
    if (
        loc
        == "Flooded Faron Woods - 8 Purple Tadtones in Clearing after Small Hollow Tree"
    ):
        return lambda state, player=world.player: state.has(
            "Water Dragon's Scale", player, 1
        )
    if loc == "Flooded Faron Woods - Water Dragon's Reward":
        return lambda state, player=world.player: state.has(
            "Group of Tadtones", player, 17
        )
    if loc == "Faron Silent Realm - Trial Reward":
        return lambda state, player=world.player: True
    if loc == "Faron Silent Realm - Relic 1":
        return lambda state, player=world.player: True
    if loc == "Faron Silent Realm - Relic 2":
        return lambda state, player=world.player: True
    if loc == "Faron Silent Realm - Relic 3":
        return lambda state, player=world.player: True
    if loc == "Faron Silent Realm - Relic 4":
        return lambda state, player=world.player: True
    if loc == "Faron Silent Realm - Relic 5":
        return lambda state, player=world.player: True
    if loc == "Faron Silent Realm - Relic 6":
        return lambda state, player=world.player: True
    if loc == "Faron Silent Realm - Relic 7":
        return lambda state, player=world.player: True
    if loc == "Faron Silent Realm - Relic 8":
        return lambda state, player=world.player: True
    if loc == "Faron Silent Realm - Relic 9":
        return lambda state, player=world.player: True
    if loc == "Faron Silent Realm - Relic 10":
        return lambda state, player=world.player: True
    if loc == "Eldin Volcano - Rupee on Ledge before First Room":
        return lambda state, player=world.player: True
    if loc == "Eldin Volcano - Chest behind Bombable Wall in First Room":
        return lambda state, player=world.player: True
    if loc == "Eldin Volcano - Rupee behind Bombable Wall in First Room":
        return lambda state, player=world.player: True
    if loc == "Eldin Volcano - Rupee in Crawlspace in First Room":
        return lambda state, player=world.player: True
    if loc == "Eldin Volcano - Chest after Crawlspace":
        return lambda state, player=world.player: True
    if loc == "Eldin Volcano - Southeast Rupee above Mogma Turf Entrance":
        return lambda state, player=world.player: (
            state.has("Progressive Beetle", player, 1)
        )
    if loc == "Eldin Volcano - North Rupee above Mogma Turf Entrance":
        return lambda state, player=world.player: (
            state.has("Progressive Beetle", player, 1)
        )
    if loc == "Eldin Volcano - Chest behind Bombable Wall near Cliff":
        return lambda state, player=world.player: True
    if loc == "Eldin Volcano - Item on Cliff":
        return lambda state, player=world.player: True
    if loc == "Eldin Volcano - Chest behind Bombable Wall near Volcano Ascent":
        return lambda state, player=world.player: True
    if loc == "Eldin Volcano - Left Rupee behind Bombable Wall on First Slope":
        return lambda state, player=world.player: True
    if loc == "Eldin Volcano - Right Rupee behind Bombable Wall on First Slope":
        return lambda state, player=world.player: True
    if loc == "Eldin Volcano - Digging Spot in front of Earth Temple":
        return lambda state, player=world.player: (
            state.has("Progressive Mitts", player, 1)
        )
    if loc == "Eldin Volcano - Digging Spot below Tower":
        return lambda state, player=world.player: (
            state.has("Progressive Mitts", player, 1)
        )
    if loc == "Eldin Volcano - Digging Spot behind Boulder on Sandy Slope":
        return lambda state, player=world.player: (
            state.has("Progressive Mitts", player, 1)
        )
    if loc == "Eldin Volcano - Digging Spot after Vents":
        return lambda state, player=world.player: (
            state.has("Progressive Mitts", player, 1)
        )
    if loc == "Eldin Volcano - Digging Spot after Draining Lava":
        return lambda state, player=world.player: (
            state.has("Progressive Mitts", player, 1)
        )
    if loc == "Mogma Turf - Free Fall Chest":
        return lambda state, player=world.player: True
    if loc == "Mogma Turf - Chest behind Bombable Wall at Entrance":
        return lambda state, player=world.player: True
    if loc == "Mogma Turf - Defeat Bokoblins":
        return lambda state, player=world.player: (
            (
                (state.has("Progressive Sword", player, 1))
                or (state.has("Progressive Bow", player, 1))
                or state.has("Bomb Bag", player, 1)
            )
        )
    if loc == "Mogma Turf - Sand Slide Chest":
        return lambda state, player=world.player: True
    if loc == "Mogma Turf - Chest behind Bombable Wall in Fire Maze":
        return lambda state, player=world.player: True
    if loc == "Volcano Summit - Chest behind Bombable Wall in Waterfall Area":
        return lambda state, player=world.player: state.has("Clawshots", player, 1)
    if loc == "Volcano Summit - Item behind Digging":
        return lambda state, player=world.player: (
            state.has("Progressive Mitts", player, 2)
        )
    if loc == "Bokoblin Base - Plats' Gift":
        return lambda state, player=world.player: True
    if loc == "Bokoblin Base - Chest near Bone Bridge":
        return lambda state, player=world.player: (
            state.has("Progressive Mitts", player, 2)
        )
    if loc == "Bokoblin Base - Chest on Cliff":
        return lambda state, player=world.player: (
            state.has("Progressive Mitts", player, 2)
        ) and state.has("Gust Bellows", player, 1)
    if loc == "Bokoblin Base - Chest near Drawbridge":
        return lambda state, player=world.player: (
            state.has("Progressive Mitts", player, 2)
        ) and (
            state.has("Clawshots", player, 1)
            or (
                state.can_reach_region("Bokoblin Base - Volcano", player)
                and (
                    state.has("Bomb Bag", player, 1)
                    or (state.has("Progressive Slingshot", player, 1))
                    or (state.has("Progressive Bow", player, 1))
                )
            )
        )
    if loc == "Bokoblin Base - Chest East of Earth Temple Entrance":
        return lambda state, player=world.player: True
    if loc == "Bokoblin Base - Chest West of Earth Temple Entrance":
        return (
            lambda state, player=world.player: (
                state.has("Progressive Mitts", player, 2)
            )
            and (
                state.can_reach_region("Bokoblin Base - Volcano", player)
                and (
                    state.has("Bomb Bag", player, 1)
                    or (state.has("Progressive Slingshot", player, 1))
                    or (state.has("Progressive Bow", player, 1))
                )
            )
            and (
                (state.has("Progressive Slingshot", player, 1))
                or (state.has("Progressive Bow", player, 1))
                or state.has("Bomb Bag", player, 1)
                or (state.has("Progressive Sword", player, 2))
            )
        )
    if loc == "Bokoblin Base - First Chest in Volcano Summit":
        return lambda state, player=world.player: True
    if loc == "Bokoblin Base - Raised Chest in Volcano Summit":
        return lambda state, player=world.player: True
    if loc == "Bokoblin Base - Chest in Volcano Summit Alcove":
        return lambda state, player=world.player: (
            state.has("Progressive Sword", player, 1)
        )
    if loc == "Bokoblin Base - Fire Dragon's Reward":
        return lambda state, player=world.player: (
            state.can_reach_region("Bokoblin Base - Dragon's Lair", player)
            and (
                (state.has("Progressive Beetle", player, 1))
                or (state.has("Progressive Bow", player, 1))
            )
        )
    if loc == "Eldin Silent Realm - Trial Reward":
        return lambda state, player=world.player: True
    if loc == "Eldin Silent Realm - Relic 1":
        return lambda state, player=world.player: True
    if loc == "Eldin Silent Realm - Relic 2":
        return lambda state, player=world.player: True
    if loc == "Eldin Silent Realm - Relic 3":
        return lambda state, player=world.player: True
    if loc == "Eldin Silent Realm - Relic 4":
        return lambda state, player=world.player: True
    if loc == "Eldin Silent Realm - Relic 5":
        return lambda state, player=world.player: True
    if loc == "Eldin Silent Realm - Relic 6":
        return lambda state, player=world.player: True
    if loc == "Eldin Silent Realm - Relic 7":
        return lambda state, player=world.player: True
    if loc == "Eldin Silent Realm - Relic 8":
        return lambda state, player=world.player: True
    if loc == "Eldin Silent Realm - Relic 9":
        return lambda state, player=world.player: True
    if loc == "Eldin Silent Realm - Relic 10":
        return lambda state, player=world.player: True
    if loc == "Lanayru Mine - Chest behind First Landing":
        return lambda state, player=world.player: state.has("Clawshots", player, 1)
    if loc == "Lanayru Mine - Chest near First Timeshift Stone":
        return lambda state, player=world.player: (
            (
                (
                    (state.has("Progressive Slingshot", player, 1))
                    or (state.has("Progressive Beetle", player, 1))
                    or (state.has("Progressive Bow", player, 1))
                )
                or state.has("Clawshots", player, 1)
            )
            or (state.has("Progressive Sword", player, 1))
            or state.has("Whip", player, 1)
            or state.has("Bomb Bag", player, 1)
        )
    if loc == "Lanayru Mine - Chest behind Statue":
        return lambda state, player=world.player: (
            (
                (
                    (state.has("Progressive Slingshot", player, 1))
                    or (state.has("Progressive Beetle", player, 1))
                    or (state.has("Progressive Bow", player, 1))
                )
                or state.has("Clawshots", player, 1)
            )
            or (state.has("Progressive Sword", player, 1))
            or state.has("Whip", player, 1)
            or state.has("Bomb Bag", player, 1)
        ) and (
            state.has("Bomb Bag", player, 1)
            or (state.has("Progressive Beetle", player, 2))
        )
    if loc == "Lanayru Mine - Chest at the End of Mine":
        return lambda state, player=world.player: True
    if loc == "Lanayru Desert - Chest near Party Wheel":
        return lambda state, player=world.player: state.has("Bomb Bag", player, 1)
    if loc == "Lanayru Desert - Chest near Caged Robot":
        return lambda state, player=world.player: True
    if loc == "Lanayru Desert - Rescue Caged Robot":
        return lambda state, player=world.player: state.has("Bomb Bag", player, 1) or (
            state.has("Progressive Beetle", player, 2)
        )
    if loc == "Lanayru Desert - Chest near Sand Oasis":
        return lambda state, player=world.player: state.has("Clawshots", player, 1)
    if loc == "Lanayru Desert - Chest on Platform near Lightning Node":
        return lambda state, player=world.player: state.has("Clawshots", player, 1)
    if loc == "Lanayru Desert - Chest on top of Lanayru Mining Facility":
        return lambda state, player=world.player: (
            state.can_reach_region("Lanayru Desert - North Desert", player)
            and (
                state._ss_option_lmf_open(player)
                or (
                    state._ss_option_lmf_main_node(player)
                    and (state.has("Progressive Sword", player, 1))
                )
                or (
                    state.can_reach_region("Lanayru Desert - North Desert", player)
                    and (
                        (
                            state.can_reach_region("Lanayru Desert - Fire Node", player)
                            and (
                                state.has("Bomb Bag", player, 1)
                                and (state.has("Progressive Beetle", player, 2))
                                and (
                                    (
                                        (state.has("Progressive Sword", player, 1))
                                        or (state.has("Progressive Bow", player, 1))
                                        or state.has("Bomb Bag", player, 1)
                                    )
                                )
                                and (state.has("Progressive Sword", player, 1))
                            )
                        )
                        and (
                            state.can_reach_region(
                                "Lanayru Desert - Lightning Node", player
                            )
                            and (
                                state.has("Bomb Bag", player, 1)
                                and (state.has("Progressive Sword", player, 1))
                            )
                        )
                        and (
                            state.can_reach_region(
                                "Lanayru Desert - North Desert", player
                            )
                            and (
                                state.has("Bomb Bag", player, 1)
                                and (state.has("Progressive Sword", player, 1))
                            )
                        )
                    )
                )
            )
        )
    if loc == "Lanayru Desert - Chest on Platform near Fire Node":
        return lambda state, player=world.player: state.has("Clawshots", player, 1)
    if loc == "Lanayru Desert - Secret Passageway Chest":
        return lambda state, player=world.player: state.has("Bomb Bag", player, 1) or (
            (
                state.has("Progressive Beetle", player, 4)
                and state._ss_option_gondo_upgrades(player)
            )
            or (
                (
                    (
                        (state.has("Progressive Beetle", player, 2))
                        and (
                            (
                                state.can_reach_region(
                                    "Faron Woods - Deep Woods Entry", player
                                )
                                and (True)
                            )
                        )
                        and (
                            (
                                state.can_reach_region("Lanayru Mine - Landing", player)
                                and (
                                    (
                                        (
                                            (
                                                (
                                                    state.has(
                                                        "Progressive Slingshot",
                                                        player,
                                                        1,
                                                    )
                                                )
                                                or (
                                                    state.has(
                                                        "Progressive Beetle", player, 1
                                                    )
                                                )
                                                or (
                                                    state.has(
                                                        "Progressive Bow", player, 1
                                                    )
                                                )
                                            )
                                            or state.has("Clawshots", player, 1)
                                        )
                                        or (state.has("Progressive Sword", player, 1))
                                        or state.has("Whip", player, 1)
                                        or state.has("Bomb Bag", player, 1)
                                    )
                                )
                            )
                            or (
                                state.can_reach_region(
                                    "Lanayru Desert - Desert Entry", player
                                )
                                and (state.has("Bomb Bag", player, 1))
                            )
                            or (
                                state.can_reach_region(
                                    "Lanayru Desert - North Desert", player
                                )
                                and (
                                    state.has("Bomb Bag", player, 1)
                                    or (state.has("Progressive Beetle", player, 2))
                                )
                            )
                            or (
                                state.can_reach_region("Lanayru Gorge - Gorge", player)
                                and (
                                    (
                                        (
                                            (
                                                (
                                                    state.has(
                                                        "Progressive Slingshot",
                                                        player,
                                                        1,
                                                    )
                                                )
                                                or (
                                                    state.has(
                                                        "Progressive Beetle", player, 1
                                                    )
                                                )
                                                or (
                                                    state.has(
                                                        "Progressive Bow", player, 1
                                                    )
                                                )
                                            )
                                            or state.has("Clawshots", player, 1)
                                        )
                                        or (state.has("Progressive Sword", player, 1))
                                        or state.has("Whip", player, 1)
                                        or state.has("Bomb Bag", player, 1)
                                    )
                                    and state.has("Gust Bellows", player, 1)
                                )
                            )
                            or (
                                state.can_reach_region(
                                    "Lanayru Sand Sea - Pirate Stronghold", player
                                )
                                and (True)
                            )
                        )
                        and (
                            state.can_reach_region("Sky", player)
                            and ((state.has("Progressive Sword", player, 1)))
                        )
                    )
                    and (
                        (
                            state.can_reach_region("Faron Woods - In the Woods", player)
                            and (True)
                        )
                    )
                    and (
                        (
                            state.can_reach_region("Lanayru Mine - Landing", player)
                            and (
                                (
                                    (
                                        (
                                            (
                                                state.has(
                                                    "Progressive Slingshot", player, 1
                                                )
                                            )
                                            or (
                                                state.has(
                                                    "Progressive Beetle", player, 1
                                                )
                                            )
                                            or (state.has("Progressive Bow", player, 1))
                                        )
                                        or state.has("Clawshots", player, 1)
                                    )
                                    or (state.has("Progressive Sword", player, 1))
                                    or state.has("Whip", player, 1)
                                    or state.has("Bomb Bag", player, 1)
                                )
                            )
                        )
                        or (
                            state.can_reach_region(
                                "Lanayru Desert - Desert Entry", player
                            )
                            and (state.has("Bomb Bag", player, 1))
                        )
                        or (
                            state.can_reach_region(
                                "Lanayru Desert - North Desert", player
                            )
                            and (
                                state.has("Bomb Bag", player, 1)
                                or (state.has("Progressive Beetle", player, 2))
                            )
                        )
                        or (
                            state.can_reach_region("Lanayru Gorge - Gorge", player)
                            and (
                                (
                                    (
                                        (
                                            (
                                                state.has(
                                                    "Progressive Slingshot", player, 1
                                                )
                                            )
                                            or (
                                                state.has(
                                                    "Progressive Beetle", player, 1
                                                )
                                            )
                                            or (state.has("Progressive Bow", player, 1))
                                        )
                                        or state.has("Clawshots", player, 1)
                                    )
                                    or (state.has("Progressive Sword", player, 1))
                                    or state.has("Whip", player, 1)
                                    or state.has("Bomb Bag", player, 1)
                                )
                                and state.has("Gust Bellows", player, 1)
                            )
                        )
                        or (
                            state.can_reach_region(
                                "Lanayru Sand Sea - Pirate Stronghold", player
                            )
                            and (True)
                        )
                    )
                    and (
                        state.can_reach_region("Sky", player)
                        and ((state.has("Progressive Sword", player, 1)))
                    )
                )
                and not state._ss_option_gondo_upgrades(player)
            )
        )
    if loc == "Lanayru Desert - Fire Node - Shortcut Chest":
        return lambda state, player=world.player: (
            (
                (state.has("Progressive Sword", player, 1))
                or (state.has("Progressive Bow", player, 1))
                or state.has("Bomb Bag", player, 1)
            )
        )
    if loc == "Lanayru Desert - Fire Node - First Small Chest":
        return lambda state, player=world.player: state.has("Bomb Bag", player, 1)
    if loc == "Lanayru Desert - Fire Node - Second Small Chest":
        return lambda state, player=world.player: state.has("Bomb Bag", player, 1)
    if loc == "Lanayru Desert - Fire Node - Left Ending Chest":
        return (
            lambda state, player=world.player: state.has("Bomb Bag", player, 1)
            and (state.has("Progressive Beetle", player, 2))
            and (
                (
                    (state.has("Progressive Sword", player, 1))
                    or (state.has("Progressive Bow", player, 1))
                    or state.has("Bomb Bag", player, 1)
                )
            )
        )
    if loc == "Lanayru Desert - Fire Node - Right Ending Chest":
        return (
            lambda state, player=world.player: state.has("Bomb Bag", player, 1)
            and (state.has("Progressive Beetle", player, 2))
            and (
                (
                    (state.has("Progressive Sword", player, 1))
                    or (state.has("Progressive Bow", player, 1))
                    or state.has("Bomb Bag", player, 1)
                )
            )
        )
    if loc == "Lanayru Desert - Lightning Node - First Chest":
        return lambda state, player=world.player: state.has("Bomb Bag", player, 1)
    if loc == "Lanayru Desert - Lightning Node - Second Chest":
        return lambda state, player=world.player: state.has("Bomb Bag", player, 1)
    if loc == "Lanayru Desert - Lightning Node - Raised Chest near Generator":
        return lambda state, player=world.player: state.has("Bomb Bag", player, 1) and (
            (state.has("Progressive Beetle", player, 1))
            or (state.has("Progressive Bow", player, 1))
        )
    if loc == "Lanayru Caves - Chest":
        return lambda state, player=world.player: True
    if loc == "Lanayru Caves - Golo's Gift":
        return lambda state, player=world.player: True
    if loc == "Lanayru Gorge - Thunder Dragon's Reward":
        return lambda state, player=world.player: (
            (
                (
                    (state.has("Progressive Slingshot", player, 1))
                    or (state.has("Progressive Beetle", player, 1))
                    or (state.has("Progressive Bow", player, 1))
                )
                or state.has("Clawshots", player, 1)
            )
            or (state.has("Progressive Sword", player, 1))
            or state.has("Whip", player, 1)
            or state.has("Bomb Bag", player, 1)
        ) and state.has("Life Tree Fruit", player, 1)
    if loc == "Lanayru Gorge - Item on Pillar":
        return lambda state, player=world.player: (
            state.has("Progressive Beetle", player, 1)
        )
    if loc == "Lanayru Gorge - Digging Spot":
        return (
            lambda state, player=world.player: (
                (
                    (
                        (state.has("Progressive Slingshot", player, 1))
                        or (state.has("Progressive Beetle", player, 1))
                        or (state.has("Progressive Bow", player, 1))
                    )
                    or state.has("Clawshots", player, 1)
                )
                or (state.has("Progressive Sword", player, 1))
                or state.has("Whip", player, 1)
                or state.has("Bomb Bag", player, 1)
            )
            and state.has("Gust Bellows", player, 1)
            and (state.has("Progressive Mitts", player, 1))
        )
    if loc == "Lanayru Sand Sea - Ancient Harbour - Rupee on First Pillar":
        return lambda state, player=world.player: (
            state.has("Progressive Beetle", player, 1)
        )
    if loc == "Lanayru Sand Sea - Ancient Harbour - Left Rupee on Entrance Crown":
        return lambda state, player=world.player: (
            (
                state.has("Progressive Beetle", player, 3)
                and state._ss_option_gondo_upgrades(player)
            )
            or (
                (
                    (state.has("Progressive Beetle", player, 2))
                    and (
                        (
                            state.can_reach_region(
                                "Faron Woods - Deep Woods Entry", player
                            )
                            and (True)
                        )
                    )
                    and (
                        (
                            state.can_reach_region("Lanayru Mine - Landing", player)
                            and (
                                (
                                    (
                                        (
                                            (
                                                state.has(
                                                    "Progressive Slingshot", player, 1
                                                )
                                            )
                                            or (
                                                state.has(
                                                    "Progressive Beetle", player, 1
                                                )
                                            )
                                            or (state.has("Progressive Bow", player, 1))
                                        )
                                        or state.has("Clawshots", player, 1)
                                    )
                                    or (state.has("Progressive Sword", player, 1))
                                    or state.has("Whip", player, 1)
                                    or state.has("Bomb Bag", player, 1)
                                )
                            )
                        )
                        or (
                            state.can_reach_region(
                                "Lanayru Desert - Desert Entry", player
                            )
                            and (state.has("Bomb Bag", player, 1))
                        )
                        or (
                            state.can_reach_region(
                                "Lanayru Desert - North Desert", player
                            )
                            and (
                                state.has("Bomb Bag", player, 1)
                                or (state.has("Progressive Beetle", player, 2))
                            )
                        )
                        or (
                            state.can_reach_region("Lanayru Gorge - Gorge", player)
                            and (
                                (
                                    (
                                        (
                                            (
                                                state.has(
                                                    "Progressive Slingshot", player, 1
                                                )
                                            )
                                            or (
                                                state.has(
                                                    "Progressive Beetle", player, 1
                                                )
                                            )
                                            or (state.has("Progressive Bow", player, 1))
                                        )
                                        or state.has("Clawshots", player, 1)
                                    )
                                    or (state.has("Progressive Sword", player, 1))
                                    or state.has("Whip", player, 1)
                                    or state.has("Bomb Bag", player, 1)
                                )
                                and state.has("Gust Bellows", player, 1)
                            )
                        )
                        or (
                            state.can_reach_region(
                                "Lanayru Sand Sea - Pirate Stronghold", player
                            )
                            and (True)
                        )
                    )
                    and (
                        state.can_reach_region("Sky", player)
                        and ((state.has("Progressive Sword", player, 1)))
                    )
                )
                and not state._ss_option_gondo_upgrades(player)
            )
        )
    if loc == "Lanayru Sand Sea - Ancient Harbour - Right Rupee on Entrance Crown":
        return lambda state, player=world.player: (
            (
                state.has("Progressive Beetle", player, 3)
                and state._ss_option_gondo_upgrades(player)
            )
            or (
                (
                    (state.has("Progressive Beetle", player, 2))
                    and (
                        (
                            state.can_reach_region(
                                "Faron Woods - Deep Woods Entry", player
                            )
                            and (True)
                        )
                    )
                    and (
                        (
                            state.can_reach_region("Lanayru Mine - Landing", player)
                            and (
                                (
                                    (
                                        (
                                            (
                                                state.has(
                                                    "Progressive Slingshot", player, 1
                                                )
                                            )
                                            or (
                                                state.has(
                                                    "Progressive Beetle", player, 1
                                                )
                                            )
                                            or (state.has("Progressive Bow", player, 1))
                                        )
                                        or state.has("Clawshots", player, 1)
                                    )
                                    or (state.has("Progressive Sword", player, 1))
                                    or state.has("Whip", player, 1)
                                    or state.has("Bomb Bag", player, 1)
                                )
                            )
                        )
                        or (
                            state.can_reach_region(
                                "Lanayru Desert - Desert Entry", player
                            )
                            and (state.has("Bomb Bag", player, 1))
                        )
                        or (
                            state.can_reach_region(
                                "Lanayru Desert - North Desert", player
                            )
                            and (
                                state.has("Bomb Bag", player, 1)
                                or (state.has("Progressive Beetle", player, 2))
                            )
                        )
                        or (
                            state.can_reach_region("Lanayru Gorge - Gorge", player)
                            and (
                                (
                                    (
                                        (
                                            (
                                                state.has(
                                                    "Progressive Slingshot", player, 1
                                                )
                                            )
                                            or (
                                                state.has(
                                                    "Progressive Beetle", player, 1
                                                )
                                            )
                                            or (state.has("Progressive Bow", player, 1))
                                        )
                                        or state.has("Clawshots", player, 1)
                                    )
                                    or (state.has("Progressive Sword", player, 1))
                                    or state.has("Whip", player, 1)
                                    or state.has("Bomb Bag", player, 1)
                                )
                                and state.has("Gust Bellows", player, 1)
                            )
                        )
                        or (
                            state.can_reach_region(
                                "Lanayru Sand Sea - Pirate Stronghold", player
                            )
                            and (True)
                        )
                    )
                    and (
                        state.can_reach_region("Sky", player)
                        and ((state.has("Progressive Sword", player, 1)))
                    )
                )
                and not state._ss_option_gondo_upgrades(player)
            )
        )
    if loc == "Lanayru Sand Sea - Skipper's Retreat - Chest after Moblin":
        return lambda state, player=world.player: True
    if loc == "Lanayru Sand Sea - Skipper's Retreat - Chest on top of Cacti Pillar":
        return lambda state, player=world.player: state.has("Clawshots", player, 1)
    if loc == "Lanayru Sand Sea - Skipper's Retreat - Chest in Shack":
        return lambda state, player=world.player: state.has("Gust Bellows", player, 1)
    if loc == "Lanayru Sand Sea - Skipper's Retreat - Skydive Chest":
        return lambda state, player=world.player: True
    if loc == "Lanayru Sand Sea - Rickety Coaster -- Heart Stopping Track in 1'05":
        return lambda state, player=world.player: state.has(
            "Gust Bellows", player, 1
        ) and (
            state.has("Gust Bellows", player, 1)
            and (state.has("Progressive Sword", player, 1))
        )
    if loc == "Lanayru Sand Sea - Pirate Stronghold - Rupee on East Sea Pillar":
        return lambda state, player=world.player: (
            (
                state.has("Progressive Beetle", player, 3)
                and state._ss_option_gondo_upgrades(player)
            )
            or (
                (
                    (state.has("Progressive Beetle", player, 2))
                    and (
                        (
                            state.can_reach_region(
                                "Faron Woods - Deep Woods Entry", player
                            )
                            and (True)
                        )
                    )
                    and (
                        (
                            state.can_reach_region("Lanayru Mine - Landing", player)
                            and (
                                (
                                    (
                                        (
                                            (
                                                state.has(
                                                    "Progressive Slingshot", player, 1
                                                )
                                            )
                                            or (
                                                state.has(
                                                    "Progressive Beetle", player, 1
                                                )
                                            )
                                            or (state.has("Progressive Bow", player, 1))
                                        )
                                        or state.has("Clawshots", player, 1)
                                    )
                                    or (state.has("Progressive Sword", player, 1))
                                    or state.has("Whip", player, 1)
                                    or state.has("Bomb Bag", player, 1)
                                )
                            )
                        )
                        or (
                            state.can_reach_region(
                                "Lanayru Desert - Desert Entry", player
                            )
                            and (state.has("Bomb Bag", player, 1))
                        )
                        or (
                            state.can_reach_region(
                                "Lanayru Desert - North Desert", player
                            )
                            and (
                                state.has("Bomb Bag", player, 1)
                                or (state.has("Progressive Beetle", player, 2))
                            )
                        )
                        or (
                            state.can_reach_region("Lanayru Gorge - Gorge", player)
                            and (
                                (
                                    (
                                        (
                                            (
                                                state.has(
                                                    "Progressive Slingshot", player, 1
                                                )
                                            )
                                            or (
                                                state.has(
                                                    "Progressive Beetle", player, 1
                                                )
                                            )
                                            or (state.has("Progressive Bow", player, 1))
                                        )
                                        or state.has("Clawshots", player, 1)
                                    )
                                    or (state.has("Progressive Sword", player, 1))
                                    or state.has("Whip", player, 1)
                                    or state.has("Bomb Bag", player, 1)
                                )
                                and state.has("Gust Bellows", player, 1)
                            )
                        )
                        or (
                            state.can_reach_region(
                                "Lanayru Sand Sea - Pirate Stronghold", player
                            )
                            and (True)
                        )
                    )
                    and (
                        state.can_reach_region("Sky", player)
                        and ((state.has("Progressive Sword", player, 1)))
                    )
                )
                and not state._ss_option_gondo_upgrades(player)
            )
        )
    if loc == "Lanayru Sand Sea - Pirate Stronghold - Rupee on West Sea Pillar":
        return lambda state, player=world.player: (
            (
                state.has("Progressive Beetle", player, 3)
                and state._ss_option_gondo_upgrades(player)
            )
            or (
                (
                    (state.has("Progressive Beetle", player, 2))
                    and (
                        (
                            state.can_reach_region(
                                "Faron Woods - Deep Woods Entry", player
                            )
                            and (True)
                        )
                    )
                    and (
                        (
                            state.can_reach_region("Lanayru Mine - Landing", player)
                            and (
                                (
                                    (
                                        (
                                            (
                                                state.has(
                                                    "Progressive Slingshot", player, 1
                                                )
                                            )
                                            or (
                                                state.has(
                                                    "Progressive Beetle", player, 1
                                                )
                                            )
                                            or (state.has("Progressive Bow", player, 1))
                                        )
                                        or state.has("Clawshots", player, 1)
                                    )
                                    or (state.has("Progressive Sword", player, 1))
                                    or state.has("Whip", player, 1)
                                    or state.has("Bomb Bag", player, 1)
                                )
                            )
                        )
                        or (
                            state.can_reach_region(
                                "Lanayru Desert - Desert Entry", player
                            )
                            and (state.has("Bomb Bag", player, 1))
                        )
                        or (
                            state.can_reach_region(
                                "Lanayru Desert - North Desert", player
                            )
                            and (
                                state.has("Bomb Bag", player, 1)
                                or (state.has("Progressive Beetle", player, 2))
                            )
                        )
                        or (
                            state.can_reach_region("Lanayru Gorge - Gorge", player)
                            and (
                                (
                                    (
                                        (
                                            (
                                                state.has(
                                                    "Progressive Slingshot", player, 1
                                                )
                                            )
                                            or (
                                                state.has(
                                                    "Progressive Beetle", player, 1
                                                )
                                            )
                                            or (state.has("Progressive Bow", player, 1))
                                        )
                                        or state.has("Clawshots", player, 1)
                                    )
                                    or (state.has("Progressive Sword", player, 1))
                                    or state.has("Whip", player, 1)
                                    or state.has("Bomb Bag", player, 1)
                                )
                                and state.has("Gust Bellows", player, 1)
                            )
                        )
                        or (
                            state.can_reach_region(
                                "Lanayru Sand Sea - Pirate Stronghold", player
                            )
                            and (True)
                        )
                    )
                    and (
                        state.can_reach_region("Sky", player)
                        and ((state.has("Progressive Sword", player, 1)))
                    )
                )
                and not state._ss_option_gondo_upgrades(player)
            )
        )
    if (
        loc
        == "Lanayru Sand Sea - Pirate Stronghold - Rupee on Bird Statue Pillar or Nose"
    ):
        return lambda state, player=world.player: (
            (
                state.has("Progressive Beetle", player, 3)
                and state._ss_option_gondo_upgrades(player)
            )
            or (
                (
                    (state.has("Progressive Beetle", player, 2))
                    and (
                        (
                            state.can_reach_region(
                                "Faron Woods - Deep Woods Entry", player
                            )
                            and (True)
                        )
                    )
                    and (
                        (
                            state.can_reach_region("Lanayru Mine - Landing", player)
                            and (
                                (
                                    (
                                        (
                                            (
                                                state.has(
                                                    "Progressive Slingshot", player, 1
                                                )
                                            )
                                            or (
                                                state.has(
                                                    "Progressive Beetle", player, 1
                                                )
                                            )
                                            or (state.has("Progressive Bow", player, 1))
                                        )
                                        or state.has("Clawshots", player, 1)
                                    )
                                    or (state.has("Progressive Sword", player, 1))
                                    or state.has("Whip", player, 1)
                                    or state.has("Bomb Bag", player, 1)
                                )
                            )
                        )
                        or (
                            state.can_reach_region(
                                "Lanayru Desert - Desert Entry", player
                            )
                            and (state.has("Bomb Bag", player, 1))
                        )
                        or (
                            state.can_reach_region(
                                "Lanayru Desert - North Desert", player
                            )
                            and (
                                state.has("Bomb Bag", player, 1)
                                or (state.has("Progressive Beetle", player, 2))
                            )
                        )
                        or (
                            state.can_reach_region("Lanayru Gorge - Gorge", player)
                            and (
                                (
                                    (
                                        (
                                            (
                                                state.has(
                                                    "Progressive Slingshot", player, 1
                                                )
                                            )
                                            or (
                                                state.has(
                                                    "Progressive Beetle", player, 1
                                                )
                                            )
                                            or (state.has("Progressive Bow", player, 1))
                                        )
                                        or state.has("Clawshots", player, 1)
                                    )
                                    or (state.has("Progressive Sword", player, 1))
                                    or state.has("Whip", player, 1)
                                    or state.has("Bomb Bag", player, 1)
                                )
                                and state.has("Gust Bellows", player, 1)
                            )
                        )
                        or (
                            state.can_reach_region(
                                "Lanayru Sand Sea - Pirate Stronghold", player
                            )
                            and (True)
                        )
                    )
                    and (
                        state.can_reach_region("Sky", player)
                        and ((state.has("Progressive Sword", player, 1)))
                    )
                )
                and not state._ss_option_gondo_upgrades(player)
            )
        )
    if loc == "Lanayru Sand Sea - Pirate Stronghold - First Chest":
        return lambda state, player=world.player: True
    if loc == "Lanayru Sand Sea - Pirate Stronghold - Second Chest":
        return lambda state, player=world.player: True
    if loc == "Lanayru Sand Sea - Pirate Stronghold - Third Chest":
        return lambda state, player=world.player: True
    if loc == "Lanayru Silent Realm - Trial Reward":
        return lambda state, player=world.player: True
    if loc == "Lanayru Silent Realm - Relic 1":
        return lambda state, player=world.player: True
    if loc == "Lanayru Silent Realm - Relic 2":
        return lambda state, player=world.player: True
    if loc == "Lanayru Silent Realm - Relic 3":
        return lambda state, player=world.player: True
    if loc == "Lanayru Silent Realm - Relic 4":
        return lambda state, player=world.player: True
    if loc == "Lanayru Silent Realm - Relic 5":
        return lambda state, player=world.player: True
    if loc == "Lanayru Silent Realm - Relic 6":
        return lambda state, player=world.player: True
    if loc == "Lanayru Silent Realm - Relic 7":
        return lambda state, player=world.player: True
    if loc == "Lanayru Silent Realm - Relic 8":
        return lambda state, player=world.player: True
    if loc == "Lanayru Silent Realm - Relic 9":
        return lambda state, player=world.player: True
    if loc == "Lanayru Silent Realm - Relic 10":
        return lambda state, player=world.player: True
    if loc == "Skyview - Chest on Tree Branch":
        return (
            lambda state, player=world.player: (
                (
                    (state.has("Progressive Slingshot", player, 1))
                    or (state.has("Progressive Beetle", player, 1))
                    or (state.has("Progressive Bow", player, 1))
                )
                or state.has("Clawshots", player, 1)
            )
            or (state.has("Progressive Sword", player, 2))
            or state.has("Whip", player, 1)
        )
    if loc == "Skyview - Digging Spot in Crawlspace":
        return (
            lambda state, player=world.player: (
                (
                    (state.has("Progressive Slingshot", player, 1))
                    or (state.has("Progressive Beetle", player, 1))
                    or (state.has("Progressive Bow", player, 1))
                )
                or state.has("Clawshots", player, 1)
            )
            and state.has("Water Dragon's Scale", player, 1)
            and (state.has("Progressive Mitts", player, 1))
        )
    if loc == "Skyview - Chest behind Two Eyes":
        return lambda state, player=world.player: (
            state.has("Progressive Sword", player, 1)
        ) and (
            state.has("Clawshots", player, 1)
            or (
                (
                    (state.has("Progressive Slingshot", player, 1))
                    or (state.has("Progressive Beetle", player, 1))
                    or (state.has("Progressive Bow", player, 1))
                )
                or state.has("Clawshots", player, 1)
            )
        )
    if loc == "Skyview - Chest after Stalfos Fight":
        return lambda state, player=world.player: (
            (
                (state.has("Progressive Slingshot", player, 1))
                or (state.has("Progressive Beetle", player, 1))
                or (state.has("Progressive Bow", player, 1))
            )
            or state.has("Clawshots", player, 1)
        ) and (
            (state.has("Progressive Sword", player, 1))
            or state.has("Water Dragon's Scale", player, 1)
        )
    if loc == "Skyview - Item behind Bars":
        return lambda state, player=world.player: (
            state.has("Progressive Beetle", player, 1)
        ) or state.has("Whip", player, 1)
    if loc == "Skyview - Rupee in Southeast Tunnel":
        return lambda state, player=world.player: (
            state.has("Progressive Beetle", player, 1)
        )
    if loc == "Skyview - Rupee in Southwest Tunnel":
        return lambda state, player=world.player: (
            state.has("Progressive Beetle", player, 1)
        )
    if loc == "Skyview - Rupee in East Tunnel":
        return lambda state, player=world.player: (
            state.has("Progressive Beetle", player, 1)
        )
    if loc == "Skyview - Chest behind Three Eyes":
        return lambda state, player=world.player: (
            state.has("Progressive Beetle", player, 1)
        ) and (state.has("Progressive Sword", player, 1))
    if loc == "Skyview - Chest near Boss Door":
        return lambda state, player=world.player: True
    if loc == "Skyview - Boss Key Chest":
        return lambda state, player=world.player: (
            (
                (state.has("Progressive Slingshot", player, 1))
                or (state.has("Progressive Beetle", player, 1))
                or (state.has("Progressive Bow", player, 1))
            )
            or state.has("Clawshots", player, 1)
        ) or (
            (state.has("Progressive Sword", player, 6))
            or (
                (state.has("Progressive Sword", player, 2))
                and state._ss_option_upgraded_skyward_strike(player)
            )
        )
    if loc == "Skyview - Heart Container":
        return lambda state, player=world.player: (
            state.can_reach_region("Skyview - Boss Room", player)
            and ((state.has("Progressive Sword", player, 1)))
        )
    if loc == "Skyview - Rupee on Spring Pillar":
        return lambda state, player=world.player: (
            state.has("Progressive Beetle", player, 1)
        )
    if loc == "Skyview - Strike Crest":
        return lambda state, player=world.player: (
            state.can_reach_region("Skyview - Skyview Spring", player)
            and ((state.has("Progressive Sword", player, 2)))
        )
    if loc == "Earth Temple - Vent Chest":
        return lambda state, player=world.player: (
            state.has("Progressive Mitts", player, 1)
        )
    if loc == "Earth Temple - Rupee above Drawbridge":
        return lambda state, player=world.player: (
            state.has("Progressive Beetle", player, 1)
        )
    if loc == "Earth Temple - Chest behind Bombable Rock":
        return lambda state, player=world.player: (
            state.can_reach_region("Earth Temple - Main Room", player)
            and (
                (state.has("Progressive Slingshot", player, 1))
                or (state.has("Progressive Bow", player, 1))
                or (
                    (state.has("Progressive Sword", player, 6))
                    or (
                        (state.has("Progressive Sword", player, 2))
                        and state._ss_option_upgraded_skyward_strike(player)
                    )
                )
                or state.has("Clawshots", player, 1)
                or (
                    (state.has("Progressive Beetle", player, 1))
                    and (
                        (state.has("Progressive Sword", player, 1))
                        or state.has("Bomb Bag", player, 1)
                    )
                )
            )
        )
    if loc == "Earth Temple - Chest Left of Main Room Bridge":
        return lambda state, player=world.player: (
            state.can_reach_region("Earth Temple - Main Room", player)
            and (
                (state.has("Progressive Slingshot", player, 1))
                or (state.has("Progressive Bow", player, 1))
                or (
                    (state.has("Progressive Sword", player, 6))
                    or (
                        (state.has("Progressive Sword", player, 2))
                        and state._ss_option_upgraded_skyward_strike(player)
                    )
                )
                or state.has("Clawshots", player, 1)
                or (
                    (state.has("Progressive Beetle", player, 1))
                    and (
                        (state.has("Progressive Sword", player, 1))
                        or state.has("Bomb Bag", player, 1)
                    )
                )
            )
        )
    if loc == "Earth Temple - Chest in West Room":
        return lambda state, player=world.player: (
            state.can_reach_region("Earth Temple - Main Room", player)
            and (
                (state.has("Progressive Slingshot", player, 1))
                or (state.has("Progressive Bow", player, 1))
                or (
                    (state.has("Progressive Sword", player, 6))
                    or (
                        (state.has("Progressive Sword", player, 2))
                        and state._ss_option_upgraded_skyward_strike(player)
                    )
                )
                or state.has("Clawshots", player, 1)
                or (
                    (state.has("Progressive Beetle", player, 1))
                    and (
                        (state.has("Progressive Sword", player, 1))
                        or state.has("Bomb Bag", player, 1)
                    )
                )
            )
        ) and (
            (state.has("Progressive Beetle", player, 2))
            or state.has("Bomb Bag", player, 1)
        )
    if loc == "Earth Temple - Chest after Double Lizalfos Fight":
        return lambda state, player=world.player: (
            state.can_reach_region("Earth Temple - Main Room", player)
            and (
                (state.has("Progressive Slingshot", player, 1))
                or (state.has("Progressive Bow", player, 1))
                or (
                    (state.has("Progressive Sword", player, 6))
                    or (
                        (state.has("Progressive Sword", player, 2))
                        and state._ss_option_upgraded_skyward_strike(player)
                    )
                )
                or state.has("Clawshots", player, 1)
                or (
                    (state.has("Progressive Beetle", player, 1))
                    and (
                        (state.has("Progressive Sword", player, 1))
                        or state.has("Bomb Bag", player, 1)
                    )
                )
            )
        ) and (
            (state.has("Progressive Sword", player, 1))
            or state.has("Bomb Bag", player, 1)
        )
    if loc == "Earth Temple - Ledd's Gift":
        return lambda state, player=world.player: (
            state.can_reach_region("Earth Temple - Main Room", player)
            and (
                (state.has("Progressive Slingshot", player, 1))
                or (state.has("Progressive Bow", player, 1))
                or (
                    (state.has("Progressive Sword", player, 6))
                    or (
                        (state.has("Progressive Sword", player, 2))
                        and state._ss_option_upgraded_skyward_strike(player)
                    )
                )
                or state.has("Clawshots", player, 1)
                or (
                    (state.has("Progressive Beetle", player, 1))
                    and (
                        (state.has("Progressive Sword", player, 1))
                        or state.has("Bomb Bag", player, 1)
                    )
                )
            )
        ) and (
            (state.has("Progressive Sword", player, 1))
            or state.has("Bomb Bag", player, 1)
        )
    if loc == "Earth Temple - Rupee in Lava Tunnel":
        return (
            lambda state, player=world.player: (
                state.can_reach_region("Earth Temple - Main Room", player)
                and (
                    (state.has("Progressive Slingshot", player, 1))
                    or (state.has("Progressive Bow", player, 1))
                    or (
                        (state.has("Progressive Sword", player, 6))
                        or (
                            (state.has("Progressive Sword", player, 2))
                            and state._ss_option_upgraded_skyward_strike(player)
                        )
                    )
                    or state.has("Clawshots", player, 1)
                    or (
                        (state.has("Progressive Beetle", player, 1))
                        and (
                            (state.has("Progressive Sword", player, 1))
                            or state.has("Bomb Bag", player, 1)
                        )
                    )
                )
            )
            and (state.has("Progressive Beetle", player, 1))
            and (
                (state.has("Progressive Beetle", player, 2))
                or state.has("Bomb Bag", player, 1)
            )
        )
    if loc == "Earth Temple - Chest Guarded by Lizalfos":
        return lambda state, player=world.player: (
            state.can_reach_region("Earth Temple - Main Room", player)
            and (
                (state.has("Progressive Slingshot", player, 1))
                or (state.has("Progressive Bow", player, 1))
                or (
                    (state.has("Progressive Sword", player, 6))
                    or (
                        (state.has("Progressive Sword", player, 2))
                        and state._ss_option_upgraded_skyward_strike(player)
                    )
                )
                or state.has("Clawshots", player, 1)
                or (
                    (state.has("Progressive Beetle", player, 1))
                    and (
                        (state.has("Progressive Sword", player, 1))
                        or state.has("Bomb Bag", player, 1)
                    )
                )
            )
        ) and (
            state.can_reach_region("Earth Temple - Main Room", player)
            and (
                (state.has("Progressive Beetle", player, 1))
                and (
                    (state.has("Progressive Beetle", player, 2))
                    or state.has("Bomb Bag", player, 1)
                )
            )
        )
    if loc == "Earth Temple - Boss Key Chest":
        return lambda state, player=world.player: True
    if loc == "Earth Temple - Heart Container":
        return lambda state, player=world.player: (
            state.can_reach_region("Earth Temple - Boss Room", player)
            and (
                state.has("Bomb Bag", player, 1)
                and (state.has("Progressive Sword", player, 1))
            )
        )
    if loc == "Earth Temple - Strike Crest":
        return lambda state, player=world.player: (
            state.can_reach_region("Earth Temple - Earth Spring", player)
            and ((state.has("Progressive Sword", player, 2)))
        )
    if loc == "Lanayru Mining Facility - Chest behind Bars":
        return lambda state, player=world.player: True
    if loc == "Lanayru Mining Facility - Chest in Key Locked Room":
        return lambda state, player=world.player: (
            state.can_reach_region("Lanayru Mining Facility - Key Locked Room", player)
            and ((state.has("Progressive Beetle", player, 2)))
        )
    if loc == "Lanayru Mining Facility - Raised Chest in Hop across Boxes Room":
        return lambda state, player=world.player: (
            state.can_reach_region("Lanayru Mining Facility - Key Locked Room", player)
            and ((state.has("Progressive Beetle", player, 2)))
        ) and (
            (
                (
                    (state.has("Progressive Slingshot", player, 1))
                    or (state.has("Progressive Beetle", player, 1))
                    or (state.has("Progressive Bow", player, 1))
                )
                or state.has("Clawshots", player, 1)
            )
            or (state.has("Progressive Sword", player, 1))
            or state.has("Gust Bellows", player, 1)
            or state.has("Whip", player, 1)
            or state.has("Bomb Bag", player, 1)
        )
    if loc == "Lanayru Mining Facility - Lower Chest in Hop across Boxes Room":
        return lambda state, player=world.player: (
            state.can_reach_region("Lanayru Mining Facility - Key Locked Room", player)
            and ((state.has("Progressive Beetle", player, 2)))
        ) and (
            (
                (
                    (state.has("Progressive Slingshot", player, 1))
                    or (state.has("Progressive Beetle", player, 1))
                    or (state.has("Progressive Bow", player, 1))
                )
                or state.has("Clawshots", player, 1)
            )
            or (state.has("Progressive Sword", player, 1))
            or state.has("Gust Bellows", player, 1)
            or state.has("Whip", player, 1)
            or state.has("Bomb Bag", player, 1)
        )
    if loc == "Lanayru Mining Facility - Chest in First West Room":
        return lambda state, player=world.player: state.has("Gust Bellows", player, 1)
    if loc == "Lanayru Mining Facility - Chest after Armos Fight":
        return (
            lambda state, player=world.player: (
                state.can_reach_region("Lanayru Mining Facility - West Room", player)
                and (
                    state.has("Gust Bellows", player, 1)
                    and (
                        (state.has("Progressive Sword", player, 1))
                        or (state.has("Progressive Bow", player, 1))
                    )
                )
            )
            and (
                state.has("Gust Bellows", player, 1)
                and (state.has("Progressive Sword", player, 1))
            )
            and (
                (state.has("Progressive Sword", player, 2))
                or (state.has("Progressive Slingshot", player, 1))
                or (state.has("Progressive Bow", player, 1))
                or state.has("Whip", player, 1)
            )
        )
    if loc == "Lanayru Mining Facility - First Chest in Hub Room":
        return lambda state, player=world.player: (
            state.has("Progressive Beetle", player, 2)
        ) or state.has("Bomb Bag", player, 1)
    if loc == "Lanayru Mining Facility - Chest behind First Crawlspace":
        return lambda state, player=world.player: state.has("Gust Bellows", player, 1)
    if loc == "Lanayru Mining Facility - Chest in Spike Maze":
        return lambda state, player=world.player: state.has("Gust Bellows", player, 1)
    if loc == "Lanayru Mining Facility - Boss Key Chest":
        return lambda state, player=world.player: (
            state.can_reach_region("Lanayru Mining Facility - Boss Key Room", player)
            and (
                state.has("Gust Bellows", player, 1)
                and state.has("Bomb Bag", player, 1)
                and (
                    (state.has("Progressive Sword", player, 1))
                    or (state.has("Progressive Bow", player, 1))
                )
                and (
                    (state.has("Progressive Sword", player, 1))
                    or (
                        (
                            (state.has("Progressive Slingshot", player, 1))
                            or (state.has("Progressive Beetle", player, 1))
                            or (state.has("Progressive Bow", player, 1))
                        )
                        or state.has("Clawshots", player, 1)
                    )
                )
            )
        ) and (
            state.has("Gust Bellows", player, 1)
            and (state.has("Progressive Sword", player, 1))
        )
    if loc == "Lanayru Mining Facility - Shortcut Chest in Main Hub":
        return lambda state, player=world.player: (
            state.can_reach_region("Lanayru Mining Facility - Boss Key Room", player)
            and (
                state.has("Gust Bellows", player, 1)
                and state.has("Bomb Bag", player, 1)
                and (
                    (state.has("Progressive Sword", player, 1))
                    or (state.has("Progressive Bow", player, 1))
                )
                and (
                    (state.has("Progressive Sword", player, 1))
                    or (
                        (
                            (state.has("Progressive Slingshot", player, 1))
                            or (state.has("Progressive Beetle", player, 1))
                            or (state.has("Progressive Bow", player, 1))
                        )
                        or state.has("Clawshots", player, 1)
                    )
                )
            )
        ) and (
            state.has("Gust Bellows", player, 1)
            and (state.has("Progressive Sword", player, 1))
        )
    if loc == "Lanayru Mining Facility - Heart Container":
        return lambda state, player=world.player: (
            state.can_reach_region("Lanayru Mining Facility - Boss Room", player)
            and (
                (
                    state.has("Gust Bellows", player, 1)
                    and (state.has("Progressive Sword", player, 1))
                )
            )
        )
    if loc == "Lanayru Mining Facility - Exit Hall of Ancient Robots":
        return lambda state, player=world.player: (
            state.can_reach_region(
                "Lanayru Mining Facility - Hall of Ancient Robots", player
            )
            and (
                (state.has("Progressive Beetle", player, 1))
                or (state.has("Progressive Bow", player, 1))
            )
        )
    if loc == "Ancient Cistern - Rupee in West Hand":
        return lambda state, player=world.player: state.has(
            "Water Dragon's Scale", player, 1
        )
    if loc == "Ancient Cistern - Rupee in East Hand":
        return lambda state, player=world.player: state.has(
            "Water Dragon's Scale", player, 1
        )
    if loc == "Ancient Cistern - Chest after Whip Hooks":
        return lambda state, player=world.player: state.has("Whip", player, 1)
    if loc == "Ancient Cistern - Chest near Vines":
        return lambda state, player=world.player: (
            state.can_reach_region("Ancient Cistern - Past Gutters", player) and (True)
        ) or (state.has("Whip", player, 1) and state.has("Clawshots", player, 1))
    if loc == "Ancient Cistern - Chest in Key Locked Room":
        return lambda state, player=world.player: state.has(
            "Ancient Cistern Small Key", player, 2
        ) and (
            ((state.has("Progressive Sword", player, 1)))
            or (
                state.can_reach_region("Ancient Cistern - Main Room", player)
                and (
                    state.has("Whip", player, 1)
                    and (
                        (
                            state.can_reach_region(
                                "Ancient Cistern - Past Gutters", player
                            )
                            and (True)
                        )
                        or state.has("Clawshots", player, 1)
                    )
                )
            )
        )
    if loc == "Ancient Cistern - First Rupee in East Part in Short Tunnel":
        return lambda state, player=world.player: state.has(
            "Water Dragon's Scale", player, 1
        ) and (
            (state.has("Progressive Sword", player, 1))
            or (state.has("Progressive Bow", player, 1))
            or state.has("Whip", player, 1)
            or state.has("Clawshots", player, 1)
        )
    if loc == "Ancient Cistern - Second Rupee in East Part in Short Tunnel":
        return lambda state, player=world.player: state.has(
            "Water Dragon's Scale", player, 1
        ) and (
            (state.has("Progressive Sword", player, 1))
            or (state.has("Progressive Bow", player, 1))
            or state.has("Whip", player, 1)
            or state.has("Clawshots", player, 1)
        )
    if loc == "Ancient Cistern - Third Rupee in East Part in Short Tunnel":
        return lambda state, player=world.player: state.has(
            "Water Dragon's Scale", player, 1
        ) and (
            (state.has("Progressive Sword", player, 1))
            or (state.has("Progressive Bow", player, 1))
            or state.has("Whip", player, 1)
            or state.has("Clawshots", player, 1)
        )
    if loc == "Ancient Cistern - Rupee in East Part in Cubby":
        return lambda state, player=world.player: state.has(
            "Water Dragon's Scale", player, 1
        ) and (
            (state.has("Progressive Sword", player, 1))
            or (state.has("Progressive Bow", player, 1))
            or state.has("Whip", player, 1)
            or state.has("Clawshots", player, 1)
        )
    if loc == "Ancient Cistern - Rupee in East Part in Main Tunnel":
        return lambda state, player=world.player: state.has(
            "Water Dragon's Scale", player, 1
        ) and (
            (state.has("Progressive Sword", player, 1))
            or (state.has("Progressive Bow", player, 1))
            or state.has("Whip", player, 1)
            or state.has("Clawshots", player, 1)
        )
    if loc == "Ancient Cistern - Chest in East Part":
        return lambda state, player=world.player: state.has(
            "Water Dragon's Scale", player, 1
        ) and (
            (state.has("Progressive Sword", player, 1))
            or (state.has("Progressive Bow", player, 1))
            or state.has("Whip", player, 1)
            or state.has("Clawshots", player, 1)
        )
    if loc == "Ancient Cistern - Chest behind the Waterfall":
        return lambda state, player=world.player: True
    if loc == "Ancient Cistern - Bokoblin":
        return lambda state, player=world.player: (
            state.can_reach_region("Ancient Cistern - Gutters", player)
            and (
                state.has("Water Dragon's Scale", player, 1)
                and state.has("Whip", player, 1)
                and (
                    (state.has("Progressive Beetle", player, 1))
                    or (state.has("Progressive Bow", player, 1))
                )
            )
        ) and state.has("Whip", player, 1)
    if loc == "Ancient Cistern - Rupee under Lilypad":
        return lambda state, player=world.player: state.has(
            "Water Dragon's Scale", player, 1
        ) and state.has("Whip", player, 1)
    if loc == "Ancient Cistern - Boss Key Chest":
        return lambda state, player=world.player: (
            state.can_reach_region("Ancient Cistern - Basement", player)
            and (
                state.has("Whip", player, 1)
                and (
                    state.has("Clawshots", player, 1)
                    or (state.has("Progressive Beetle", player, 2))
                )
            )
        )
    if loc == "Ancient Cistern - Heart Container":
        return lambda state, player=world.player: (
            state.can_reach_region("Ancient Cistern - Boss Room", player)
            and (
                state.has("Whip", player, 1)
                and (
                    (state.has("Progressive Sword", player, 1))
                    or state.has("Bomb Bag", player, 1)
                    or (state.has("Progressive Bow", player, 1))
                )
            )
        )
    if loc == "Ancient Cistern - Farore's Flame":
        return lambda state, player=world.player: (
            state.can_reach_region("Ancient Cistern - Flame Room", player)
            and ((state.has("Progressive Sword", player, 2)))
        )
    if loc == "Sandship - Chest at the Stern":
        return (
            lambda state, player=world.player: (
                state.can_reach_region("Sandship - Deck", player)
                and (
                    (state.has("Progressive Bow", player, 1))
                    and (
                        (state.has("Progressive Sword", player, 1))
                        or state.has("Sandship Small Key", player, 2)
                    )
                )
            )
            and (state.has("Progressive Bow", player, 1))
            and state.has("Clawshots", player, 1)
        )
    if loc == "Sandship - Chest before 4-Door Corridor":
        return lambda state, player=world.player: (
            state.can_reach_region("Sandship - Deck", player)
            and (
                (state.has("Progressive Bow", player, 1))
                and (
                    (state.has("Progressive Sword", player, 1))
                    or state.has("Sandship Small Key", player, 2)
                )
            )
        ) and (state.has("Progressive Bow", player, 1))
    if loc == "Sandship - Chest behind Combination Lock":
        return lambda state, player=world.player: (
            (state.has("Progressive Sword", player, 1))
            or (state.has("Progressive Bow", player, 1))
            or state.has("Whip", player, 1)
            or state.has("Clawshots", player, 1)
        ) and (
            state.has("Gust Bellows", player, 1)
            or (
                state.can_reach_region("Sandship - Deck", player)
                and (
                    (state.has("Progressive Bow", player, 1))
                    and (
                        (state.has("Progressive Sword", player, 1))
                        or state.has("Sandship Small Key", player, 2)
                    )
                )
            )
        )
    if loc == "Sandship - Treasure Room First Chest":
        return lambda state, player=world.player: state.has("Whip", player, 1)
    if loc == "Sandship - Treasure Room Second Chest":
        return lambda state, player=world.player: state.has("Whip", player, 1)
    if loc == "Sandship - Treasure Room Third Chest":
        return lambda state, player=world.player: state.has("Whip", player, 1)
    if loc == "Sandship - Treasure Room Fourth Chest":
        return lambda state, player=world.player: state.has("Whip", player, 1)
    if loc == "Sandship - Treasure Room Fifth Chest":
        return lambda state, player=world.player: state.has("Whip", player, 1)
    if loc == "Sandship - Robot in Brig's Reward":
        return lambda state, player=world.player: state.has("Whip", player, 1)
    if loc == "Sandship - Chest after Scervo Fight":
        return lambda state, player=world.player: (
            state.has("Progressive Sword", player, 1)
        )
    if loc == "Sandship - Boss Key Chest":
        return lambda state, player=world.player: (
            state.has("Progressive Bow", player, 1)
        )
    if loc == "Sandship - Heart Container":
        return lambda state, player=world.player: (
            state.can_reach_region("Sandship - Boss Room", player)
            and ((state.has("Progressive Bow", player, 1)))
        )
    if loc == "Sandship - Nayru's Flame":
        return lambda state, player=world.player: (
            state.can_reach_region("Sandship - Boss Room", player)
            and (
                (
                    state.can_reach_region("Sandship - Boss Room", player)
                    and ((state.has("Progressive Bow", player, 1)))
                )
                and (state.has("Progressive Sword", player, 2))
            )
        )
    if loc == "Fire Sanctuary - Chest in First Room":
        return lambda state, player=world.player: (
            (
                (state.has("Progressive Sword", player, 1))
                or (state.has("Progressive Bow", player, 1))
                or state.has("Bomb Bag", player, 1)
            )
        ) and (
            (
                (
                    (state.has("Progressive Slingshot", player, 1))
                    or (state.has("Progressive Beetle", player, 1))
                    or (state.has("Progressive Bow", player, 1))
                )
                or state.has("Clawshots", player, 1)
            )
            or state.has("Bomb Bag", player, 1)
        )
    if loc == "Fire Sanctuary - Chest in Second Room":
        return lambda state, player=world.player: True
    if loc == "Fire Sanctuary - Chest on Balcony":
        return lambda state, player=world.player: (
            state.has("Progressive Mitts", player, 2)
        ) and (state.has("Progressive Sword", player, 1))
    if loc == "Fire Sanctuary - First Chest in Water Fruit Room":
        return lambda state, player=world.player: True
    if loc == "Fire Sanctuary - Second Chest in Water Fruit Room":
        return lambda state, player=world.player: True
    if loc == "Fire Sanctuary - Chest near First Trapped Mogma":
        return lambda state, player=world.player: state.has(
            "Clawshots", player, 1
        ) or state.has("Gust Bellows", player, 1)
    if loc == "Fire Sanctuary - Rescue First Trapped Mogma":
        return lambda state, player=world.player: True
    if loc == "Fire Sanctuary - Rescue Second Trapped Mogma":
        return lambda state, player=world.player: (
            state.has("Progressive Mitts", player, 2)
        ) and (state.has("Progressive Sword", player, 1))
    if loc == "Fire Sanctuary - Chest after Bombable Wall":
        return (
            lambda state, player=world.player: (
                state.has("Progressive Mitts", player, 2)
            )
            and (state.has("Progressive Sword", player, 1))
            and state.has("Bomb Bag", player, 1)
        )
    if loc == "Fire Sanctuary - Plats' Chest":
        return lambda state, player=world.player: (
            state.has("Progressive Mitts", player, 2)
        ) and (
            (
                (
                    (state.has("Progressive Slingshot", player, 1))
                    or (state.has("Progressive Beetle", player, 1))
                    or (state.has("Progressive Bow", player, 1))
                )
                or state.has("Clawshots", player, 1)
            )
            or state.has("Bomb Bag", player, 1)
        )
    if loc == "Fire Sanctuary - Chest in Staircase Room":
        return lambda state, player=world.player: (
            state.can_reach_region("Fire Sanctuary - Staircase Room", player)
            and (
                (
                    (state.has("Progressive Sword", player, 1))
                    or state.has("Bomb Bag", player, 1)
                )
                and state.has("Clawshots", player, 1)
            )
        )
    if loc == "Fire Sanctuary - Boss Key Chest":
        return lambda state, player=world.player: (
            state.has("Progressive Mitts", player, 2)
        )
    if loc == "Fire Sanctuary - Heart Container":
        return lambda state, player=world.player: (
            state.can_reach_region("Fire Sanctuary - Boss Room", player)
            and ((state.has("Progressive Sword", player, 1)))
        )
    if loc == "Fire Sanctuary - Din's Flame":
        return lambda state, player=world.player: (
            state.can_reach_region("Fire Sanctuary - Flame Room", player)
            and ((state.has("Progressive Sword", player, 2)))
        )
    if loc == "Sky Keep - First Chest":
        return lambda state, player=world.player: True
    if loc == "Sky Keep - Sacred Power of Farore":
        return (
            lambda state, player=world.player: state.has(
                "Sky Keep Small Key", player, 1
            )
            and (
                (
                    (state.has("Progressive Sword", player, 1))
                    or (state.has("Progressive Bow", player, 1))
                    or state.has("Bomb Bag", player, 1)
                )
            )
            and (
                (
                    (state.has("Progressive Sword", player, 1))
                    or (state.has("Progressive Bow", player, 1))
                    or state.has("Bomb Bag", player, 1)
                )
            )
            and ((state.has("Progressive Sword", player, 1)))
            and (state.has("Progressive Bow", player, 1))
            and (
                (state.has("Progressive Sword", player, 1))
                or state.has("Bomb Bag", player, 1)
            )
            and ((state.has("Progressive Sword", player, 1)))
        )
    if loc == "Sky Keep - Chest after Dreadfuse":
        return lambda state, player=world.player: (
            state.can_reach_region("Sky Keep - Miniboss Room", player)
            and (
                state.has("Clawshots", player, 1)
                and (state.has("Progressive Sword", player, 1))
            )
        )
    if loc == "Sky Keep - Rupee in Fire Sanctuary Room in Alcove":
        return lambda state, player=world.player: (
            state.has("Progressive Beetle", player, 1)
        )
    if loc == "Sky Keep - Sacred Power of Din":
        return lambda state, player=world.player: (
            state.can_reach_region("Sky Keep - Fire Sanctuary Room", player)
            and (
                (state.has("Progressive Beetle", player, 1))
                and state.has("Clawshots", player, 1)
            )
        )
    if loc == "Sky Keep - Sacred Power of Nayru":
        return lambda state, player=world.player: (
            state.has("Progressive Bow", player, 1)
        ) and state.has("Clawshots", player, 1)


def exit_requirements(world: "SSWorld", ex):
    if ex == "Upper Skyloft - Knight Academy":
        return lambda state, player=world.player: True
    if ex == "Upper Skyloft - Zelda's Room":
        return lambda state, player=world.player: state.has("Clawshots", player, 1)
    if ex == "Upper Skyloft - Stairs to Central Skyloft":
        return lambda state, player=world.player: True
    if ex == "Upper Skyloft - Loftwing Platforms":
        return lambda state, player=world.player: True
    if ex == "Upper Skyloft - Knight Academy - Upper Skyloft":
        return lambda state, player=world.player: True
    if ex == "Upper Skyloft - Zelda's Room - Knight Academy":
        return lambda state, player=world.player: True
    if ex == "Central Skyloft - Stairs to Upper Skyloft":
        return lambda state, player=world.player: True
    if ex == "Central Skyloft - Bridge to Skyloft Village":
        return lambda state, player=world.player: True
    if ex == "Central Skyloft - Ring Beedle's Bell":
        return lambda state, player=world.player: (
            state.can_reach_region("Central Skyloft", player)
            and (
                (
                    (
                        (state.has("Progressive Slingshot", player, 1))
                        or (state.has("Progressive Beetle", player, 1))
                        or (state.has("Progressive Bow", player, 1))
                    )
                    or state.has("Clawshots", player, 1)
                )
            )
        )
    if ex == "Central Skyloft - Loftwing Platforms":
        return lambda state, player=world.player: True
    if ex == "Central Skyloft - Dungeon Entrance on Skyloft":
        return lambda state, player=world.player: state.has(
            "Stone of Trials", player, 1
        ) and state.has("Clawshots", player, 1)
    if ex == "Central Skyloft - Trial Gate on Skyloft":
        return lambda state, player=world.player: state.has(
            "Goddess's Harp", player, 1
        ) and (
            state.has("Faron Song of the Hero Part", player, 1)
            and state.has("Eldin Song of the Hero Part", player, 1)
            and state.has("Lanayru Song of the Hero Part", player, 1)
        )
    if ex == "Skyloft Village - Bridge to Central Skyloft":
        return lambda state, player=world.player: True
    if ex == "Skyloft Village - Shed Door to Batreaux's House":
        return lambda state, player=world.player: True
    if ex == "Skyloft Village - Loftwing Platforms":
        return lambda state, player=world.player: True
    if ex == "Batreaux's House - Exit Shed Door":
        return lambda state, player=world.player: True
    if ex == "Beedle's Shop - Leave Shop":
        return lambda state, player=world.player: True
    if ex == "Skyloft Silent Realm - Trial Gate":
        return lambda state, player=world.player: True
    if ex == "Sky - Dive to Upper Skyloft":
        return lambda state, player=world.player: True
    if ex == "Sky - Dive to Central Skyloft":
        return lambda state, player=world.player: True
    if ex == "Sky - Dive to Skyloft Village":
        return lambda state, player=world.player: True
    if ex == "Sky - Opening in Clouds":
        return lambda state, player=world.player: state.has(
            "Ballad of the Goddess", player, 1
        )
    if ex == "Sky - Emerald Pillar":
        return lambda state, player=world.player: state.has("Emerald Tablet", player, 1)
    if ex == "Sky - Ruby Pillar":
        return lambda state, player=world.player: state.has("Ruby Tablet", player, 1)
    if ex == "Sky - Amber Pillar":
        return lambda state, player=world.player: state.has("Amber Tablet", player, 1)
    if ex == "Thunderhead - Opening in Clouds":
        return lambda state, player=world.player: True
    if ex == "Sealed Grounds - Spiral - Fly to Sky":
        return lambda state, player=world.player: True
    if ex == "Sealed Grounds - Spiral - Sealed Temple":
        return lambda state, player=world.player: True
    if ex == "Sealed Grounds - Sealed Temple - Spiral":
        return lambda state, player=world.player: True
    if ex == "Sealed Grounds - Sealed Temple - Behind the Temple":
        return lambda state, player=world.player: True
    if ex == "Sealed Grounds - Sealed Temple - Hylia's Realm":
        return lambda state, player=world.player: (
            state.can_reach_region("Sealed Grounds - Sealed Temple", player)
            and (
                (
                    state.can_reach_region("Sealed Grounds - Sealed Temple", player)
                    and (state.has("Goddess's Harp", player, 1))
                )
                and state._ss_sword_requirement_met(player)
                and (
                    state._ss_can_beat_required_dungeons(player)
                    or state._ss_option_unrequired_dungeons(player)
                )
            )
        ) and (
            (
                state.has("Triforce of Courage", player, 1)
                and state.has("Triforce of Power", player, 1)
                and state.has("Triforce of Wisdom", player, 1)
            )
            or state._ss_option_no_triforce(player)
        )
    if ex == "Sealed Grounds - Behind the Temple - Fly to Sky":
        return lambda state, player=world.player: True
    if ex == "Sealed Grounds - Behind the Temple - Sealed Temple":
        return lambda state, player=world.player: True
    if ex == "Sealed Grounds - Behind the Temple - Path to Forest":
        return lambda state, player=world.player: True
    if ex == "Hylia's Realm - Door to Temple":
        return lambda state, player=world.player: True
    if ex == "Faron Woods - Forest Entry - Fly to Sky":
        return lambda state, player=world.player: True
    if ex == "Faron Woods - Forest Entry - Path out of Forest":
        return lambda state, player=world.player: True
    if ex == "Faron Woods - Forest Entry - In the Woods":
        return lambda state, player=world.player: (
            (state.has("Progressive Sword", player, 1))
            or state.has("Bomb Bag", player, 1)
        ) or state.has("Clawshots", player, 1)
    if ex == "Faron Woods - In the Woods - Fly to Sky":
        return lambda state, player=world.player: True
    if ex == "Faron Woods - In the Woods - Forest Entry":
        return lambda state, player=world.player: True
    if ex == "Faron Woods - In the Woods - Viewing Platform":
        return lambda state, player=world.player: True
    if ex == "Faron Woods - In the Woods - Inside Lower Great Tree":
        return lambda state, player=world.player: state.has(
            "Water Dragon's Scale", player, 1
        )
    if ex == "Faron Woods - In the Woods - Great Tree Platforms":
        return lambda state, player=world.player: state.has("Clawshots", player, 1)
    if ex == "Faron Woods - In the Woods - Jump into Lake":
        return lambda state, player=world.player: state.has(
            "Water Dragon's Scale", player, 1
        ) and (
            (
                (
                    state.can_reach_region(
                        "Faron Woods - Outside Top of Great Tree", player
                    )
                    and (
                        (state.has("Progressive Slingshot", player, 1))
                        or (state.has("Progressive Beetle", player, 1))
                    )
                )
                and (state.has("Progressive Sword", player, 2))
            )
            or (
                (
                    state.can_reach_region(
                        "Faron Woods - Outside Top of Great Tree", player
                    )
                    and (
                        (state.has("Progressive Slingshot", player, 1))
                        or (state.has("Progressive Beetle", player, 1))
                    )
                )
                and state._ss_option_lake_floria_yerbal(player)
            )
            or (state._ss_option_lake_floria_open(player))
        )
    if ex == "Faron Woods - Viewing Platform - Fly to Sky":
        return lambda state, player=world.player: True
    if ex == "Faron Woods - Viewing Platform - In the Woods":
        return lambda state, player=world.player: True
    if ex == "Faron Woods - Viewing Platform - Deep Woods Entry":
        return lambda state, player=world.player: (
            (
                (state.has("Progressive Slingshot", player, 1))
                or (state.has("Progressive Beetle", player, 1))
                or (state.has("Progressive Bow", player, 1))
            )
            or state.has("Clawshots", player, 1)
        ) or state.has("Bomb Bag", player, 1)
    if ex == "Faron Woods - Viewing Platform - Trial Gate in Faron Woods":
        return lambda state, player=world.player: state.has(
            "Goddess's Harp", player, 1
        ) and state.has("Farore's Courage", player, 1)
    if ex == "Faron Woods - Deep Woods Entry - Viewing Platform":
        return lambda state, player=world.player: True
    if ex == "Faron Woods - Deep Woods Entry - Deep Woods after Beehive":
        return (
            lambda state, player=world.player: (
                (
                    (state.has("Progressive Slingshot", player, 1))
                    or (state.has("Progressive Beetle", player, 1))
                    or (state.has("Progressive Bow", player, 1))
                )
                or state.has("Clawshots", player, 1)
            )
            or state.has("Bomb Bag", player, 1)
            or (state.has("Progressive Sword", player, 2))
        )
    if ex == "Faron Woods - Deep Woods after Beehive - Fly to Sky":
        return lambda state, player=world.player: True
    if ex == "Faron Woods - Deep Woods after Beehive - Deep Woods Entry":
        return lambda state, player=world.player: True
    if ex == "Faron Woods - Deep Woods after Beehive - Dungeon Entrance in Deep Woods":
        return lambda state, player=world.player: (
            (
                (state.has("Progressive Slingshot", player, 1))
                or (state.has("Progressive Beetle", player, 1))
                or (state.has("Progressive Bow", player, 1))
            )
            or state.has("Clawshots", player, 1)
        )
    if ex == "Faron Woods - Inside Lower Great Tree - Water - In the Woods":
        return lambda state, player=world.player: state.has(
            "Water Dragon's Scale", player, 1
        )
    if ex == "Faron Woods - Inside Lower Great Tree - Water - After Swinging Platforms":
        return lambda state, player=world.player: state.has("Gust Bellows", player, 1)
    if ex == "Faron Woods - Inside Lower Great Tree - Water - Upper Ledge":
        return lambda state, player=world.player: state.has("Gust Bellows", player, 1)
    if ex == "Faron Woods - Inside Lower Great Tree - After Swinging Platforms - Water":
        return lambda state, player=world.player: True
    if (
        ex
        == "Faron Woods - Inside Lower Great Tree - After Swinging Platforms - Upper Ledge"
    ):
        return lambda state, player=world.player: state.has("Gust Bellows", player, 1)
    if (
        ex
        == "Faron Woods - Inside Lower Great Tree - After Swinging Platforms - Great Tree Platforms"
    ):
        return lambda state, player=world.player: True
    if ex == "Faron Woods - Inside Lower Great Tree - Upper Ledge - Water":
        return lambda state, player=world.player: True
    if (
        ex
        == "Faron Woods - Inside Lower Great Tree - Upper Ledge - After Swinging Platforms"
    ):
        return lambda state, player=world.player: True
    if ex == "Faron Woods - Inside Upper Great Tree - Lower Exit":
        return lambda state, player=world.player: True
    if ex == "Faron Woods - Inside Upper Great Tree - Upper Exit":
        return lambda state, player=world.player: True
    if ex == "Faron Woods - Inside Upper Great Tree - Jump Down to Lower Great Tree":
        return lambda state, player=world.player: (
            (
                (state.has("Progressive Sword", player, 1))
                or (state.has("Progressive Bow", player, 1))
                or state.has("Bomb Bag", player, 1)
            )
        )
    if ex == "Faron Woods - Inside Upper Great Tree - Speak to Water Dragon":
        return lambda state, player=world.player: True
    if ex == "Faron Woods - Great Tree Platforms - Lower Exit":
        return lambda state, player=world.player: True
    if ex == "Faron Woods - Great Tree Platforms - Upper Exit":
        return lambda state, player=world.player: True
    if ex == "Faron Woods - Great Tree Platforms - In the Woods":
        return lambda state, player=world.player: True
    if ex == "Faron Woods - Great Tree Platforms - Viewing Platform":
        return lambda state, player=world.player: True
    if ex == "Faron Woods - Outside Top of Great Tree - Fly to Sky":
        return lambda state, player=world.player: True
    if ex == "Faron Woods - Outside Top of Great Tree - In the Woods":
        return lambda state, player=world.player: True
    if ex == "Faron Woods - Outside Top of Great Tree - Viewing Platform":
        return lambda state, player=world.player: True
    if ex == "Faron Woods - Outside Top of Great Tree - Inside Upper Great Tree":
        return lambda state, player=world.player: True
    if ex == "Lake Floria - Lake - Higher Ledge in Lake":
        return lambda state, player=world.player: state.has(
            "Water Dragon's Scale", player, 1
        )
    if ex == "Lake Floria - Lake - Dragon's Lair":
        return lambda state, player=world.player: state.has(
            "Water Dragon's Scale", player, 1
        )
    if ex == "Lake Floria - Higher Ledge in Lake - Fly to Sky":
        return lambda state, player=world.player: True
    if ex == "Lake Floria - Higher Ledge in Lake - Lake":
        return lambda state, player=world.player: state.has(
            "Water Dragon's Scale", player, 1
        )
    if ex == "Lake Floria - Dragon's Lair - Lake":
        return lambda state, player=world.player: state.has(
            "Water Dragon's Scale", player, 1
        )
    if ex == "Lake Floria - Dragon's Lair - Waterfall":
        return lambda state, player=world.player: True
    if ex == "Lake Floria - Waterfall - Fly to Sky":
        return lambda state, player=world.player: True
    if ex == "Lake Floria - Waterfall - Dragon's Lair":
        return lambda state, player=world.player: True
    if ex == "Lake Floria - Waterfall - Path into Forest":
        return lambda state, player=world.player: True
    if ex == "Lake Floria - Waterfall - Ancient Cistern Ledge":
        return lambda state, player=world.player: state.has(
            "Water Dragon's Scale", player, 1
        )
    if ex == "Lake Floria - Ancient Cistern Ledge - Waterfall":
        return lambda state, player=world.player: True
    if ex == "Lake Floria - Ancient Cistern Ledge - Dungeon Entrance in Lake Floria":
        return lambda state, player=world.player: True
    if ex == "Flooded Faron Woods - Speak to Water Dragon":
        return lambda state, player=world.player: True
    if ex == "Faron Silent Realm - Trial Gate":
        return lambda state, player=world.player: True
    if ex == "Eldin Volcano - Volcano Entry - Fly to Sky":
        return lambda state, player=world.player: True
    if ex == "Eldin Volcano - Volcano Entry - Volcano East":
        return lambda state, player=world.player: True
    if ex == "Eldin Volcano - Volcano Entry - Volcano Ascent":
        return lambda state, player=world.player: state.has("Bomb Bag", player, 1)
    if ex == "Eldin Volcano - Volcano Entry - Speak to Gossip Stone":
        return lambda state, player=world.player: True
    if ex == "Eldin Volcano - Volcano East - Fly to Sky":
        return lambda state, player=world.player: True
    if ex == "Eldin Volcano - Volcano East - Volcano Entry":
        return lambda state, player=world.player: state.has(
            "Bomb Bag", player, 1
        ) or state.has("Clawshots", player, 1)
    if ex == "Eldin Volcano - Volcano East - Volcano Ascent":
        return lambda state, player=world.player: state.has("Bomb Bag", player, 1) or (
            state.has("Progressive Beetle", player, 2)
        )
    if ex == "Eldin Volcano - Volcano East - Mogma Cave":
        return lambda state, player=world.player: True
    if ex == "Eldin Volcano - Volcano Ascent - Fly to Sky":
        return lambda state, player=world.player: True
    if ex == "Eldin Volcano - Volcano Ascent - Volcano Entry":
        return lambda state, player=world.player: True
    if ex == "Eldin Volcano - Volcano Ascent - Volcano East":
        return lambda state, player=world.player: True
    if ex == "Eldin Volcano - Volcano Ascent - Thrill Digger Cliff":
        return lambda state, player=world.player: (
            state.has("Progressive Slingshot", player, 1)
        ) or (state.has("Progressive Bow", player, 1))
    if ex == "Eldin Volcano - Volcano Ascent - Bottom of Sand Slide":
        return lambda state, player=world.player: state.has("Bomb Bag", player, 1) or (
            state.has("Progressive Beetle", player, 2)
        )
    if ex == "Eldin Volcano - Volcano Ascent - Trial Gate in Eldin Volcano":
        return lambda state, player=world.player: state.has(
            "Goddess's Harp", player, 1
        ) and state.has("Din's Power", player, 1)
    if ex == "Eldin Volcano - Thrill Digger Cliff - Volcano Ascent":
        return lambda state, player=world.player: True
    if ex == "Eldin Volcano - Thrill Digger Cliff - Thrill Digger Cave":
        return lambda state, player=world.player: True
    if ex == "Eldin Volcano - Thrill Digger Cliff - Near Temple Entrance":
        return lambda state, player=world.player: True
    if ex == "Eldin Volcano - Thrill Digger Cave - Exit Thrill Digger Cave":
        return lambda state, player=world.player: True
    if ex == "Eldin Volcano - Near Temple Entrance - Fly to Sky":
        return lambda state, player=world.player: True
    if ex == "Eldin Volcano - Near Temple Entrance - Thrill Digger Cliff":
        return lambda state, player=world.player: state.can_reach_region(
            "Eldin Volcano - Thrill Digger Cliff", player
        )
    if ex == "Eldin Volcano - Near Temple Entrance - Hot Cave":
        return lambda state, player=world.player: True
    if ex == "Eldin Volcano - Near Temple Entrance - Dungeon Entrance in Eldin Volcano":
        return lambda state, player=world.player: state.has("Key Piece", player, 5)
    if ex == "Eldin Volcano - Hot Cave - Near Temple Entrance":
        return lambda state, player=world.player: state.can_reach_region(
            "Eldin Volcano - Near Temple Entrance", player
        )
    if ex == "Eldin Volcano - Hot Cave - Sand Slide":
        return lambda state, player=world.player: (
            state.can_reach_region("Eldin Volcano - Hot Cave", player)
            and (
                state.has("Fireshield Earrings", player, 1)
                or state._ss_option_damage_multiplier_under_12(player)
            )
        )
    if ex == "Eldin Volcano - Hot Cave - Upper Path out of Hot Cave":
        return lambda state, player=world.player: state.has(
            "Fireshield Earrings", player, 1
        )
    if ex == "Eldin Volcano - Sand Slide - Bottom of Sand Slide":
        return lambda state, player=world.player: True
    if ex == "Eldin Volcano - Bottom of Sand Slide - Volcano Ascent":
        return lambda state, player=world.player: True
    if ex == "Eldin Volcano - Bottom of Sand Slide - Hot Cave":
        return lambda state, player=world.player: True
    if ex == "Mogma Turf - Entry - Use First Air Vent":
        return lambda state, player=world.player: True
    if ex == "Mogma Turf - Entry - Use Digging Air Vent":
        return lambda state, player=world.player: (
            state.has("Progressive Mitts", player, 1)
        )
    if ex == "Mogma Turf - After Digging Air Vent - Jump off Ledge":
        return lambda state, player=world.player: True
    if ex == "Mogma Turf - After Digging Air Vent - Use Last Air Vent":
        return lambda state, player=world.player: True
    if ex == "Volcano Summit - Summit - Path out of Summit before Sandy Slope":
        return lambda state, player=world.player: True
    if ex == "Volcano Summit - Summit - Path out of Summit after Lava Platforms":
        return lambda state, player=world.player: state.has(
            "Fireshield Earrings", player, 1
        )
    if ex == "Volcano Summit - Summit - Upper Path out of Summit after Lava Platforms":
        return lambda state, player=world.player: state.has(
            "Fireshield Earrings", player, 1
        )
    if ex == "Volcano Summit - Waterfall - Path out of Waterfall":
        return lambda state, player=world.player: True
    if ex == "Volcano Summit - Before First Frog - Path across from First Frog":
        return lambda state, player=world.player: True
    if ex == "Volcano Summit - Before First Frog - Pass First Frog":
        return lambda state, player=world.player: (
            state.can_reach_region("Volcano Summit - Before First Frog", player)
            and (
                (
                    (state.has("Progressive Pouch", player, 1))
                    and state.has("Empty Bottle", player, 1)
                )
            )
        )
    if ex == "Volcano Summit - Between Frogs - Pass First Frog":
        return lambda state, player=world.player: (
            state.can_reach_region("Volcano Summit - Before First Frog", player)
            and (
                (
                    (state.has("Progressive Pouch", player, 1))
                    and state.has("Empty Bottle", player, 1)
                )
            )
        )
    if ex == "Volcano Summit - Between Frogs - Pass Second Frog":
        return lambda state, player=world.player: (
            state.can_reach_region("Volcano Summit - Between Frogs", player)
            and (
                state.has("Clawshots", player, 1)
                and (
                    (state.has("Progressive Pouch", player, 1))
                    and state.has("Empty Bottle", player, 1)
                )
            )
        )
    if ex == "Volcano Summit - After Second Frog - Fly to Sky":
        return lambda state, player=world.player: True
    if ex == "Volcano Summit - After Second Frog - Pass Second Frog":
        return lambda state, player=world.player: (
            state.can_reach_region("Volcano Summit - Between Frogs", player)
            and (
                state.has("Clawshots", player, 1)
                and (
                    (state.has("Progressive Pouch", player, 1))
                    and state.has("Empty Bottle", player, 1)
                )
            )
        )
    if ex == "Volcano Summit - After Second Frog - Dungeon Entrance in Volcano Summit":
        return lambda state, player=world.player: True
    if ex == "Bokoblin Base - Prison - Speak to Gossip Stone":
        return lambda state, player=world.player: True
    if ex == "Bokoblin Base - Prison - Dig to Volcano":
        return lambda state, player=world.player: (
            state.has("Progressive Mitts", player, 2)
        )
    if ex == "Bokoblin Base - Volcano - Dig to Prison":
        return lambda state, player=world.player: (
            state.has("Progressive Mitts", player, 2)
        )
    if ex == "Bokoblin Base - Volcano - Use Air Vent":
        return lambda state, player=world.player: state.has(
            "Clawshots", player, 1
        ) and (
            state.has("Bomb Bag", player, 1)
            or (
                state.has("Whip", player, 1)
                and (
                    state.can_reach_region("Bokoblin Base - Volcano", player)
                    and (
                        state.has("Bomb Bag", player, 1)
                        or (state.has("Progressive Slingshot", player, 1))
                        or (state.has("Progressive Bow", player, 1))
                    )
                )
            )
        )
    if ex == "Bokoblin Base - Top of Volcano - Path through Hot Cave":
        return lambda state, player=world.player: state.has(
            "Bomb Bag", player, 1
        ) and state.has("Fireshield Earrings", player, 1)
    if ex == "Bokoblin Base - Summit - Dragon's Lair":
        return lambda state, player=world.player: True
    if ex == "Bokoblin Base - Dragon's Lair - Exit Dragon's Lair":
        return lambda state, player=world.player: True
    if ex == "Bokoblin Base - Dragon's Lair - Exit Bokoblin Base":
        return lambda state, player=world.player: (
            state.can_reach_region("Bokoblin Base - Dragon's Lair", player)
            and (
                (state.has("Progressive Beetle", player, 1))
                or (state.has("Progressive Bow", player, 1))
            )
        )
    if ex == "Eldin Silent Realm - Trial Gate":
        return lambda state, player=world.player: True
    if ex == "Lanayru Mine - Landing - Fly to Sky":
        return lambda state, player=world.player: True
    if ex == "Lanayru Mine - Landing - Clawshot Path to Caves":
        return lambda state, player=world.player: state.has("Clawshots", player, 1)
    if ex == "Lanayru Mine - Landing - Pass Statues in Mine":
        return lambda state, player=world.player: (
            (
                (
                    (state.has("Progressive Slingshot", player, 1))
                    or (state.has("Progressive Beetle", player, 1))
                    or (state.has("Progressive Bow", player, 1))
                )
                or state.has("Clawshots", player, 1)
            )
            or (state.has("Progressive Sword", player, 1))
            or state.has("Whip", player, 1)
            or state.has("Bomb Bag", player, 1)
        ) and (
            state.has("Bomb Bag", player, 1)
            or (state.has("Progressive Beetle", player, 2))
        )
    if ex == "Lanayru Mine - Door to Caves - Clawshot Path to Mine":
        return lambda state, player=world.player: state.has("Clawshots", player, 1)
    if ex == "Lanayru Mine - Door to Caves - Door to Caves":
        return lambda state, player=world.player: True
    if ex == "Lanayru Mine - Ending - Pass Statues in Mine":
        return lambda state, player=world.player: state.has("Bomb Bag", player, 1) or (
            state.has("Progressive Beetle", player, 2)
        )
    if ex == "Lanayru Mine - Ending - Minecart Ride out of Mine":
        return lambda state, player=world.player: True
    if ex == "Lanayru Desert - Desert Entry - Fly to Sky":
        return lambda state, player=world.player: True
    if ex == "Lanayru Desert - Desert Entry - Minecart Ride out of Desert":
        return lambda state, player=world.player: state.has(
            "Bomb Bag", player, 1
        ) and state.can_reach_region("Lanayru Mine - Ending", player)
    if ex == "Lanayru Desert - Desert Entry - Sand Oasis":
        return lambda state, player=world.player: (
            state.has("Progressive Beetle", player, 2)
        ) or state.has("Clawshots", player, 1)
    if ex == "Lanayru Desert - Desert Entry - Stone Cache":
        return lambda state, player=world.player: state.has(
            "Clawshots", player, 1
        ) or state._ss_option_lmf_open(player)
    if ex == "Lanayru Desert - Sand Oasis - Fly to Sky":
        return lambda state, player=world.player: True
    if ex == "Lanayru Desert - Sand Oasis - Desert Entry":
        return lambda state, player=world.player: True
    if ex == "Lanayru Desert - Sand Oasis - Path to Temple of Time":
        return lambda state, player=world.player: True
    if ex == "Lanayru Desert - Sand Oasis - Raised Entrance to Caves":
        return lambda state, player=world.player: state.has("Clawshots", player, 1)
    if ex == "Lanayru Desert - Higher Ledge in Sand Oasis - Sand Oasis":
        return lambda state, player=world.player: True
    if ex == "Lanayru Desert - Higher Ledge in Sand Oasis - Path to Caves":
        return lambda state, player=world.player: True
    if ex == "Lanayru Desert - Temple of Time - Desert Gorge - Fly to Sky":
        return lambda state, player=world.player: True
    if ex == "Lanayru Desert - Temple of Time - Desert Gorge - Path to Sand Oasis":
        return lambda state, player=world.player: True
    if (
        ex
        == "Lanayru Desert - Temple of Time - Desert Gorge - Minecart through Tree Root"
    ):
        return lambda state, player=world.player: (
            state.has("Progressive Beetle", player, 2)
        )
    if ex == "Lanayru Desert - Temple of Time - Temple - Fly to Sky":
        return lambda state, player=world.player: True
    if ex == "Lanayru Desert - Temple of Time - Temple - Minecart to Desert Gorge":
        return lambda state, player=world.player: (
            (
                (state.has("Progressive Slingshot", player, 1))
                or (state.has("Progressive Beetle", player, 1))
                or (state.has("Progressive Bow", player, 1))
            )
            or state.has("Clawshots", player, 1)
        )
    if ex == "Lanayru Desert - Temple of Time - Temple - Path to North Desert":
        return lambda state, player=world.player: (
            (
                (state.has("Progressive Slingshot", player, 1))
                or (state.has("Progressive Beetle", player, 1))
                or (state.has("Progressive Bow", player, 1))
            )
            or state.has("Clawshots", player, 1)
        )
    if ex == "Lanayru Desert - North Desert - Fly to Sky":
        return lambda state, player=world.player: True
    if ex == "Lanayru Desert - North Desert - Path to Temple of Time":
        return lambda state, player=world.player: True
    if ex == "Lanayru Desert - North Desert - Stone Cache":
        return lambda state, player=world.player: True
    if ex == "Lanayru Desert - North Desert - Door to Lightning Node":
        return lambda state, player=world.player: True
    if ex == "Lanayru Desert - North Desert - Dungeon Entrance in Lanayru Desert":
        return lambda state, player=world.player: (
            state.can_reach_region("Lanayru Desert - North Desert", player)
            and (
                state._ss_option_lmf_open(player)
                or (
                    state._ss_option_lmf_main_node(player)
                    and (state.has("Progressive Sword", player, 1))
                )
                or (
                    state.can_reach_region("Lanayru Desert - North Desert", player)
                    and (
                        (
                            state.can_reach_region("Lanayru Desert - Fire Node", player)
                            and (
                                state.has("Bomb Bag", player, 1)
                                and (state.has("Progressive Beetle", player, 2))
                                and (
                                    (
                                        (state.has("Progressive Sword", player, 1))
                                        or (state.has("Progressive Bow", player, 1))
                                        or state.has("Bomb Bag", player, 1)
                                    )
                                )
                                and (state.has("Progressive Sword", player, 1))
                            )
                        )
                        and (
                            state.can_reach_region(
                                "Lanayru Desert - Lightning Node", player
                            )
                            and (
                                state.has("Bomb Bag", player, 1)
                                and (state.has("Progressive Sword", player, 1))
                            )
                        )
                        and (
                            state.can_reach_region(
                                "Lanayru Desert - North Desert", player
                            )
                            and (
                                state.has("Bomb Bag", player, 1)
                                and (state.has("Progressive Sword", player, 1))
                            )
                        )
                    )
                )
            )
        )
    if ex == "Lanayru Desert - North Desert - Trial Gate in Lanayru Desert":
        return lambda state, player=world.player: state.has(
            "Goddess's Harp", player, 1
        ) and state.has("Nayru's Wisdom", player, 1)
    if ex == "Lanayru Desert - Stone Cache - Fly to Sky":
        return lambda state, player=world.player: True
    if ex == "Lanayru Desert - Stone Cache - Desert Entry":
        return lambda state, player=world.player: True
    if ex == "Lanayru Desert - Stone Cache - North Desert":
        return lambda state, player=world.player: True
    if ex == "Lanayru Desert - Stone Cache - Door to Fire Node":
        return lambda state, player=world.player: True
    if ex == "Lanayru Desert - Fire Node - Exit Fire Node":
        return lambda state, player=world.player: True
    if ex == "Lanayru Desert - Lightning Node - Exit Lightning Node":
        return lambda state, player=world.player: True
    if ex == "Lanayru Caves - Caves - North Exit":
        return lambda state, player=world.player: True
    if ex == "Lanayru Caves - Caves - East Exit":
        return lambda state, player=world.player: True
    if ex == "Lanayru Caves - Caves - South Exit past Crawlspace":
        return lambda state, player=world.player: True
    if ex == "Lanayru Caves - Caves - West Exit by Clawshot Target":
        return lambda state, player=world.player: state.has(
            "Clawshots", player, 1
        ) and state.has("Lanayru Caves Small Key", player, 1)
    if ex == "Lanayru Caves - Past Locked Door - Path away from Door":
        return lambda state, player=world.player: True
    if ex == "Lanayru Caves - Past Locked Door - Through Door":
        return lambda state, player=world.player: state.has(
            "Lanayru Caves Small Key", player, 1
        )
    if ex == "Lanayru Caves - Past Crawlspace - Path away from Crawlspace":
        return lambda state, player=world.player: True
    if ex == "Lanayru Caves - Past Crawlspace - Through Crawlspace":
        return lambda state, player=world.player: state.has("Bomb Bag", player, 1)
    if ex == "Lanayru Gorge - Gorge - Fly to Sky":
        return lambda state, player=world.player: True
    if ex == "Lanayru Gorge - Gorge - Path to Caves":
        return lambda state, player=world.player: True
    if ex == "Lanayru Sand Sea - Door to Caves - Clawshot Path to Harbor":
        return lambda state, player=world.player: state.has("Clawshots", player, 1)
    if ex == "Lanayru Sand Sea - Door to Caves - Door to Caves":
        return lambda state, player=world.player: state.has(
            "Lanayru Caves Small Key", player, 1
        )
    if ex == "Lanayru Sand Sea - Ancient Harbor - Fly to Sky":
        return lambda state, player=world.player: True
    if ex == "Lanayru Sand Sea - Ancient Harbor - Clawshot Path to Caves":
        return lambda state, player=world.player: state.has("Clawshots", player, 1)
    if ex == "Lanayru Sand Sea - Ancient Harbor - Boat to Sea":
        return lambda state, player=world.player: (
            (
                (
                    (state.has("Progressive Slingshot", player, 1))
                    or (state.has("Progressive Beetle", player, 1))
                    or (state.has("Progressive Bow", player, 1))
                )
                or state.has("Clawshots", player, 1)
            )
            or (state.has("Progressive Sword", player, 1))
            or state.has("Whip", player, 1)
            or state.has("Bomb Bag", player, 1)
        )
    if ex == "Lanayru Sand Sea - Sea - Dock at Ancient Harbor":
        return lambda state, player=world.player: True
    if ex == "Lanayru Sand Sea - Sea - Dock at Skipper's Retreat":
        return lambda state, player=world.player: True
    if ex == "Lanayru Sand Sea - Sea - Dock at Shipyard":
        return lambda state, player=world.player: True
    if ex == "Lanayru Sand Sea - Sea - Dock at Pirate Stronghold":
        return lambda state, player=world.player: True
    if ex == "Lanayru Sand Sea - Sea - Dungeon Entrance in Lanayru Sand Sea":
        return lambda state, player=world.player: state.has(
            "Sea Chart", player, 1
        ) and (state.has("Progressive Sword", player, 1))
    if ex == "Lanayru Sand Sea - Skipper's Retreat - Dock - Fly to Sky":
        return lambda state, player=world.player: True
    if ex == "Lanayru Sand Sea - Skipper's Retreat - Dock - Boat to Sea":
        return lambda state, player=world.player: True
    if ex == "Lanayru Sand Sea - Skipper's Retreat - Dock - After Rock":
        return lambda state, player=world.player: state.has(
            "Clawshots", player, 1
        ) and (
            state.has("Bomb Bag", player, 1)
            or (state.has("Progressive Beetle", player, 2))
        )
    if ex == "Lanayru Sand Sea - Skipper's Retreat - After Rock - Dock":
        return lambda state, player=world.player: True
    if (
        ex
        == "Lanayru Sand Sea - Skipper's Retreat - After Rock - Top of Skipper's Retreat"
    ):
        return (
            lambda state, player=world.player: state.has("Whip", player, 1)
            and state.has("Clawshots", player, 1)
            and (
                (state.has("Progressive Slingshot", player, 1))
                or (state.has("Progressive Beetle", player, 1))
                or (state.has("Progressive Bow", player, 1))
            )
        )
    if ex == "Lanayru Sand Sea - Skipper's Retreat - Top of Skipper's Retreat - Shack":
        return lambda state, player=world.player: state.has("Clawshots", player, 1)
    if ex == "Lanayru Sand Sea - Skipper's Retreat - Shack - Top of Skipper's Retreat":
        return lambda state, player=world.player: state.has("Clawshots", player, 1)
    if ex == "Lanayru Sand Sea - Skipper's Retreat - Shack - After Rock":
        return lambda state, player=world.player: True
    if ex == "Lanayru Sand Sea - Skipper's Retreat - Shack - Skydive":
        return lambda state, player=world.player: True
    if ex == "Lanayru Sand Sea - Skipper's Retreat - Skydive - Dock":
        return lambda state, player=world.player: state.has("Clawshots", player, 1)
    if ex == "Lanayru Sand Sea - Shipyard - Fly to Sky":
        return lambda state, player=world.player: True
    if ex == "Lanayru Sand Sea - Shipyard - Boat to Sea":
        return lambda state, player=world.player: True
    if ex == "Lanayru Sand Sea - Pirate Stronghold - Fly to Sky":
        return lambda state, player=world.player: True
    if ex == "Lanayru Sand Sea - Pirate Stronghold - Boat to Sea":
        return lambda state, player=world.player: True
    if ex == "Lanayru Silent Realm - Trial Gate":
        return lambda state, player=world.player: True
    if ex == "Skyview - First Room - Dungeon Exit":
        return lambda state, player=world.player: True
    if ex == "Skyview - First Room - Second Room":
        return lambda state, player=world.player: (
            (state.has("Progressive Sword", player, 1))
            or state.has("Bomb Bag", player, 1)
        ) and (
            state.has("Water Dragon's Scale", player, 1)
            or state.has("Bomb Bag", player, 1)
            or (
                (
                    (
                        (state.has("Progressive Slingshot", player, 1))
                        or (state.has("Progressive Beetle", player, 1))
                        or (state.has("Progressive Bow", player, 1))
                    )
                    or state.has("Clawshots", player, 1)
                )
                and (state.has("Progressive Sword", player, 1))
            )
        )
    if ex == "Skyview - Second Room - First Room":
        return lambda state, player=world.player: True
    if ex == "Skyview - Second Room - Main Room":
        return lambda state, player=world.player: state.has(
            "Skyview Small Key", player, 1
        ) and (
            (
                (
                    (state.has("Progressive Slingshot", player, 1))
                    or (state.has("Progressive Beetle", player, 1))
                    or (state.has("Progressive Bow", player, 1))
                )
                or state.has("Clawshots", player, 1)
            )
            or (state.has("Progressive Sword", player, 2))
            or state.has("Whip", player, 1)
        )
    if ex == "Skyview - Main Room - Dungeon Exit":
        return lambda state, player=world.player: True
    if ex == "Skyview - Main Room - Second Room":
        return lambda state, player=world.player: True
    if ex == "Skyview - Main Room - Boss Door Area":
        return (
            lambda state, player=world.player: state.has("Skyview Small Key", player, 2)
            and (
                (state.has("Progressive Sword", player, 1))
                or state.has("Bomb Bag", player, 1)
            )
            and (
                (state.has("Progressive Sword", player, 2))
                or (state.has("Progressive Beetle", player, 1))
                or (state.has("Progressive Bow", player, 1))
                or state.has("Water Dragon's Scale", player, 1)
                or state.has("Bomb Bag", player, 1)
            )
            and (
                (
                    (state.has("Progressive Sword", player, 6))
                    or (
                        (state.has("Progressive Sword", player, 2))
                        and state._ss_option_upgraded_skyward_strike(player)
                    )
                )
                or (state.has("Progressive Beetle", player, 2))
                or (state.has("Progressive Bow", player, 1))
            )
        )
    if ex == "Skyview - Boss Door Area - Dungeon Exit":
        return lambda state, player=world.player: True
    if ex == "Skyview - Boss Door Area - Main Room":
        return lambda state, player=world.player: True
    if ex == "Skyview - Boss Door Area - Boss Room":
        return lambda state, player=world.player: state.has(
            "Skyview Boss Key", player, 1
        )
    if ex == "Skyview - Boss Room - Boss Door Area":
        return lambda state, player=world.player: True
    if ex == "Skyview - Boss Room - Skyview Spring":
        return lambda state, player=world.player: (
            state.can_reach_region("Skyview - Boss Room", player)
            and ((state.has("Progressive Sword", player, 1)))
        )
    if ex == "Skyview - Skyview Spring - Boss Room":
        return lambda state, player=world.player: True
    if ex == "Skyview - Skyview Spring - Strike Crest":
        return lambda state, player=world.player: (
            state.can_reach_region("Skyview - Skyview Spring", player)
            and ((state.has("Progressive Sword", player, 2)))
        )
    if ex == "Earth Temple - First Room - Dungeon Exit":
        return lambda state, player=world.player: True
    if ex == "Earth Temple - First Room - Main Room":
        return lambda state, player=world.player: (
            state.has("Progressive Bow", player, 1)
        ) or (state.has("Progressive Beetle", player, 1))
    if ex == "Earth Temple - Main Room - Dungeon Exit":
        return lambda state, player=world.player: True
    if ex == "Earth Temple - Main Room - First Room":
        return lambda state, player=world.player: True
    if ex == "Earth Temple - Main Room - Room with Slopes":
        return lambda state, player=world.player: (
            state.can_reach_region("Earth Temple - Main Room", player)
            and (
                (state.has("Progressive Slingshot", player, 1))
                or (state.has("Progressive Bow", player, 1))
                or (
                    (state.has("Progressive Sword", player, 6))
                    or (
                        (state.has("Progressive Sword", player, 2))
                        and state._ss_option_upgraded_skyward_strike(player)
                    )
                )
                or state.has("Clawshots", player, 1)
                or (
                    (state.has("Progressive Beetle", player, 1))
                    and (
                        (state.has("Progressive Sword", player, 1))
                        or state.has("Bomb Bag", player, 1)
                    )
                )
            )
        ) and (
            state.can_reach_region("Earth Temple - Main Room", player)
            and (
                (state.has("Progressive Beetle", player, 1))
                and (
                    (state.has("Progressive Beetle", player, 2))
                    or state.has("Bomb Bag", player, 1)
                )
            )
        )
    if ex == "Earth Temple - Room with Slopes - Main Room":
        return lambda state, player=world.player: True
    if ex == "Earth Temple - Room with Slopes - Boss Door Area":
        return lambda state, player=world.player: (
            state.has("Progressive Beetle", player, 2)
        ) or (
            (state.has("Progressive Mitts", player, 1))
            and state.has("Bomb Bag", player, 1)
        )
    if ex == "Earth Temple - Boss Door Area - Dungeon Exit":
        return lambda state, player=world.player: True
    if ex == "Earth Temple - Boss Door Area - Room with Slopes":
        return lambda state, player=world.player: True
    if ex == "Earth Temple - Boss Door Area - Boss Room":
        return lambda state, player=world.player: state.has(
            "Earth Temple Boss Key", player, 1
        )
    if ex == "Earth Temple - Boss Room - Boss Door Area":
        return lambda state, player=world.player: True
    if ex == "Earth Temple - Boss Room - Earth Spring":
        return lambda state, player=world.player: (
            state.can_reach_region("Earth Temple - Boss Room", player)
            and (
                state.has("Bomb Bag", player, 1)
                and (state.has("Progressive Sword", player, 1))
            )
        )
    if ex == "Earth Temple - Earth Spring - Boss Room":
        return lambda state, player=world.player: True
    if ex == "Earth Temple - Earth Spring - Strike Crest":
        return lambda state, player=world.player: (
            state.can_reach_region("Earth Temple - Earth Spring", player)
            and ((state.has("Progressive Sword", player, 2)))
        )
    if ex == "Lanayru Mining Facility - First Room - Dungeon Exit":
        return lambda state, player=world.player: True
    if ex == "Lanayru Mining Facility - First Room - Second Room":
        return lambda state, player=world.player: (
            state.has("Progressive Beetle", player, 2)
        )
    if ex == "Lanayru Mining Facility - Second Room - First Room":
        return lambda state, player=world.player: True
    if ex == "Lanayru Mining Facility - Second Room - Front Main Room":
        return lambda state, player=world.player: True
    if ex == "Lanayru Mining Facility - Second Room - Key Locked Room":
        return lambda state, player=world.player: state.has(
            "Lanayru Mining Facility Small Key", player, 1
        )
    if ex == "Lanayru Mining Facility - Second Room - West Room":
        return lambda state, player=world.player: state.has("Gust Bellows", player, 1)
    if ex == "Lanayru Mining Facility - Key Locked Room - Second Room":
        return lambda state, player=world.player: True
    if ex == "Lanayru Mining Facility - Key Locked Room - Front Main Room":
        return lambda state, player=world.player: (
            state.can_reach_region("Lanayru Mining Facility - Key Locked Room", player)
            and ((state.has("Progressive Beetle", player, 2)))
        ) and (
            (
                (
                    (state.has("Progressive Slingshot", player, 1))
                    or (state.has("Progressive Beetle", player, 1))
                    or (state.has("Progressive Bow", player, 1))
                )
                or state.has("Clawshots", player, 1)
            )
            or (state.has("Progressive Sword", player, 1))
            or state.has("Gust Bellows", player, 1)
            or state.has("Whip", player, 1)
            or state.has("Bomb Bag", player, 1)
        )
    if ex == "Lanayru Mining Facility - West Room - Second Room":
        return lambda state, player=world.player: True
    if ex == "Lanayru Mining Facility - West Room - West Main Room":
        return (
            lambda state, player=world.player: (
                state.can_reach_region("Lanayru Mining Facility - West Room", player)
                and (
                    state.has("Gust Bellows", player, 1)
                    and (
                        (state.has("Progressive Sword", player, 1))
                        or (state.has("Progressive Bow", player, 1))
                    )
                )
            )
            and (
                state.has("Gust Bellows", player, 1)
                and (state.has("Progressive Sword", player, 1))
            )
            and (
                (state.has("Progressive Sword", player, 2))
                or (state.has("Progressive Slingshot", player, 1))
                or (state.has("Progressive Bow", player, 1))
                or state.has("Whip", player, 1)
            )
        )
    if ex == "Lanayru Mining Facility - Front Main Room - Dungeon Exit":
        return lambda state, player=world.player: True
    if ex == "Lanayru Mining Facility - Front Main Room - Second Room":
        return lambda state, player=world.player: True
    if ex == "Lanayru Mining Facility - West Main Room - West Room":
        return lambda state, player=world.player: True
    if ex == "Lanayru Mining Facility - West Main Room - Front Main Room":
        return lambda state, player=world.player: True
    if ex == "Lanayru Mining Facility - West Main Room - Spike Maze":
        return lambda state, player=world.player: state.has("Gust Bellows", player, 1)
    if ex == "Lanayru Mining Facility - Spike Maze - Boss Door Area":
        return lambda state, player=world.player: state.has(
            "Gust Bellows", player, 1
        ) and (
            (
                (
                    (state.has("Progressive Slingshot", player, 1))
                    or (state.has("Progressive Beetle", player, 1))
                    or (state.has("Progressive Bow", player, 1))
                )
                or state.has("Clawshots", player, 1)
            )
            or (state.has("Progressive Sword", player, 1))
            or state.has("Whip", player, 1)
            or state.has("Bomb Bag", player, 1)
        )
    if ex == "Lanayru Mining Facility - Boss Door Area - Dungeon Exit":
        return lambda state, player=world.player: True
    if ex == "Lanayru Mining Facility - Boss Door Area - Boss Key Room":
        return lambda state, player=world.player: state.has("Gust Bellows", player, 1)
    if ex == "Lanayru Mining Facility - Boss Door Area - Boss Room":
        return lambda state, player=world.player: state.has(
            "Lanayru Mining Facility Boss Key", player, 1
        )
    if ex == "Lanayru Mining Facility - Boss Key Room - Boss Door Area":
        return (
            lambda state, player=world.player: (
                state.can_reach_region(
                    "Lanayru Mining Facility - Boss Key Room", player
                )
                and (
                    state.has("Gust Bellows", player, 1)
                    and state.has("Bomb Bag", player, 1)
                    and (
                        (state.has("Progressive Sword", player, 1))
                        or (state.has("Progressive Bow", player, 1))
                    )
                    and (
                        (state.has("Progressive Sword", player, 1))
                        or (
                            (
                                (state.has("Progressive Slingshot", player, 1))
                                or (state.has("Progressive Beetle", player, 1))
                                or (state.has("Progressive Bow", player, 1))
                            )
                            or state.has("Clawshots", player, 1)
                        )
                    )
                )
            )
            and (
                state.has("Gust Bellows", player, 1)
                and (state.has("Progressive Sword", player, 1))
            )
            and (
                (
                    (
                        (state.has("Progressive Slingshot", player, 1))
                        or (state.has("Progressive Beetle", player, 1))
                        or (state.has("Progressive Bow", player, 1))
                    )
                    or state.has("Clawshots", player, 1)
                )
                or (state.has("Progressive Sword", player, 1))
                or state.has("Whip", player, 1)
                or state.has("Bomb Bag", player, 1)
            )
        )
    if ex == "Lanayru Mining Facility - Boss Room - Boss Door Area":
        return lambda state, player=world.player: True
    if ex == "Lanayru Mining Facility - Boss Room - Hall of Ancient Robots":
        return lambda state, player=world.player: (
            state.can_reach_region("Lanayru Mining Facility - Boss Room", player)
            and (
                (
                    state.has("Gust Bellows", player, 1)
                    and (state.has("Progressive Sword", player, 1))
                )
            )
        )
    if ex == "Lanayru Mining Facility - Hall of Ancient Robots - Boss Room":
        return lambda state, player=world.player: True
    if (
        ex
        == "Lanayru Mining Facility - Hall of Ancient Robots - Exit Hall of Ancient Robots"
    ):
        return lambda state, player=world.player: (
            state.can_reach_region(
                "Lanayru Mining Facility - Hall of Ancient Robots", player
            )
            and (
                (state.has("Progressive Beetle", player, 1))
                or (state.has("Progressive Bow", player, 1))
            )
        )
    if ex == "Ancient Cistern - Main Room - Dungeon Exit":
        return lambda state, player=world.player: True
    if ex == "Ancient Cistern - Main Room - East Room":
        return lambda state, player=world.player: True
    if ex == "Ancient Cistern - Main Room - Past Waterfall":
        return lambda state, player=world.player: state.has(
            "Water Dragon's Scale", player, 1
        ) and state.has("Whip", player, 1)
    if ex == "Ancient Cistern - Main Room - Statue":
        return lambda state, player=world.player: state.has(
            "Ancient Cistern Small Key", player, 2
        ) or (
            state.can_reach_region("Ancient Cistern - Main Room", player)
            and (
                state.has("Whip", player, 1)
                and (
                    (
                        state.can_reach_region("Ancient Cistern - Past Gutters", player)
                        and (True)
                    )
                    or state.has("Clawshots", player, 1)
                )
            )
        )
    if ex == "Ancient Cistern - Statue - Main Room":
        return lambda state, player=world.player: True
    if ex == "Ancient Cistern - Statue - Basement":
        return lambda state, player=world.player: (
            state.can_reach_region("Ancient Cistern - Main Room", player)
            and (
                state.has("Whip", player, 1)
                and (
                    (
                        state.can_reach_region("Ancient Cistern - Past Gutters", player)
                        and (True)
                    )
                    or state.has("Clawshots", player, 1)
                )
            )
        )
    if ex == "Ancient Cistern - Statue - Boss Room":
        return lambda state, player=world.player: state.has(
            "Whip", player, 1
        ) and state.has("Ancient Cistern Boss Key", player, 1)
    if ex == "Ancient Cistern - East Room - Main Room":
        return lambda state, player=world.player: True
    if ex == "Ancient Cistern - Past Waterfall - Main Room":
        return lambda state, player=world.player: state.has(
            "Water Dragon's Scale", player, 1
        )
    if ex == "Ancient Cistern - Past Waterfall - Gutters":
        return lambda state, player=world.player: state.has("Whip", player, 1)
    if ex == "Ancient Cistern - Gutters - Past Gutters":
        return lambda state, player=world.player: (
            state.can_reach_region("Ancient Cistern - Gutters", player)
            and (
                state.has("Water Dragon's Scale", player, 1)
                and state.has("Whip", player, 1)
                and (
                    (state.has("Progressive Beetle", player, 1))
                    or (state.has("Progressive Bow", player, 1))
                )
            )
        ) and state.has("Ancient Cistern Small Key", player, 2)
    if ex == "Ancient Cistern - Past Gutters - Dungeon Exit":
        return lambda state, player=world.player: True
    if ex == "Ancient Cistern - Past Gutters - Main Room":
        return lambda state, player=world.player: (
            state.can_reach_region("Ancient Cistern - Past Gutters", player) and (True)
        )
    if ex == "Ancient Cistern - Basement - Statue":
        return lambda state, player=world.player: True
    if ex == "Ancient Cistern - Boss Room - Statue":
        return lambda state, player=world.player: True
    if ex == "Ancient Cistern - Boss Room - Flame Room":
        return lambda state, player=world.player: (
            state.can_reach_region("Ancient Cistern - Boss Room", player)
            and (
                state.has("Whip", player, 1)
                and (
                    (state.has("Progressive Sword", player, 1))
                    or state.has("Bomb Bag", player, 1)
                    or (state.has("Progressive Bow", player, 1))
                )
            )
        )
    if ex == "Ancient Cistern - Flame Room - Boss Room":
        return lambda state, player=world.player: True
    if ex == "Ancient Cistern - Flame Room - Strike Crest":
        return lambda state, player=world.player: (
            state.can_reach_region("Ancient Cistern - Flame Room", player)
            and ((state.has("Progressive Sword", player, 2)))
        )
    if ex == "Sandship - Deck - Dungeon Exit":
        return lambda state, player=world.player: True
    if ex == "Sandship - Deck - Corridor":
        return lambda state, player=world.player: True
    if ex == "Sandship - Deck - Boss Key Room":
        return lambda state, player=world.player: (
            state.can_reach_region("Sandship - Deck", player)
            and (
                (state.has("Progressive Bow", player, 1))
                and (
                    (state.has("Progressive Sword", player, 1))
                    or state.has("Sandship Small Key", player, 2)
                )
            )
        ) and state.has("Sandship Small Key", player, 2)
    if ex == "Sandship - Corridor - Dungeon Exit":
        return lambda state, player=world.player: True
    if ex == "Sandship - Corridor - Deck":
        return lambda state, player=world.player: True
    if ex == "Sandship - Corridor - Near Boss Door":
        return (
            lambda state, player=world.player: (
                state.can_reach_region("Sandship - Deck", player)
                and (
                    (state.has("Progressive Bow", player, 1))
                    and (
                        (state.has("Progressive Sword", player, 1))
                        or state.has("Sandship Small Key", player, 2)
                    )
                )
            )
            or (state.has("Progressive Sword", player, 2))
            or (state.has("Progressive Bow", player, 1))
            or (state.has("Progressive Slingshot", player, 1))
            or state.has("Bomb Bag", player, 1)
        )
    if ex == "Sandship - Corridor - Basement":
        return (
            lambda state, player=world.player: (
                state.can_reach_region("Sandship - Deck", player)
                and (
                    (state.has("Progressive Bow", player, 1))
                    and (
                        (state.has("Progressive Sword", player, 1))
                        or state.has("Sandship Small Key", player, 2)
                    )
                )
            )
            and (state.has("Progressive Sword", player, 1))
            and (state.has("Progressive Bow", player, 1))
        )
    if ex == "Sandship - Corridor - Bow":
        return lambda state, player=world.player: state.has(
            "Sandship Small Key", player, 2
        )
    if ex == "Sandship - Near Boss Door - Dungeon Exit":
        return lambda state, player=world.player: True
    if ex == "Sandship - Near Boss Door - Corridor":
        return lambda state, player=world.player: True
    if ex == "Sandship - Near Boss Door - Boss Room":
        return lambda state, player=world.player: (
            state.can_reach_region("Sandship - Deck", player)
            and (
                (state.has("Progressive Bow", player, 1))
                and (
                    (state.has("Progressive Sword", player, 1))
                    or state.has("Sandship Small Key", player, 2)
                )
            )
        ) and state.has("Sandship Boss Key", player, 1)
    if ex == "Sandship - Basement - Corridor":
        return lambda state, player=world.player: True
    if ex == "Sandship - Bow - Corridor":
        return lambda state, player=world.player: True
    if ex == "Sandship - Boss Key Room - Deck":
        return lambda state, player=world.player: True
    if ex == "Sandship - Boss Room - Near Boss Door":
        return lambda state, player=world.player: True
    if ex == "Sandship - Boss Room - Strike Crest":
        return lambda state, player=world.player: (
            state.can_reach_region("Sandship - Boss Room", player)
            and (
                (
                    state.can_reach_region("Sandship - Boss Room", player)
                    and ((state.has("Progressive Bow", player, 1)))
                )
                and (state.has("Progressive Sword", player, 2))
            )
        )
    if ex == "Fire Sanctuary - First Room - Dungeon Exit":
        return lambda state, player=world.player: True
    if ex == "Fire Sanctuary - First Room - Second Room":
        return lambda state, player=world.player: state.has(
            "Fire Sanctuary Small Key", player, 1
        ) and (
            (
                (
                    (state.has("Progressive Slingshot", player, 1))
                    or (state.has("Progressive Beetle", player, 1))
                    or (state.has("Progressive Bow", player, 1))
                )
                or state.has("Clawshots", player, 1)
            )
            or state.has("Bomb Bag", player, 1)
        )
    if ex == "Fire Sanctuary - Second Room - Dungeon Exit":
        return lambda state, player=world.player: True
    if ex == "Fire Sanctuary - Second Room - First Bridge":
        return lambda state, player=world.player: True
    if ex == "Fire Sanctuary - First Bridge - Second Room":
        return lambda state, player=world.player: True
    if ex == "Fire Sanctuary - First Bridge - Flowing Lava Room":
        return lambda state, player=world.player: (
            (state.has("Progressive Sword", player, 1))
            or state.has("Bomb Bag", player, 1)
        )
    if ex == "Fire Sanctuary - Flowing Lava Room - First Bridge":
        return lambda state, player=world.player: True
    if ex == "Fire Sanctuary - Flowing Lava Room - Upper First Trapped Mogma Room":
        return lambda state, player=world.player: (
            state.has("Progressive Beetle", player, 2)
        )
    if ex == "Fire Sanctuary - Flowing Lava Room - Water Fruit Room":
        return lambda state, player=world.player: (
            state.has("Progressive Beetle", player, 2)
        ) and state.has("Fire Sanctuary Small Key", player, 2)
    if ex == "Fire Sanctuary - Water Fruit Room - Dungeon Exit":
        return lambda state, player=world.player: (
            state.has("Progressive Sword", player, 1)
        )
    if ex == "Fire Sanctuary - Water Fruit Room - Flowing Lava Room":
        return lambda state, player=world.player: True
    if ex == "Fire Sanctuary - Water Fruit Room - Lower First Trapped Mogma Room":
        return lambda state, player=world.player: (
            state.has("Progressive Sword", player, 1)
        )
    if ex == "Fire Sanctuary - Upper First Trapped Mogma Room - Flowing Lava Room":
        return lambda state, player=world.player: True
    if ex == "Fire Sanctuary - Lower First Trapped Mogma Room - Water Fruit Room":
        return lambda state, player=world.player: True
    if (
        ex
        == "Fire Sanctuary - Lower First Trapped Mogma Room - Under Double Magmanos Fight"
    ):
        return lambda state, player=world.player: (
            state.has("Progressive Mitts", player, 2)
        )
    if ex == "Fire Sanctuary - Under Double Magmanos Fight - Dungeon Exit":
        return lambda state, player=world.player: True
    if (
        ex
        == "Fire Sanctuary - Under Double Magmanos Fight - Lower First Trapped Mogma Room"
    ):
        return lambda state, player=world.player: (
            state.has("Progressive Mitts", player, 2)
        )
    if ex == "Fire Sanctuary - Under Double Magmanos Fight - Second Bridge":
        return lambda state, player=world.player: (
            state.has("Progressive Mitts", player, 2)
        ) and state.has("Gust Bellows", player, 1)
    if ex == "Fire Sanctuary - Under Double Magmanos Fight - Boss Door Area":
        return lambda state, player=world.player: state.has(
            "Fire Sanctuary Small Key", player, 3
        )
    if ex == "Fire Sanctuary - Second Bridge - Under Double Magmanos Fight":
        return lambda state, player=world.player: state.has("Clawshots", player, 1)
    if ex == "Fire Sanctuary - Second Bridge - Second Trapped Mogma Room":
        return lambda state, player=world.player: state.has("Clawshots", player, 1)
    if ex == "Fire Sanctuary - Second Trapped Mogma Room - Second Bridge":
        return lambda state, player=world.player: True
    if ex == "Fire Sanctuary - Boss Door Area - Dungeon Exit":
        return lambda state, player=world.player: (
            state.has("Progressive Mitts", player, 2)
        ) and (
            (
                (
                    (state.has("Progressive Slingshot", player, 1))
                    or (state.has("Progressive Beetle", player, 1))
                    or (state.has("Progressive Bow", player, 1))
                )
                or state.has("Clawshots", player, 1)
            )
            or state.has("Bomb Bag", player, 1)
        )
    if ex == "Fire Sanctuary - Boss Door Area - Under Double Magmanos Fight":
        return lambda state, player=world.player: (
            (
                (state.has("Progressive Slingshot", player, 1))
                or (state.has("Progressive Beetle", player, 1))
                or (state.has("Progressive Bow", player, 1))
            )
            or state.has("Clawshots", player, 1)
        ) or state.has("Bomb Bag", player, 1)
    if ex == "Fire Sanctuary - Boss Door Area - Staircase Room":
        return lambda state, player=world.player: (
            state.has("Progressive Mitts", player, 2)
        ) and (
            (
                (
                    (state.has("Progressive Slingshot", player, 1))
                    or (state.has("Progressive Beetle", player, 1))
                    or (state.has("Progressive Bow", player, 1))
                )
                or state.has("Clawshots", player, 1)
            )
            or state.has("Bomb Bag", player, 1)
        )
    if ex == "Fire Sanctuary - Boss Door Area - Boss Room":
        return (
            lambda state, player=world.player: (
                state.has("Progressive Mitts", player, 2)
            )
            and (
                (
                    (
                        (state.has("Progressive Slingshot", player, 1))
                        or (state.has("Progressive Beetle", player, 1))
                        or (state.has("Progressive Bow", player, 1))
                    )
                    or state.has("Clawshots", player, 1)
                )
                or state.has("Bomb Bag", player, 1)
            )
            and state.has("Fire Sanctuary Boss Key", player, 1)
        )
    if ex == "Fire Sanctuary - Staircase Room - Boss Key Room":
        return lambda state, player=world.player: (
            state.can_reach_region("Fire Sanctuary - Staircase Room", player)
            and (
                (
                    (state.has("Progressive Sword", player, 1))
                    or state.has("Bomb Bag", player, 1)
                )
                and state.has("Clawshots", player, 1)
            )
        )
    if ex == "Fire Sanctuary - Boss Key Room - Staircase Room":
        return lambda state, player=world.player: True
    if ex == "Fire Sanctuary - Boss Key Room - Boss Door Area":
        return lambda state, player=world.player: True
    if ex == "Fire Sanctuary - Boss Room - Boss Door Area":
        return lambda state, player=world.player: True
    if ex == "Fire Sanctuary - Boss Room - Flame Room":
        return lambda state, player=world.player: (
            state.can_reach_region("Fire Sanctuary - Boss Room", player)
            and ((state.has("Progressive Sword", player, 1)))
        )
    if ex == "Fire Sanctuary - Flame Room - Boss Room":
        return lambda state, player=world.player: True
    if ex == "Fire Sanctuary - Flame Room - Strike Crest":
        return lambda state, player=world.player: (
            state.can_reach_region("Fire Sanctuary - Flame Room", player)
            and ((state.has("Progressive Sword", player, 2)))
        )
    if ex == "Sky Keep - First Room - Dungeon Exit":
        return lambda state, player=world.player: True
    if ex == "Sky Keep - First Room - Skyview Room":
        return lambda state, player=world.player: True
    if ex == "Sky Keep - Skyview Room - Dungeon Exit":
        return lambda state, player=world.player: (
            state.can_reach_region("Sky Keep - Skyview Room", player)
            and (
                (
                    (state.has("Progressive Beetle", player, 1))
                    or (state.has("Progressive Bow", player, 1))
                )
                and state.has("Whip", player, 1)
                and state.has("Clawshots", player, 1)
                and (
                    state.has("Bomb Bag", player, 1)
                    or (state.has("Progressive Beetle", player, 2))
                    or (state.has("Progressive Bow", player, 1))
                )
                and state.has("Gust Bellows", player, 1)
            )
        )
    if ex == "Sky Keep - Skyview Room - First Room":
        return lambda state, player=world.player: True
    if ex == "Sky Keep - Skyview Room - Lanayru Mining Facility Room":
        return lambda state, player=world.player: (
            state.can_reach_region("Sky Keep - Skyview Room", player)
            and (
                (
                    (state.has("Progressive Beetle", player, 1))
                    or (state.has("Progressive Bow", player, 1))
                )
                and state.has("Whip", player, 1)
                and state.has("Clawshots", player, 1)
                and (
                    state.has("Bomb Bag", player, 1)
                    or (state.has("Progressive Beetle", player, 2))
                    or (state.has("Progressive Bow", player, 1))
                )
                and state.has("Gust Bellows", player, 1)
            )
        )
    if ex == "Sky Keep - Lanayru Mining Facility Room - Dungeon Exit":
        return lambda state, player=world.player: True
    if ex == "Sky Keep - Lanayru Mining Facility Room - Skyview Room":
        return lambda state, player=world.player: True
    if ex == "Sky Keep - Lanayru Mining Facility Room - Earth Temple Room":
        return lambda state, player=world.player: (
            state.can_reach_region("Sky Keep - Lanayru Mining Facility Room", player)
            and (
                (state.has("Progressive Bow", player, 1))
                and state.has("Gust Bellows", player, 1)
            )
        )
    if ex == "Sky Keep - Lanayru Mining Facility Room - Ancient Cistern Room":
        return lambda state, player=world.player: (
            state.can_reach_region("Sky Keep - Lanayru Mining Facility Room", player)
            and (
                (state.has("Progressive Bow", player, 1))
                and state.has("Gust Bellows", player, 1)
            )
        )
    if ex == "Sky Keep - Earth Temple Room - Dungeon Exit":
        return lambda state, player=world.player: True
    if ex == "Sky Keep - Earth Temple Room - Lanayru Mining Facility Room":
        return lambda state, player=world.player: True
    if ex == "Sky Keep - Earth Temple Room - Miniboss Room":
        return lambda state, player=world.player: (
            state.can_reach_region("Sky Keep - Earth Temple Room", player)
            and (
                (state.has("Progressive Mitts", player, 2))
                and (state.has("Progressive Beetle", player, 2))
                and state.has("Bomb Bag", player, 1)
                and (
                    (state.has("Progressive Sword", player, 6))
                    or (
                        (state.has("Progressive Sword", player, 2))
                        and state._ss_option_upgraded_skyward_strike(player)
                    )
                )
            )
        )
    if ex == "Sky Keep - Ancient Cistern Room - Lanayru Mining Facility Room":
        return lambda state, player=world.player: True
    if ex == "Sky Keep - Ancient Cistern Room - Fire Sanctuary Room":
        return lambda state, player=world.player: True
    if ex == "Sky Keep - Miniboss Room - Earth Temple Room":
        return lambda state, player=world.player: True
    if ex == "Sky Keep - Miniboss Room - Fire Sanctuary Room":
        return lambda state, player=world.player: (
            state.can_reach_region("Sky Keep - Miniboss Room", player)
            and (
                state.has("Clawshots", player, 1)
                and (state.has("Progressive Sword", player, 1))
            )
        )
    if ex == "Sky Keep - Fire Sanctuary Room - Dungeon Exit":
        return lambda state, player=world.player: True
    if ex == "Sky Keep - Fire Sanctuary Room - Ancient Cistern Room":
        return lambda state, player=world.player: True
    if ex == "Sky Keep - Fire Sanctuary Room - Miniboss Room":
        return lambda state, player=world.player: (
            state.can_reach_region("Sky Keep - Fire Sanctuary Room", player)
            and (
                (state.has("Progressive Beetle", player, 1))
                and state.has("Clawshots", player, 1)
            )
        )
    if ex == "Sky Keep - Fire Sanctuary Room - Sandship Room":
        return lambda state, player=world.player: (
            state.can_reach_region("Sky Keep - Fire Sanctuary Room", player)
            and (
                (state.has("Progressive Beetle", player, 1))
                and state.has("Clawshots", player, 1)
            )
        )
    if ex == "Sky Keep - Sandship Room - Dungeon Exit":
        return lambda state, player=world.player: True
    if ex == "Sky Keep - Sandship Room - Fire Sanctuary Room":
        return lambda state, player=world.player: True


def gratitude_crystals_macros(world: "SSWorld", macro):
    if macro == "1 Gratitude Crystals":
        return lambda state, player=world.player: (
            state.has("Gratitude Crystal", player, 1)
            or state.has("Gratitude Crystal Pack", player, 1)
        )
    if macro == "2 Gratitude Crystals":
        return lambda state, player=world.player: (
            state.has("Gratitude Crystal", player, 2)
            or state.has("Gratitude Crystal Pack", player, 1)
        )
    if macro == "3 Gratitude Crystals":
        return lambda state, player=world.player: (
            state.has("Gratitude Crystal", player, 3)
            or state.has("Gratitude Crystal Pack", player, 1)
        )
    if macro == "4 Gratitude Crystals":
        return lambda state, player=world.player: (
            state.has("Gratitude Crystal", player, 4)
            or state.has("Gratitude Crystal Pack", player, 1)
        )
    if macro == "5 Gratitude Crystals":
        return lambda state, player=world.player: (
            state.has("Gratitude Crystal", player, 5)
            or state.has("Gratitude Crystal Pack", player, 1)
        )
    if macro == "6 Gratitude Crystals":
        return lambda state, player=world.player: (
            state.has("Gratitude Crystal", player, 6)
            or (
                state.has("Gratitude Crystal", player, 1)
                and state.has("Gratitude Crystal Pack", player, 1)
            )
            or state.has("Gratitude Crystal Pack", player, 2)
        )
    if macro == "7 Gratitude Crystals":
        return lambda state, player=world.player: (
            state.has("Gratitude Crystal", player, 7)
            or (
                state.has("Gratitude Crystal", player, 2)
                and state.has("Gratitude Crystal Pack", player, 1)
            )
            or state.has("Gratitude Crystal Pack", player, 2)
        )
    if macro == "8 Gratitude Crystals":
        return lambda state, player=world.player: (
            state.has("Gratitude Crystal", player, 8)
            or (
                state.has("Gratitude Crystal", player, 3)
                and state.has("Gratitude Crystal Pack", player, 1)
            )
            or state.has("Gratitude Crystal Pack", player, 2)
        )
    if macro == "9 Gratitude Crystals":
        return lambda state, player=world.player: (
            state.has("Gratitude Crystal", player, 9)
            or (
                state.has("Gratitude Crystal", player, 4)
                and state.has("Gratitude Crystal Pack", player, 1)
            )
            or state.has("Gratitude Crystal Pack", player, 2)
        )
    if macro == "10 Gratitude Crystals":
        return lambda state, player=world.player: (
            state.has("Gratitude Crystal", player, 10)
            or (
                state.has("Gratitude Crystal", player, 5)
                and state.has("Gratitude Crystal Pack", player, 1)
            )
            or state.has("Gratitude Crystal Pack", player, 2)
        )
    if macro == "11 Gratitude Crystals":
        return lambda state, player=world.player: (
            state.has("Gratitude Crystal", player, 11)
            or (
                state.has("Gratitude Crystal", player, 6)
                and state.has("Gratitude Crystal Pack", player, 1)
            )
            or (
                state.has("Gratitude Crystal", player, 1)
                and state.has("Gratitude Crystal Pack", player, 2)
            )
            or state.has("Gratitude Crystal Pack", player, 3)
        )
    if macro == "12 Gratitude Crystals":
        return lambda state, player=world.player: (
            state.has("Gratitude Crystal", player, 12)
            or (
                state.has("Gratitude Crystal", player, 7)
                and state.has("Gratitude Crystal Pack", player, 1)
            )
            or (
                state.has("Gratitude Crystal", player, 2)
                and state.has("Gratitude Crystal Pack", player, 2)
            )
            or state.has("Gratitude Crystal Pack", player, 3)
        )
    if macro == "13 Gratitude Crystals":
        return lambda state, player=world.player: (
            state.has("Gratitude Crystal", player, 13)
            or (
                state.has("Gratitude Crystal", player, 8)
                and state.has("Gratitude Crystal Pack", player, 1)
            )
            or (
                state.has("Gratitude Crystal", player, 3)
                and state.has("Gratitude Crystal Pack", player, 2)
            )
            or state.has("Gratitude Crystal Pack", player, 3)
        )
    if macro == "14 Gratitude Crystals":
        return lambda state, player=world.player: (
            state.has("Gratitude Crystal", player, 14)
            or (
                state.has("Gratitude Crystal", player, 9)
                and state.has("Gratitude Crystal Pack", player, 1)
            )
            or (
                state.has("Gratitude Crystal", player, 4)
                and state.has("Gratitude Crystal Pack", player, 2)
            )
            or state.has("Gratitude Crystal Pack", player, 3)
        )
    if macro == "15 Gratitude Crystals":
        return lambda state, player=world.player: (
            state.has("Gratitude Crystal", player, 15)
            or (
                state.has("Gratitude Crystal", player, 10)
                and state.has("Gratitude Crystal Pack", player, 1)
            )
            or (
                state.has("Gratitude Crystal", player, 5)
                and state.has("Gratitude Crystal Pack", player, 2)
            )
            or state.has("Gratitude Crystal Pack", player, 3)
        )
    if macro == "16 Gratitude Crystals":
        return lambda state, player=world.player: (
            (
                state.has("Gratitude Crystal", player, 11)
                and state.has("Gratitude Crystal Pack", player, 1)
            )
            or (
                state.has("Gratitude Crystal", player, 6)
                and state.has("Gratitude Crystal Pack", player, 2)
            )
            or (
                state.has("Gratitude Crystal", player, 1)
                and state.has("Gratitude Crystal Pack", player, 3)
            )
            or state.has("Gratitude Crystal Pack", player, 4)
        )
    if macro == "17 Gratitude Crystals":
        return lambda state, player=world.player: (
            (
                state.has("Gratitude Crystal", player, 12)
                and state.has("Gratitude Crystal Pack", player, 1)
            )
            or (
                state.has("Gratitude Crystal", player, 7)
                and state.has("Gratitude Crystal Pack", player, 2)
            )
            or (
                state.has("Gratitude Crystal", player, 2)
                and state.has("Gratitude Crystal Pack", player, 3)
            )
            or state.has("Gratitude Crystal Pack", player, 4)
        )
    if macro == "18 Gratitude Crystals":
        return lambda state, player=world.player: (
            (
                state.has("Gratitude Crystal", player, 13)
                and state.has("Gratitude Crystal Pack", player, 1)
            )
            or (
                state.has("Gratitude Crystal", player, 8)
                and state.has("Gratitude Crystal Pack", player, 2)
            )
            or (
                state.has("Gratitude Crystal", player, 3)
                and state.has("Gratitude Crystal Pack", player, 3)
            )
            or state.has("Gratitude Crystal Pack", player, 4)
        )
    if macro == "19 Gratitude Crystals":
        return lambda state, player=world.player: (
            (
                state.has("Gratitude Crystal", player, 14)
                and state.has("Gratitude Crystal Pack", player, 1)
            )
            or (
                state.has("Gratitude Crystal", player, 9)
                and state.has("Gratitude Crystal Pack", player, 2)
            )
            or (
                state.has("Gratitude Crystal", player, 4)
                and state.has("Gratitude Crystal Pack", player, 3)
            )
            or state.has("Gratitude Crystal Pack", player, 4)
        )
    if macro == "20 Gratitude Crystals":
        return lambda state, player=world.player: (
            (
                state.has("Gratitude Crystal", player, 15)
                and state.has("Gratitude Crystal Pack", player, 1)
            )
            or (
                state.has("Gratitude Crystal", player, 10)
                and state.has("Gratitude Crystal Pack", player, 2)
            )
            or (
                state.has("Gratitude Crystal", player, 5)
                and state.has("Gratitude Crystal Pack", player, 3)
            )
            or state.has("Gratitude Crystal Pack", player, 4)
        )
    if macro == "21 Gratitude Crystals":
        return lambda state, player=world.player: (
            (
                state.has("Gratitude Crystal", player, 11)
                and state.has("Gratitude Crystal Pack", player, 2)
            )
            or (
                state.has("Gratitude Crystal", player, 6)
                and state.has("Gratitude Crystal Pack", player, 3)
            )
            or (
                state.has("Gratitude Crystal", player, 1)
                and state.has("Gratitude Crystal Pack", player, 4)
            )
            or state.has("Gratitude Crystal Pack", player, 5)
        )
    if macro == "22 Gratitude Crystals":
        return lambda state, player=world.player: (
            (
                state.has("Gratitude Crystal", player, 12)
                and state.has("Gratitude Crystal Pack", player, 2)
            )
            or (
                state.has("Gratitude Crystal", player, 7)
                and state.has("Gratitude Crystal Pack", player, 3)
            )
            or (
                state.has("Gratitude Crystal", player, 2)
                and state.has("Gratitude Crystal Pack", player, 4)
            )
            or state.has("Gratitude Crystal Pack", player, 5)
        )
    if macro == "23 Gratitude Crystals":
        return lambda state, player=world.player: (
            (
                state.has("Gratitude Crystal", player, 13)
                and state.has("Gratitude Crystal Pack", player, 2)
            )
            or (
                state.has("Gratitude Crystal", player, 8)
                and state.has("Gratitude Crystal Pack", player, 3)
            )
            or (
                state.has("Gratitude Crystal", player, 3)
                and state.has("Gratitude Crystal Pack", player, 4)
            )
            or state.has("Gratitude Crystal Pack", player, 5)
        )
    if macro == "24 Gratitude Crystals":
        return lambda state, player=world.player: (
            (
                state.has("Gratitude Crystal", player, 14)
                and state.has("Gratitude Crystal Pack", player, 2)
            )
            or (
                state.has("Gratitude Crystal", player, 9)
                and state.has("Gratitude Crystal Pack", player, 3)
            )
            or (
                state.has("Gratitude Crystal", player, 4)
                and state.has("Gratitude Crystal Pack", player, 4)
            )
            or state.has("Gratitude Crystal Pack", player, 5)
        )
    if macro == "25 Gratitude Crystals":
        return lambda state, player=world.player: (
            (
                state.has("Gratitude Crystal", player, 15)
                and state.has("Gratitude Crystal Pack", player, 2)
            )
            or (
                state.has("Gratitude Crystal", player, 10)
                and state.has("Gratitude Crystal Pack", player, 3)
            )
            or (
                state.has("Gratitude Crystal", player, 5)
                and state.has("Gratitude Crystal Pack", player, 4)
            )
            or state.has("Gratitude Crystal Pack", player, 5)
        )
    if macro == "26 Gratitude Crystals":
        return lambda state, player=world.player: (
            (
                state.has("Gratitude Crystal", player, 11)
                and state.has("Gratitude Crystal Pack", player, 3)
            )
            or (
                state.has("Gratitude Crystal", player, 6)
                and state.has("Gratitude Crystal Pack", player, 4)
            )
            or (
                state.has("Gratitude Crystal", player, 1)
                and state.has("Gratitude Crystal Pack", player, 5)
            )
            or state.has("Gratitude Crystal Pack", player, 6)
        )
    if macro == "27 Gratitude Crystals":
        return lambda state, player=world.player: (
            (
                state.has("Gratitude Crystal", player, 12)
                and state.has("Gratitude Crystal Pack", player, 3)
            )
            or (
                state.has("Gratitude Crystal", player, 7)
                and state.has("Gratitude Crystal Pack", player, 4)
            )
            or (
                state.has("Gratitude Crystal", player, 2)
                and state.has("Gratitude Crystal Pack", player, 5)
            )
            or state.has("Gratitude Crystal Pack", player, 6)
        )
    if macro == "28 Gratitude Crystals":
        return lambda state, player=world.player: (
            (
                state.has("Gratitude Crystal", player, 13)
                and state.has("Gratitude Crystal Pack", player, 3)
            )
            or (
                state.has("Gratitude Crystal", player, 8)
                and state.has("Gratitude Crystal Pack", player, 4)
            )
            or (
                state.has("Gratitude Crystal", player, 3)
                and state.has("Gratitude Crystal Pack", player, 5)
            )
            or state.has("Gratitude Crystal Pack", player, 6)
        )
    if macro == "29 Gratitude Crystals":
        return lambda state, player=world.player: (
            (
                state.has("Gratitude Crystal", player, 14)
                and state.has("Gratitude Crystal Pack", player, 3)
            )
            or (
                state.has("Gratitude Crystal", player, 9)
                and state.has("Gratitude Crystal Pack", player, 4)
            )
            or (
                state.has("Gratitude Crystal", player, 4)
                and state.has("Gratitude Crystal Pack", player, 5)
            )
            or state.has("Gratitude Crystal Pack", player, 6)
        )
    if macro == "30 Gratitude Crystals":
        return lambda state, player=world.player: (
            (
                state.has("Gratitude Crystal", player, 15)
                and state.has("Gratitude Crystal Pack", player, 3)
            )
            or (
                state.has("Gratitude Crystal", player, 10)
                and state.has("Gratitude Crystal Pack", player, 4)
            )
            or (
                state.has("Gratitude Crystal", player, 5)
                and state.has("Gratitude Crystal Pack", player, 5)
            )
            or state.has("Gratitude Crystal Pack", player, 6)
        )
    if macro == "31 Gratitude Crystals":
        return lambda state, player=world.player: (
            (
                state.has("Gratitude Crystal", player, 11)
                and state.has("Gratitude Crystal Pack", player, 4)
            )
            or (
                state.has("Gratitude Crystal", player, 6)
                and state.has("Gratitude Crystal Pack", player, 5)
            )
            or (
                state.has("Gratitude Crystal", player, 1)
                and state.has("Gratitude Crystal Pack", player, 6)
            )
            or state.has("Gratitude Crystal Pack", player, 7)
        )
    if macro == "32 Gratitude Crystals":
        return lambda state, player=world.player: (
            (
                state.has("Gratitude Crystal", player, 12)
                and state.has("Gratitude Crystal Pack", player, 4)
            )
            or (
                state.has("Gratitude Crystal", player, 7)
                and state.has("Gratitude Crystal Pack", player, 5)
            )
            or (
                state.has("Gratitude Crystal", player, 2)
                and state.has("Gratitude Crystal Pack", player, 6)
            )
            or state.has("Gratitude Crystal Pack", player, 7)
        )
    if macro == "33 Gratitude Crystals":
        return lambda state, player=world.player: (
            (
                state.has("Gratitude Crystal", player, 13)
                and state.has("Gratitude Crystal Pack", player, 4)
            )
            or (
                state.has("Gratitude Crystal", player, 8)
                and state.has("Gratitude Crystal Pack", player, 5)
            )
            or (
                state.has("Gratitude Crystal", player, 3)
                and state.has("Gratitude Crystal Pack", player, 6)
            )
            or state.has("Gratitude Crystal Pack", player, 7)
        )
    if macro == "34 Gratitude Crystals":
        return lambda state, player=world.player: (
            (
                state.has("Gratitude Crystal", player, 14)
                and state.has("Gratitude Crystal Pack", player, 4)
            )
            or (
                state.has("Gratitude Crystal", player, 9)
                and state.has("Gratitude Crystal Pack", player, 5)
            )
            or (
                state.has("Gratitude Crystal", player, 4)
                and state.has("Gratitude Crystal Pack", player, 6)
            )
            or state.has("Gratitude Crystal Pack", player, 7)
        )
    if macro == "35 Gratitude Crystals":
        return lambda state, player=world.player: (
            (
                state.has("Gratitude Crystal", player, 15)
                and state.has("Gratitude Crystal Pack", player, 4)
            )
            or (
                state.has("Gratitude Crystal", player, 10)
                and state.has("Gratitude Crystal Pack", player, 5)
            )
            or (
                state.has("Gratitude Crystal", player, 5)
                and state.has("Gratitude Crystal Pack", player, 6)
            )
            or state.has("Gratitude Crystal Pack", player, 7)
        )
    if macro == "36 Gratitude Crystals":
        return lambda state, player=world.player: (
            (
                state.has("Gratitude Crystal", player, 11)
                and state.has("Gratitude Crystal Pack", player, 5)
            )
            or (
                state.has("Gratitude Crystal", player, 6)
                and state.has("Gratitude Crystal Pack", player, 6)
            )
            or (
                state.has("Gratitude Crystal", player, 1)
                and state.has("Gratitude Crystal Pack", player, 7)
            )
            or state.has("Gratitude Crystal Pack", player, 8)
        )
    if macro == "37 Gratitude Crystals":
        return lambda state, player=world.player: (
            (
                state.has("Gratitude Crystal", player, 12)
                and state.has("Gratitude Crystal Pack", player, 5)
            )
            or (
                state.has("Gratitude Crystal", player, 7)
                and state.has("Gratitude Crystal Pack", player, 6)
            )
            or (
                state.has("Gratitude Crystal", player, 2)
                and state.has("Gratitude Crystal Pack", player, 7)
            )
            or state.has("Gratitude Crystal Pack", player, 8)
        )
    if macro == "38 Gratitude Crystals":
        return lambda state, player=world.player: (
            (
                state.has("Gratitude Crystal", player, 13)
                and state.has("Gratitude Crystal Pack", player, 5)
            )
            or (
                state.has("Gratitude Crystal", player, 8)
                and state.has("Gratitude Crystal Pack", player, 6)
            )
            or (
                state.has("Gratitude Crystal", player, 3)
                and state.has("Gratitude Crystal Pack", player, 7)
            )
            or state.has("Gratitude Crystal Pack", player, 8)
        )
    if macro == "39 Gratitude Crystals":
        return lambda state, player=world.player: (
            (
                state.has("Gratitude Crystal", player, 14)
                and state.has("Gratitude Crystal Pack", player, 5)
            )
            or (
                state.has("Gratitude Crystal", player, 9)
                and state.has("Gratitude Crystal Pack", player, 6)
            )
            or (
                state.has("Gratitude Crystal", player, 4)
                and state.has("Gratitude Crystal Pack", player, 7)
            )
            or state.has("Gratitude Crystal Pack", player, 8)
        )
    if macro == "40 Gratitude Crystals":
        return lambda state, player=world.player: (
            (
                state.has("Gratitude Crystal", player, 15)
                and state.has("Gratitude Crystal Pack", player, 5)
            )
            or (
                state.has("Gratitude Crystal", player, 10)
                and state.has("Gratitude Crystal Pack", player, 6)
            )
            or (
                state.has("Gratitude Crystal", player, 5)
                and state.has("Gratitude Crystal Pack", player, 7)
            )
            or state.has("Gratitude Crystal Pack", player, 8)
        )
    if macro == "41 Gratitude Crystals":
        return lambda state, player=world.player: (
            (
                state.has("Gratitude Crystal", player, 11)
                and state.has("Gratitude Crystal Pack", player, 6)
            )
            or (
                state.has("Gratitude Crystal", player, 6)
                and state.has("Gratitude Crystal Pack", player, 7)
            )
            or (
                state.has("Gratitude Crystal", player, 1)
                and state.has("Gratitude Crystal Pack", player, 8)
            )
            or state.has("Gratitude Crystal Pack", player, 9)
        )
    if macro == "42 Gratitude Crystals":
        return lambda state, player=world.player: (
            (
                state.has("Gratitude Crystal", player, 12)
                and state.has("Gratitude Crystal Pack", player, 6)
            )
            or (
                state.has("Gratitude Crystal", player, 7)
                and state.has("Gratitude Crystal Pack", player, 7)
            )
            or (
                state.has("Gratitude Crystal", player, 2)
                and state.has("Gratitude Crystal Pack", player, 8)
            )
            or state.has("Gratitude Crystal Pack", player, 9)
        )
    if macro == "43 Gratitude Crystals":
        return lambda state, player=world.player: (
            (
                state.has("Gratitude Crystal", player, 13)
                and state.has("Gratitude Crystal Pack", player, 6)
            )
            or (
                state.has("Gratitude Crystal", player, 8)
                and state.has("Gratitude Crystal Pack", player, 7)
            )
            or (
                state.has("Gratitude Crystal", player, 3)
                and state.has("Gratitude Crystal Pack", player, 8)
            )
            or state.has("Gratitude Crystal Pack", player, 9)
        )
    if macro == "44 Gratitude Crystals":
        return lambda state, player=world.player: (
            (
                state.has("Gratitude Crystal", player, 14)
                and state.has("Gratitude Crystal Pack", player, 6)
            )
            or (
                state.has("Gratitude Crystal", player, 9)
                and state.has("Gratitude Crystal Pack", player, 7)
            )
            or (
                state.has("Gratitude Crystal", player, 4)
                and state.has("Gratitude Crystal Pack", player, 8)
            )
            or state.has("Gratitude Crystal Pack", player, 9)
        )
    if macro == "45 Gratitude Crystals":
        return lambda state, player=world.player: (
            (
                state.has("Gratitude Crystal", player, 15)
                and state.has("Gratitude Crystal Pack", player, 6)
            )
            or (
                state.has("Gratitude Crystal", player, 10)
                and state.has("Gratitude Crystal Pack", player, 7)
            )
            or (
                state.has("Gratitude Crystal", player, 5)
                and state.has("Gratitude Crystal Pack", player, 8)
            )
            or state.has("Gratitude Crystal Pack", player, 9)
        )
    if macro == "46 Gratitude Crystals":
        return lambda state, player=world.player: (
            (
                state.has("Gratitude Crystal", player, 11)
                and state.has("Gratitude Crystal Pack", player, 7)
            )
            or (
                state.has("Gratitude Crystal", player, 6)
                and state.has("Gratitude Crystal Pack", player, 8)
            )
            or (
                state.has("Gratitude Crystal", player, 1)
                and state.has("Gratitude Crystal Pack", player, 9)
            )
            or state.has("Gratitude Crystal Pack", player, 10)
        )
    if macro == "47 Gratitude Crystals":
        return lambda state, player=world.player: (
            (
                state.has("Gratitude Crystal", player, 12)
                and state.has("Gratitude Crystal Pack", player, 7)
            )
            or (
                state.has("Gratitude Crystal", player, 7)
                and state.has("Gratitude Crystal Pack", player, 8)
            )
            or (
                state.has("Gratitude Crystal", player, 2)
                and state.has("Gratitude Crystal Pack", player, 9)
            )
            or state.has("Gratitude Crystal Pack", player, 10)
        )
    if macro == "48 Gratitude Crystals":
        return lambda state, player=world.player: (
            (
                state.has("Gratitude Crystal", player, 13)
                and state.has("Gratitude Crystal Pack", player, 7)
            )
            or (
                state.has("Gratitude Crystal", player, 8)
                and state.has("Gratitude Crystal Pack", player, 8)
            )
            or (
                state.has("Gratitude Crystal", player, 3)
                and state.has("Gratitude Crystal Pack", player, 9)
            )
            or state.has("Gratitude Crystal Pack", player, 10)
        )
    if macro == "49 Gratitude Crystals":
        return lambda state, player=world.player: (
            (
                state.has("Gratitude Crystal", player, 14)
                and state.has("Gratitude Crystal Pack", player, 7)
            )
            or (
                state.has("Gratitude Crystal", player, 9)
                and state.has("Gratitude Crystal Pack", player, 8)
            )
            or (
                state.has("Gratitude Crystal", player, 4)
                and state.has("Gratitude Crystal Pack", player, 9)
            )
            or state.has("Gratitude Crystal Pack", player, 10)
        )
    if macro == "50 Gratitude Crystals":
        return lambda state, player=world.player: (
            (
                state.has("Gratitude Crystal", player, 15)
                and state.has("Gratitude Crystal Pack", player, 7)
            )
            or (
                state.has("Gratitude Crystal", player, 10)
                and state.has("Gratitude Crystal Pack", player, 8)
            )
            or (
                state.has("Gratitude Crystal", player, 5)
                and state.has("Gratitude Crystal Pack", player, 9)
            )
            or state.has("Gratitude Crystal Pack", player, 10)
        )
    if macro == "51 Gratitude Crystals":
        return lambda state, player=world.player: (
            (
                state.has("Gratitude Crystal", player, 11)
                and state.has("Gratitude Crystal Pack", player, 8)
            )
            or (
                state.has("Gratitude Crystal", player, 6)
                and state.has("Gratitude Crystal Pack", player, 9)
            )
            or (
                state.has("Gratitude Crystal", player, 1)
                and state.has("Gratitude Crystal Pack", player, 10)
            )
            or state.has("Gratitude Crystal Pack", player, 11)
        )
    if macro == "52 Gratitude Crystals":
        return lambda state, player=world.player: (
            (
                state.has("Gratitude Crystal", player, 12)
                and state.has("Gratitude Crystal Pack", player, 8)
            )
            or (
                state.has("Gratitude Crystal", player, 7)
                and state.has("Gratitude Crystal Pack", player, 9)
            )
            or (
                state.has("Gratitude Crystal", player, 2)
                and state.has("Gratitude Crystal Pack", player, 10)
            )
            or state.has("Gratitude Crystal Pack", player, 11)
        )
    if macro == "53 Gratitude Crystals":
        return lambda state, player=world.player: (
            (
                state.has("Gratitude Crystal", player, 13)
                and state.has("Gratitude Crystal Pack", player, 8)
            )
            or (
                state.has("Gratitude Crystal", player, 8)
                and state.has("Gratitude Crystal Pack", player, 9)
            )
            or (
                state.has("Gratitude Crystal", player, 3)
                and state.has("Gratitude Crystal Pack", player, 10)
            )
            or state.has("Gratitude Crystal Pack", player, 11)
        )
    if macro == "54 Gratitude Crystals":
        return lambda state, player=world.player: (
            (
                state.has("Gratitude Crystal", player, 14)
                and state.has("Gratitude Crystal Pack", player, 8)
            )
            or (
                state.has("Gratitude Crystal", player, 9)
                and state.has("Gratitude Crystal Pack", player, 9)
            )
            or (
                state.has("Gratitude Crystal", player, 4)
                and state.has("Gratitude Crystal Pack", player, 10)
            )
            or state.has("Gratitude Crystal Pack", player, 11)
        )
    if macro == "55 Gratitude Crystals":
        return lambda state, player=world.player: (
            (
                state.has("Gratitude Crystal", player, 15)
                and state.has("Gratitude Crystal Pack", player, 8)
            )
            or (
                state.has("Gratitude Crystal", player, 10)
                and state.has("Gratitude Crystal Pack", player, 9)
            )
            or (
                state.has("Gratitude Crystal", player, 5)
                and state.has("Gratitude Crystal Pack", player, 10)
            )
            or state.has("Gratitude Crystal Pack", player, 11)
        )
    if macro == "56 Gratitude Crystals":
        return lambda state, player=world.player: (
            (
                state.has("Gratitude Crystal", player, 11)
                and state.has("Gratitude Crystal Pack", player, 9)
            )
            or (
                state.has("Gratitude Crystal", player, 6)
                and state.has("Gratitude Crystal Pack", player, 10)
            )
            or (
                state.has("Gratitude Crystal", player, 1)
                and state.has("Gratitude Crystal Pack", player, 11)
            )
            or state.has("Gratitude Crystal Pack", player, 12)
        )
    if macro == "57 Gratitude Crystals":
        return lambda state, player=world.player: (
            (
                state.has("Gratitude Crystal", player, 12)
                and state.has("Gratitude Crystal Pack", player, 9)
            )
            or (
                state.has("Gratitude Crystal", player, 7)
                and state.has("Gratitude Crystal Pack", player, 10)
            )
            or (
                state.has("Gratitude Crystal", player, 2)
                and state.has("Gratitude Crystal Pack", player, 11)
            )
            or state.has("Gratitude Crystal Pack", player, 12)
        )
    if macro == "58 Gratitude Crystals":
        return lambda state, player=world.player: (
            (
                state.has("Gratitude Crystal", player, 13)
                and state.has("Gratitude Crystal Pack", player, 9)
            )
            or (
                state.has("Gratitude Crystal", player, 8)
                and state.has("Gratitude Crystal Pack", player, 10)
            )
            or (
                state.has("Gratitude Crystal", player, 3)
                and state.has("Gratitude Crystal Pack", player, 11)
            )
            or state.has("Gratitude Crystal Pack", player, 12)
        )
    if macro == "59 Gratitude Crystals":
        return lambda state, player=world.player: (
            (
                state.has("Gratitude Crystal", player, 14)
                and state.has("Gratitude Crystal Pack", player, 9)
            )
            or (
                state.has("Gratitude Crystal", player, 9)
                and state.has("Gratitude Crystal Pack", player, 10)
            )
            or (
                state.has("Gratitude Crystal", player, 4)
                and state.has("Gratitude Crystal Pack", player, 11)
            )
            or state.has("Gratitude Crystal Pack", player, 12)
        )
    if macro == "60 Gratitude Crystals":
        return lambda state, player=world.player: (
            (
                state.has("Gratitude Crystal", player, 15)
                and state.has("Gratitude Crystal Pack", player, 9)
            )
            or (
                state.has("Gratitude Crystal", player, 10)
                and state.has("Gratitude Crystal Pack", player, 10)
            )
            or (
                state.has("Gratitude Crystal", player, 5)
                and state.has("Gratitude Crystal Pack", player, 11)
            )
            or state.has("Gratitude Crystal Pack", player, 12)
        )
    if macro == "61 Gratitude Crystals":
        return lambda state, player=world.player: (
            (
                state.has("Gratitude Crystal", player, 11)
                and state.has("Gratitude Crystal Pack", player, 10)
            )
            or (
                state.has("Gratitude Crystal", player, 6)
                and state.has("Gratitude Crystal Pack", player, 11)
            )
            or (
                state.has("Gratitude Crystal", player, 1)
                and state.has("Gratitude Crystal Pack", player, 12)
            )
            or state.has("Gratitude Crystal Pack", player, 13)
        )
    if macro == "62 Gratitude Crystals":
        return lambda state, player=world.player: (
            (
                state.has("Gratitude Crystal", player, 12)
                and state.has("Gratitude Crystal Pack", player, 10)
            )
            or (
                state.has("Gratitude Crystal", player, 7)
                and state.has("Gratitude Crystal Pack", player, 11)
            )
            or (
                state.has("Gratitude Crystal", player, 2)
                and state.has("Gratitude Crystal Pack", player, 12)
            )
            or state.has("Gratitude Crystal Pack", player, 13)
        )
    if macro == "63 Gratitude Crystals":
        return lambda state, player=world.player: (
            (
                state.has("Gratitude Crystal", player, 13)
                and state.has("Gratitude Crystal Pack", player, 10)
            )
            or (
                state.has("Gratitude Crystal", player, 8)
                and state.has("Gratitude Crystal Pack", player, 11)
            )
            or (
                state.has("Gratitude Crystal", player, 3)
                and state.has("Gratitude Crystal Pack", player, 12)
            )
            or state.has("Gratitude Crystal Pack", player, 13)
        )
    if macro == "64 Gratitude Crystals":
        return lambda state, player=world.player: (
            (
                state.has("Gratitude Crystal", player, 14)
                and state.has("Gratitude Crystal Pack", player, 10)
            )
            or (
                state.has("Gratitude Crystal", player, 9)
                and state.has("Gratitude Crystal Pack", player, 11)
            )
            or (
                state.has("Gratitude Crystal", player, 4)
                and state.has("Gratitude Crystal Pack", player, 12)
            )
            or state.has("Gratitude Crystal Pack", player, 13)
        )
    if macro == "65 Gratitude Crystals":
        return lambda state, player=world.player: (
            (
                state.has("Gratitude Crystal", player, 15)
                and state.has("Gratitude Crystal Pack", player, 10)
            )
            or (
                state.has("Gratitude Crystal", player, 10)
                and state.has("Gratitude Crystal Pack", player, 11)
            )
            or (
                state.has("Gratitude Crystal", player, 5)
                and state.has("Gratitude Crystal Pack", player, 12)
            )
            or state.has("Gratitude Crystal Pack", player, 13)
        )
    if macro == "66 Gratitude Crystals":
        return lambda state, player=world.player: (
            (
                state.has("Gratitude Crystal", player, 11)
                and state.has("Gratitude Crystal Pack", player, 11)
            )
            or (
                state.has("Gratitude Crystal", player, 6)
                and state.has("Gratitude Crystal Pack", player, 12)
            )
            or (
                state.has("Gratitude Crystal", player, 1)
                and state.has("Gratitude Crystal Pack", player, 13)
            )
        )
    if macro == "67 Gratitude Crystals":
        return lambda state, player=world.player: (
            (
                state.has("Gratitude Crystal", player, 12)
                and state.has("Gratitude Crystal Pack", player, 11)
            )
            or (
                state.has("Gratitude Crystal", player, 7)
                and state.has("Gratitude Crystal Pack", player, 12)
            )
            or (
                state.has("Gratitude Crystal", player, 2)
                and state.has("Gratitude Crystal Pack", player, 13)
            )
        )
    if macro == "68 Gratitude Crystals":
        return lambda state, player=world.player: (
            (
                state.has("Gratitude Crystal", player, 13)
                and state.has("Gratitude Crystal Pack", player, 11)
            )
            or (
                state.has("Gratitude Crystal", player, 8)
                and state.has("Gratitude Crystal Pack", player, 12)
            )
            or (
                state.has("Gratitude Crystal", player, 3)
                and state.has("Gratitude Crystal Pack", player, 13)
            )
        )
    if macro == "69 Gratitude Crystals":
        return lambda state, player=world.player: (
            (
                state.has("Gratitude Crystal", player, 14)
                and state.has("Gratitude Crystal Pack", player, 11)
            )
            or (
                state.has("Gratitude Crystal", player, 9)
                and state.has("Gratitude Crystal Pack", player, 12)
            )
            or (
                state.has("Gratitude Crystal", player, 4)
                and state.has("Gratitude Crystal Pack", player, 13)
            )
        )
    if macro == "70 Gratitude Crystals":
        return lambda state, player=world.player: (
            (
                state.has("Gratitude Crystal", player, 15)
                and state.has("Gratitude Crystal Pack", player, 11)
            )
            or (
                state.has("Gratitude Crystal", player, 10)
                and state.has("Gratitude Crystal Pack", player, 12)
            )
            or (
                state.has("Gratitude Crystal", player, 5)
                and state.has("Gratitude Crystal Pack", player, 13)
            )
        )
    if macro == "71 Gratitude Crystals":
        return lambda state, player=world.player: (
            (
                state.has("Gratitude Crystal", player, 11)
                and state.has("Gratitude Crystal Pack", player, 12)
            )
            or (
                state.has("Gratitude Crystal", player, 6)
                and state.has("Gratitude Crystal Pack", player, 13)
            )
        )
    if macro == "72 Gratitude Crystals":
        return lambda state, player=world.player: (
            (
                state.has("Gratitude Crystal", player, 12)
                and state.has("Gratitude Crystal Pack", player, 12)
            )
            or (
                state.has("Gratitude Crystal", player, 7)
                and state.has("Gratitude Crystal Pack", player, 13)
            )
        )
    if macro == "73 Gratitude Crystals":
        return lambda state, player=world.player: (
            (
                state.has("Gratitude Crystal", player, 13)
                and state.has("Gratitude Crystal Pack", player, 12)
            )
            or (
                state.has("Gratitude Crystal", player, 8)
                and state.has("Gratitude Crystal Pack", player, 13)
            )
        )
    if macro == "74 Gratitude Crystals":
        return lambda state, player=world.player: (
            (
                state.has("Gratitude Crystal", player, 14)
                and state.has("Gratitude Crystal Pack", player, 12)
            )
            or (
                state.has("Gratitude Crystal", player, 9)
                and state.has("Gratitude Crystal Pack", player, 13)
            )
        )
    if macro == "75 Gratitude Crystals":
        return lambda state, player=world.player: (
            (
                state.has("Gratitude Crystal", player, 15)
                and state.has("Gratitude Crystal Pack", player, 12)
            )
            or (
                state.has("Gratitude Crystal", player, 10)
                and state.has("Gratitude Crystal Pack", player, 13)
            )
        )
    if macro == "76 Gratitude Crystals":
        return lambda state, player=world.player: (
            state.has("Gratitude Crystal", player, 11)
            and state.has("Gratitude Crystal Pack", player, 13)
        )
    if macro == "77 Gratitude Crystals":
        return lambda state, player=world.player: (
            state.has("Gratitude Crystal", player, 12)
            and state.has("Gratitude Crystal Pack", player, 13)
        )
    if macro == "78 Gratitude Crystals":
        return lambda state, player=world.player: (
            state.has("Gratitude Crystal", player, 13)
            and state.has("Gratitude Crystal Pack", player, 13)
        )
    if macro == "79 Gratitude Crystals":
        return lambda state, player=world.player: (
            state.has("Gratitude Crystal", player, 14)
            and state.has("Gratitude Crystal Pack", player, 13)
        )
    if macro == "80 Gratitude Crystals":
        return lambda state, player=world.player: (
            state.has("Gratitude Crystal", player, 15)
            and state.has("Gratitude Crystal Pack", player, 13)
        )
